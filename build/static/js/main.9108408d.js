/*! For license information please see main.9108408d.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function q(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case S:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ie=null;function Se(e){if(e=yi(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=gi(t),_e(e.stateNode,e.type,t))}}function Te(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Ee(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ie)&&(Ne(),Ee())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=gi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,je={onError:function(e){Me=!0,Fe=e}};function qe(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ht(u):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function mt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var gt=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,bt,_t,xt,It,St=!1,Tt=[],Et=null,Ct=null,Nt=null,At=new Map,Pt=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=yi(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void It(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ht(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yi(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){St=!1,null!==Et&&Ft(Et)&&(Et=null),null!==Ct&&Ft(Ct)&&(Ct=null),null!==Nt&&Ft(Nt)&&(Nt=null),At.forEach(Ut),Pt.forEach(Ut)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function qt(e){function t(t){return jt(t,e)}if(0<Tt.length){jt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Et&&jt(Et,e),null!==Ct&&jt(Ct,e),null!==Nt&&jt(Nt,e),At.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Rt.shift()}var Bt=w.ReactCurrentBatchConfig;function zt(e,t,n,r){var i=gt,a=Bt.transition;Bt.transition=null;try{gt=1,Kt(e,t,n,r)}finally{gt=i,Bt.transition=a}}function Wt(e,t,n,r){var i=gt,a=Bt.transition;Bt.transition=null;try{gt=4,Kt(e,t,n,r)}finally{gt=i,Bt.transition=a}}function Kt(e,t,n,r){var i=Ht(e,t,n,r);if(null===i)Br(e,t,r,Gt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Et=Lt(Et,e,t,n,r,i),!0;case"dragenter":return Ct=Lt(Ct,e,t,n,r,i),!0;case"mouseover":return Nt=Lt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Lt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Lt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=yi(i);if(null!==a&&wt(a),null===(a=Ht(e,t,n,r))&&Br(e,t,r,Gt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Br(e,t,r,null,n)}var Gt=null;function Ht(e,t,n,r){if(Gt=null,null!==(e=vi(e=be(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,$t=null,Xt=null;function Jt(){if(Xt)return Xt;var e,t,n=$t,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Xt=i.slice(e,1<t?1-t:void 0)}function Zt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function en(){return!0}function tn(){return!1}function nn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?en:tn,this.isPropagationStopped=tn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=en)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=en)},persist:function(){},isPersistent:en}),t}var rn,an,on,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sn=nn(un),cn=F({},un,{view:0,detail:0}),ln=nn(cn),hn=F({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&"mousemove"===e.type?(rn=e.screenX-on.screenX,an=e.screenY-on.screenY):an=rn=0,on=e),rn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=nn(hn),dn=nn(F({},hn,{dataTransfer:0})),pn=nn(F({},cn,{relatedTarget:0})),vn=nn(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mn=nn(yn),gn=nn(F({},un,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=bn[e])&&!!t[e]}function xn(){return _n}var In=F({},cn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Zt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?Zt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Zt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=nn(In),Tn=nn(F({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=nn(F({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),Cn=nn(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=F({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=nn(Nn),Pn=[9,13,27,32],Rn=l&&"CompositionEvent"in window,Dn=null;l&&"documentMode"in document&&(Dn=document.documentMode);var On=l&&"TextEvent"in window&&!Dn,Ln=l&&(!Rn||Dn&&8<Dn&&11>=Dn),Mn=String.fromCharCode(32),Fn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function zn(e,t,n,r){Te(r),0<(t=Wr(t,"onChange")).length&&(n=new sn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Kn=null;function Gn(e){Mr(e,0)}function Hn(e){if(H(mi(e)))return e}function Qn(e,t){if("change"===e)return t}var Yn=!1;if(l){var $n;if(l){var Xn="oninput"in document;if(!Xn){var Jn=document.createElement("div");Jn.setAttribute("oninput","return;"),Xn="function"===typeof Jn.oninput}$n=Xn}else $n=!1;Yn=$n&&(!document.documentMode||9<document.documentMode)}function Zn(){Wn&&(Wn.detachEvent("onpropertychange",er),Kn=Wn=null)}function er(e){if("value"===e.propertyName&&Hn(Kn)){var t=[];zn(t,Kn,e,be(e)),Pe(Gn,t)}}function tr(e,t,n){"focusin"===e?(Zn(),Kn=n,(Wn=t).attachEvent("onpropertychange",er)):"focusout"===e&&Zn()}function nr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Hn(Kn)}function rr(e,t){if("click"===e)return Hn(t)}function ir(e,t){if("input"===e||"change"===e)return Hn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function or(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function cr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?cr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function lr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=lr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&cr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=sr(n,a);var o=sr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dr=l&&"documentMode"in document&&11>=document.documentMode,pr=null,vr=null,yr=null,mr=!1;function gr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;mr||null==pr||pr!==Q(r)||("selectionStart"in(r=pr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&or(yr,r)||(yr=r,0<(r=Wr(vr,"onSelect")).length&&(t=new sn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pr)))}function kr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionend:kr("Transition","TransitionEnd")},br={},_r={};function xr(e){if(br[e])return br[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return br[e]=n[t];return e}l&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Ir=xr("animationend"),Sr=xr("animationiteration"),Tr=xr("animationstart"),Er=xr("transitionend"),Cr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Cr.set(e,t),s(t,[e])}for(var Pr=0;Pr<Nr.length;Pr++){var Rr=Nr[Pr];Ar(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Ar(Ir,"onAnimationEnd"),Ar(Sr,"onAnimationIteration"),Ar(Tr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Er,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(qe.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Mr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Lr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Lr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Fr(e,t){var n=t[fi];void 0===n&&(n=t[fi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function jr(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Or.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Ur("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Qt(t)){case 1:var i=zt;break;case 4:i=Wt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Br(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=vi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Pe((function(){var r=a,i=be(n),o=[];e:{var u=Cr.get(e);if(void 0!==u){var s=sn,c=e;switch(e){case"keypress":if(0===Zt(n))break e;case"keydown":case"keyup":s=Sn;break;case"focusin":c="focus",s=pn;break;case"focusout":c="blur",s=pn;break;case"beforeblur":case"afterblur":s=pn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=dn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=En;break;case Ir:case Sr:case Tr:s=vn;break;case Er:s=Cn;break;case"scroll":s=ln;break;case"wheel":s=An;break;case"copy":case"cut":case"paste":s=mn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Tn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Re(p,f))&&l.push(zr(p,v,d)))),h)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[hi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=fn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Tn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==s?u:mi(s),d=null==c?u:mi(c),(u=new l(v,p+"leave",s,n,i)).target=h,u.relatedTarget=d,v=null,vi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,s&&c)e:{for(f=c,p=0,d=l=s;d;d=Kr(d))p++;for(d=0,v=f;v;v=Kr(v))d++;for(;0<p-d;)l=Kr(l),p--;for(;0<d-p;)f=Kr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Kr(l),f=Kr(f)}l=null}else l=null;null!==s&&Gr(o,u,s,l,!1),null!==c&&null!==h&&Gr(o,h,c,l,!0)}if("select"===(s=(u=r?mi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Qn;else if(Bn(u))if(Yn)y=ir;else{y=nr;var m=tr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=rr);switch(y&&(y=y(e,r))?zn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?mi(r):window,e){case"focusin":(Bn(m)||"true"===m.contentEditable)&&(pr=m,vr=r,yr=null);break;case"focusout":yr=vr=pr=null;break;case"mousedown":mr=!0;break;case"contextmenu":case"mouseup":case"dragend":mr=!1,gr(o,n,i);break;case"selectionchange":if(dr)break;case"keydown":case"keyup":gr(o,n,i)}var g;if(Rn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else jn?Un(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Ln&&"ko"!==n.locale&&(jn||"onCompositionStart"!==k?"onCompositionEnd"===k&&jn&&(g=Jt()):($t="value"in(Yt=i)?Yt.value:Yt.textContent,jn=!0)),0<(m=Wr(r,k)).length&&(k=new gn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Vn(n))&&(k.data=g))),(g=On?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Mn);case"textInput":return(e=t.data)===Mn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!Rn&&Un(e,t)?(e=Jt(),Xt=$t=Yt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new gn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Mr(o,t)}))}function zr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(zr(e,a,i)),null!=(a=Re(e,t))&&r.push(zr(e,a,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(zr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(zr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Hr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Hr,"\n").replace(Qr,"")}function $r(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function Xr(){}var Jr=null;function Zr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ei="function"===typeof setTimeout?setTimeout:void 0,ti="function"===typeof clearTimeout?clearTimeout:void 0,ni="function"===typeof Promise?Promise:void 0,ri="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ni?function(e){return ni.resolve(null).then(e).catch(ii)}:ei;function ii(e){setTimeout((function(){throw e}))}function ai(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function oi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var si=Math.random().toString(36).slice(2),ci="__reactFiber$"+si,li="__reactProps$"+si,hi="__reactContainer$"+si,fi="__reactEvents$"+si,di="__reactListeners$"+si,pi="__reactHandles$"+si;function vi(e){var t=e[ci];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hi]||n[ci]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[ci])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function yi(e){return!(e=e[ci]||e[hi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function mi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function gi(e){return e[li]||null}var ki=[],wi=-1;function bi(e){return{current:e}}function _i(e){0>wi||(e.current=ki[wi],ki[wi]=null,wi--)}function xi(e,t){wi++,ki[wi]=e.current,e.current=t}var Ii={},Si=bi(Ii),Ti=bi(!1),Ei=Ii;function Ci(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ni(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ai(){_i(Ti),_i(Si)}function Pi(e,t,n){if(Si.current!==Ii)throw Error(a(168));xi(Si,t),xi(Ti,n)}function Ri(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Di(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Ei=Si.current,xi(Si,e),xi(Ti,Ti.current),!0}function Oi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Ri(e,t,Ei),r.__reactInternalMemoizedMergedChildContext=e,_i(Ti),_i(Si),xi(Si,e)):_i(Ti),xi(Ti,n)}var Li=null,Mi=!1,Fi=!1;function Ui(e){null===Li?Li=[e]:Li.push(e)}function Vi(){if(!Fi&&null!==Li){Fi=!0;var e=0,t=gt;try{var n=Li;for(gt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Li=null,Mi=!1}catch(i){throw null!==Li&&(Li=Li.slice(e+1)),He(Ze,Vi),i}finally{gt=t,Fi=!1}}return null}var ji=w.ReactCurrentBatchConfig;function qi(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Bi=bi(null),zi=null,Wi=null,Ki=null;function Gi(){Ki=Wi=zi=null}function Hi(e){var t=Bi.current;_i(Bi),e._currentValue=t}function Qi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Yi(e,t){zi=e,Ki=Wi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(mu=!0),e.firstContext=null)}function $i(e){var t=e._currentValue;if(Ki!==e)if(e={context:e,memoizedValue:t,next:null},null===Wi){if(null===zi)throw Error(a(308));Wi=e,zi.dependencies={lanes:0,firstContext:e}}else Wi=Wi.next=e;return t}var Xi=null,Ji=!1;function Zi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ea(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ta(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function na(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==gs&&0!==(1&e.mode)&&0===(2&ms)?(null===(e=n.interleaved)?(t.next=t,null===Xi?Xi=[n]:Xi.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function ra(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mt(e,n)}}function ia(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function aa(e,t,n,r){var i=e.updateQueue;Ji=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var h=i.baseState;for(o=0,l=c=s=null,u=a;;){var f=u.lane,d=u.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=F({},h,f);break e;case 2:Ji=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[u]:f.push(u))}else d={eventTime:d,lane:f,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=h):l=l.next=d,o|=f;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(f=u).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(s=h),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ss|=o,e.lanes=o,e.memoizedState=h}}function oa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ua=(new r.Component).refs;function sa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ca={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Bs(),i=zs(e),a=ta(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),na(e,a),null!==(t=Ws(e,i,r))&&ra(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Bs(),i=zs(e),a=ta(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),na(e,a),null!==(t=Ws(e,i,r))&&ra(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Bs(),r=zs(e),i=ta(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),na(e,i),null!==(t=Ws(e,r,n))&&ra(t,e,r)}};function la(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!or(n,r)||!or(i,a))}function ha(e,t,n){var r=!1,i=Ii,a=t.contextType;return"object"===typeof a&&null!==a?a=$i(a):(i=Ni(t)?Ei:Si.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ci(e,i):Ii),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ca,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function fa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ca.enqueueReplaceState(t,t.state,null)}function da(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ua,Zi(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=$i(a):(a=Ni(t)?Ei:Si.current,i.context=Ci(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(sa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ca.enqueueReplaceState(i,i.state,null),aa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var pa=[],va=0,ya=null,ma=0,ga=[],ka=0,wa=null,ba=1,_a="";function xa(e,t){pa[va++]=ma,pa[va++]=ya,ya=e,ma=t}function Ia(e,t,n){ga[ka++]=ba,ga[ka++]=_a,ga[ka++]=wa,wa=e;var r=ba;e=_a;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ba=1<<32-ot(t)+i|n<<i|r,_a=a+e}else ba=1<<a|n<<i|r,_a=e}function Sa(e){null!==e.return&&(xa(e,1),Ia(e,1,0))}function Ta(e){for(;e===ya;)ya=pa[--va],pa[va]=null,ma=pa[--va],pa[va]=null;for(;e===wa;)wa=ga[--ka],ga[ka]=null,_a=ga[--ka],ga[ka]=null,ba=ga[--ka],ga[ka]=null}var Ea=null,Ca=null,Na=!1,Aa=null;function Pa(e,t){var n=wc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Ra(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Ea=e,Ca=oi(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Ea=e,Ca=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==wa?{id:ba,overflow:_a}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=wc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Ea=e,Ca=null,!0);default:return!1}}function Da(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Oa(e){if(Na){var t=Ca;if(t){var n=t;if(!Ra(e,t)){if(Da(e))throw Error(a(418));t=oi(n.nextSibling);var r=Ea;t&&Ra(e,t)?Pa(r,n):(e.flags=-4097&e.flags|2,Na=!1,Ea=e)}}else{if(Da(e))throw Error(a(418));e.flags=-4097&e.flags|2,Na=!1,Ea=e}}}function La(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ea=e}function Ma(e){if(e!==Ea)return!1;if(!Na)return La(e),Na=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Zr(e.type,e.memoizedProps)),t&&(t=Ca)){if(Da(e)){for(e=Ca;e;)e=oi(e.nextSibling);throw Error(a(418))}for(;t;)Pa(e,t),t=oi(t.nextSibling)}if(La(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ca=oi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ca=null}}else Ca=Ea?oi(e.stateNode.nextSibling):null;return!0}function Fa(){Ca=Ea=null,Na=!1}function Ua(e){null===Aa?Aa=[e]:Aa.push(e)}function Va(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ja(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qa(e){return(0,e._init)(e._payload)}function Ba(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=_c(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Tc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&qa(a)===t.type)?((r=i(t,n.props)).ref=Va(e,t,n),r.return=e,r):((r=xc(n.type,n.key,n.props,null,e.mode,r)).ref=Va(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ec(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Ic(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Tc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=xc(t.type,t.key,t.props,null,e.mode,n)).ref=Va(e,null,t),n.return=e,n;case _:return(t=Ec(t,e.mode,n)).return=e,t;case R:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ic(t,e.mode,n,null)).return=e,t;ja(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);ja(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);ja(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,h=a,v=a=0,y=null;null!==h&&v<u.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var m=d(i,h,u[v],s);if(null===m){null===h&&(h=y);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,h=y}if(v===u.length)return n(i,h),Na&&xa(i,v),c;if(null===h){for(;v<u.length;v++)null!==(h=f(i,u[v],s))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return Na&&xa(i,v),c}for(h=r(i,h);v<u.length;v++)null!==(y=p(h,i,v,u[v],s))&&(e&&null!==y.alternate&&h.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach((function(e){return t(i,e)})),Na&&xa(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var h=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===h?l=k:h.sibling=k,h=k,v=m}if(g.done)return n(i,v),Na&&xa(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=f(i,g.value,c))&&(u=o(g,u,y),null===h?l=g:h.sibling=g,h=g);return Na&&xa(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),Na&&xa(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Va(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Ic(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=xc(o.type,o.key,o.props,null,r.mode,s)).ref=Va(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Ec(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);ja(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Tc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var za=Ba(!0),Wa=Ba(!1),Ka={},Ga=bi(Ka),Ha=bi(Ka),Qa=bi(Ka);function Ya(e){if(e===Ka)throw Error(a(174));return e}function $a(e,t){switch(xi(Qa,t),xi(Ha,e),xi(Ga,Ka),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_i(Ga),xi(Ga,t)}function Xa(){_i(Ga),_i(Ha),_i(Qa)}function Ja(e){Ya(Qa.current);var t=Ya(Ga.current),n=se(t,e.type);t!==n&&(xi(Ha,e),xi(Ga,n))}function Za(e){Ha.current===e&&(_i(Ga),_i(Ha))}var eo=bi(0);function to(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var no=[];function ro(){for(var e=0;e<no.length;e++)no[e]._workInProgressVersionPrimary=null;no.length=0}var io=w.ReactCurrentDispatcher,ao=w.ReactCurrentBatchConfig,oo=0,uo=null,so=null,co=null,lo=!1,ho=!1,fo=0,po=0;function vo(){throw Error(a(321))}function yo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function mo(e,t,n,r,i,o){if(oo=o,uo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=null===e||null===e.memoizedState?Zo:eu,e=n(r,i),ho){o=0;do{if(ho=!1,fo=0,25<=o)throw Error(a(301));o+=1,co=so=null,t.updateQueue=null,io.current=tu,e=n(r,i)}while(ho)}if(io.current=Jo,t=null!==so&&null!==so.next,oo=0,co=so=uo=null,lo=!1,t)throw Error(a(300));return e}function go(){var e=0!==fo;return fo=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===co?uo.memoizedState=co=e:co=co.next=e,co}function wo(){if(null===so){var e=uo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var t=null===co?uo.memoizedState:co.next;if(null!==t)co=t,so=e;else{if(null===e)throw Error(a(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===co?uo.memoizedState=co=e:co=co.next=e}return co}function bo(e,t){return"function"===typeof t?t(e):t}function _o(e){var t=wo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=so,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var h=l.lane;if((oo&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=f,u=r):c=c.next=f,uo.lanes|=h,Ss|=h}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ar(r,t.memoizedState)||(mu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,uo.lanes|=o,Ss|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xo(e){var t=wo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ar(o,t.memoizedState)||(mu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Io(){}function So(e,t){var n=uo,r=wo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,mu=!0),r=r.queue,Mo(Co.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==co&&1&co.memoizedState.tag){if(n.flags|=2048,Po(9,Eo.bind(null,n,r,i,t),void 0,null),null===gs)throw Error(a(349));0!==(30&oo)||To(n,t,i)}return i}function To(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Eo(e,t,n,r){t.value=n,t.getSnapshot=r,No(t)&&Ws(e,1,-1)}function Co(e,t,n){return n((function(){No(t)&&Ws(e,1,-1)}))}function No(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Ao(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Ho.bind(null,uo,e),[t.memoizedState,e]}function Po(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ro(){return wo().memoizedState}function Do(e,t,n,r){var i=ko();uo.flags|=e,i.memoizedState=Po(1|t,n,void 0,void 0===r?null:r)}function Oo(e,t,n,r){var i=wo();r=void 0===r?null:r;var a=void 0;if(null!==so){var o=so.memoizedState;if(a=o.destroy,null!==r&&yo(r,o.deps))return void(i.memoizedState=Po(t,n,a,r))}uo.flags|=e,i.memoizedState=Po(1|t,n,a,r)}function Lo(e,t){return Do(8390656,8,e,t)}function Mo(e,t){return Oo(2048,8,e,t)}function Fo(e,t){return Oo(4,2,e,t)}function Uo(e,t){return Oo(4,4,e,t)}function Vo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function jo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4,4,Vo.bind(null,t,e),n)}function qo(){}function Bo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&yo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function zo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&yo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wo(e,t){var n=gt;gt=0!==n&&4>n?n:4,e(!0);var r=ao.transition;ao.transition={};try{e(!1),t()}finally{gt=n,ao.transition=r}}function Ko(){return wo().memoizedState}function Go(e,t,n){var r=zs(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e)?Yo(t,n):($o(e,t,n),null!==(e=Ws(e,r,n=Bs()))&&Xo(e,t,r))}function Ho(e,t,n){var r=zs(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))Yo(t,i);else{$o(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ar(u,o))return}catch(s){}null!==(e=Ws(e,r,n=Bs()))&&Xo(e,t,r)}}function Qo(e){var t=e.alternate;return e===uo||null!==t&&t===uo}function Yo(e,t){ho=lo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $o(e,t,n){null!==gs&&0!==(1&e.mode)&&0===(2&ms)?(null===(e=t.interleaved)?(n.next=n,null===Xi?Xi=[t]:Xi.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function Xo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mt(e,n)}}var Jo={readContext:$i,useCallback:vo,useContext:vo,useEffect:vo,useImperativeHandle:vo,useInsertionEffect:vo,useLayoutEffect:vo,useMemo:vo,useReducer:vo,useRef:vo,useState:vo,useDebugValue:vo,useDeferredValue:vo,useTransition:vo,useMutableSource:vo,useSyncExternalStore:vo,useId:vo,unstable_isNewReconciler:!1},Zo={readContext:$i,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:$i,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4194308,4,Vo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Do(4194308,4,e,t)},useInsertionEffect:function(e,t){return Do(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Go.bind(null,uo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Ao,useDebugValue:qo,useDeferredValue:function(e){var t=Ao(e),n=t[0],r=t[1];return Lo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){var e=Ao(!1),t=e[0];return e=Wo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=uo,i=ko();if(Na){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===gs)throw Error(a(349));0!==(30&oo)||To(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(Co.bind(null,r,o,e),[e]),r.flags|=2048,Po(9,Eo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=gs.identifierPrefix;if(Na){var n=_a;t=":"+t+"R"+(n=(ba&~(1<<32-ot(ba)-1)).toString(32)+n),0<(n=fo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eu={readContext:$i,useCallback:Bo,useContext:$i,useEffect:Mo,useImperativeHandle:jo,useInsertionEffect:Fo,useLayoutEffect:Uo,useMemo:zo,useReducer:_o,useRef:Ro,useState:function(){return _o(bo)},useDebugValue:qo,useDeferredValue:function(e){var t=_o(bo),n=t[0],r=t[1];return Mo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){return[_o(bo)[0],wo().memoizedState]},useMutableSource:Io,useSyncExternalStore:So,useId:Ko,unstable_isNewReconciler:!1},tu={readContext:$i,useCallback:Bo,useContext:$i,useEffect:Mo,useImperativeHandle:jo,useInsertionEffect:Fo,useLayoutEffect:Uo,useMemo:zo,useReducer:xo,useRef:Ro,useState:function(){return xo(bo)},useDebugValue:qo,useDeferredValue:function(e){var t=xo(bo),n=t[0],r=t[1];return Mo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){return[xo(bo)[0],wo().memoizedState]},useMutableSource:Io,useSyncExternalStore:So,useId:Ko,unstable_isNewReconciler:!1};function nu(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ru(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var iu,au,ou,uu="function"===typeof WeakMap?WeakMap:Map;function su(e,t,n){(n=ta(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Rs||(Rs=!0,Ds=r),ru(0,t)},n}function cu(e,t,n){(n=ta(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ru(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ru(0,t),"function"!==typeof r&&(null===Os?Os=new Set([this]):Os.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function lu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new uu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=pc.bind(null,e,t,n),t.then(e,e))}function hu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function fu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ta(-1,1)).tag=2,na(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function du(e,t){if(!Na)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function pu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function vu(e,t,n){var r=t.pendingProps;switch(Ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pu(t),null;case 1:case 17:return Ni(t.type)&&Ai(),pu(t),null;case 3:return r=t.stateNode,Xa(),_i(Ti),_i(Si),ro(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ma(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Aa&&(Ys(Aa),Aa=null))),pu(t),null;case 5:Za(t);var i=Ya(Qa.current);if(n=t.type,null!==e&&null!=t.stateNode)au(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return pu(t),null}if(e=Ya(Ga.current),Ma(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ci]=t,r[li]=o,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Fr(Dr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":$(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":ie(r,o),Fr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&($r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&($r(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Fr("scroll",r)}switch(n){case"input":G(r),Z(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Xr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[ci]=t,e[li]=r,iu(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Fr(Dr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Fr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Xr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return pu(t),null;case 6:if(e&&null!=t.stateNode)ou(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ya(Qa.current),Ya(Ga.current),Ma(t)){if(r=t.stateNode,n=t.memoizedProps,r[ci]=t,(o=r.nodeValue!==n)&&null!==(e=Ea))switch(s=0!==(1&e.mode),e.tag){case 3:$r(r.nodeValue,n,s);break;case 5:!0!==e.memoizedProps[void 0]&&$r(r.nodeValue,n,s)}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ci]=t,t.stateNode=r}return pu(t),null;case 13:if(_i(eo),r=t.memoizedState,Na&&null!==Ca&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Ca;r;)r=oi(r.nextSibling);return Fa(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Ma(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[ci]=t}else Fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return pu(t),null}return null!==Aa&&(Ys(Aa),Aa=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Ma(t):n=null!==e.memoizedState,r&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&eo.current)?0===xs&&(xs=3):ic())),null!==t.updateQueue&&(t.flags|=4),pu(t),null);case 4:return Xa(),null===e&&jr(t.stateNode.containerInfo),pu(t),null;case 10:return Hi(t.type._context),pu(t),null;case 19:if(_i(eo),null===(o=t.memoizedState))return pu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)du(o,!1);else{if(0!==xs||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=to(e))){for(t.flags|=128,du(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xi(eo,1&eo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Ps&&(t.flags|=128,r=!0,du(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=to(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),du(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!Na)return pu(t),null}else 2*Xe()-o.renderingStartTime>Ps&&1073741824!==n&&(t.flags|=128,r=!0,du(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=eo.current,xi(eo,r?1&n|2:1&n),t):(pu(t),null);case 22:case 23:return ec(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&bs)&&(pu(t),6&t.subtreeFlags&&(t.flags|=8192)):pu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}iu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},au=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ya(Ga.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Xr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Fr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var yu=w.ReactCurrentOwner,mu=!1;function gu(e,t,n,r){t.child=null===e?Wa(t,null,n,r):za(t,e.child,n,r)}function ku(e,t,n,r,i){n=n.render;var a=t.ref;return Yi(t,i),r=mo(e,t,n,r,a,i),n=go(),null===e||mu?(Na&&n&&Sa(t),t.flags|=1,gu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vu(e,t,i))}function wu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||bc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=xc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,bu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:or)(o,r)&&e.ref===t.ref)return Vu(e,t,i)}return t.flags|=1,(e=_c(a,r)).ref=t.ref,e.return=t,t.child=e}function bu(e,t,n,r,i){if(null!==e&&or(e.memoizedProps,r)&&e.ref===t.ref){if(mu=!1,0===(e.lanes&i))return t.lanes=e.lanes,Vu(e,t,i);0!==(131072&e.flags)&&(mu=!0)}return Iu(e,t,n,r,i)}function _u(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},xi(_s,bs),bs|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,xi(_s,bs),bs|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==a?a.baseLanes:n,xi(_s,bs),bs|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xi(_s,bs),bs|=r;return gu(e,t,i,n),t.child}function xu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Iu(e,t,n,r,i){var a=Ni(n)?Ei:Si.current;return a=Ci(t,a),Yi(t,i),n=mo(e,t,n,r,a,i),r=go(),null===e||mu?(Na&&r&&Sa(t),t.flags|=1,gu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vu(e,t,i))}function Su(e,t,n,r,i){if(Ni(n)){var a=!0;Di(t)}else a=!1;if(Yi(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ha(t,n,r),da(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=$i(c):c=Ci(t,c=Ni(n)?Ei:Si.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&fa(t,o,r,c),Ji=!1;var f=t.memoizedState;o.state=f,aa(t,r,o,i),s=t.memoizedState,u!==r||f!==s||Ti.current||Ji?("function"===typeof l&&(sa(t,n,l,r),s=t.memoizedState),(u=Ji||la(t,n,u,r,f,s,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ea(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:qi(t.type,u),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=$i(s):s=Ci(t,s=Ni(n)?Ei:Si.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==h||f!==s)&&fa(t,o,r,s),Ji=!1,f=t.memoizedState,o.state=f,aa(t,r,o,i);var p=t.memoizedState;u!==h||f!==p||Ti.current||Ji?("function"===typeof d&&(sa(t,n,d,r),p=t.memoizedState),(c=Ji||la(t,n,c,r,f,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Tu(e,t,n,r,a,i)}function Tu(e,t,n,r,i,a){xu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Oi(t,n,!1),Vu(e,t,a);r=t.stateNode,yu.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=za(t,e.child,null,a),t.child=za(t,null,u,a)):gu(e,t,u,a),t.memoizedState=r.state,i&&Oi(t,n,!0),t.child}function Eu(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),$a(e,t.containerInfo)}function Cu(e,t,n,r,i){return Fa(),Ua(i),t.flags|=256,gu(e,t,n,r),t.child}var Nu={dehydrated:null,treeContext:null,retryLane:0};function Au(e){return{baseLanes:e,cachePool:null}}function Pu(e,t,n){var r,i=t.pendingProps,o=eo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),xi(eo,1&o),null===e)return Oa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,u?(i=t.mode,u=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=o):u=Sc(o,i,0,null),e=Ic(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Au(n),t.memoizedState=Nu,e):Ru(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(s)return 256&t.flags?(t.flags&=-257,Lu(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(u=i.fallback,o=t.mode,i=Sc({mode:"visible",children:i.children},o,0,null),(u=Ic(u,o,n,null)).flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,0!==(1&t.mode)&&za(t,e.child,null,n),t.child.memoizedState=Au(n),t.memoizedState=Nu,u);if(0===(1&t.mode))t=Lu(e,t,n,null);else if("$!"===r.data)t=Lu(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),mu||i){if(null!==(i=gs)){switch(n&-n){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}0!==(i=0!==(u&(i.suspendedLanes|n))?0:u)&&i!==o.retryLane&&(o.retryLane=i,Ws(e,i,-1))}ic(),t=Lu(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=yc.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Ca=oi(r.nextSibling),Ea=t,Na=!0,Aa=null,null!==n&&(ga[ka++]=ba,ga[ka++]=_a,ga[ka++]=wa,ba=n.id,_a=n.overflow,wa=t),(t=Ru(t,t.pendingProps.children)).flags|=4096);return t}return u?(i=Ou(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Au(n):{baseLanes:o.baseLanes|n,cachePool:null},u.childLanes=e.childLanes&~n,t.memoizedState=Nu,i):(n=Du(e,t,i.children,n),t.memoizedState=null,n)}return u?(i=Ou(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Au(n):{baseLanes:o.baseLanes|n,cachePool:null},u.childLanes=e.childLanes&~n,t.memoizedState=Nu,i):(n=Du(e,t,i.children,n),t.memoizedState=null,n)}function Ru(e,t){return(t=Sc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Du(e,t,n,r){var i=e.child;return e=i.sibling,n=_c(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Ou(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,u={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=u,t.deletions=null):(n=_c(e,u)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=_c(o,r):(r=Ic(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Lu(e,t,n,r){return null!==r&&Ua(r),za(t,e.child,null,n),(e=Ru(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Mu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Qi(e.return,t,n)}function Fu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Uu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(gu(e,t,r.children,n),0!==(2&(r=eo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Mu(e,n,t);else if(19===e.tag)Mu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xi(eo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===to(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Fu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===to(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Fu(t,!0,n,null,a);break;case"together":Fu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ss|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=_c(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=_c(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ju(e,t){switch(Ta(t),t.tag){case 1:return Ni(t.type)&&Ai(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xa(),_i(Ti),_i(Si),ro(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Za(t),null;case 13:if(_i(eo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));Fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _i(eo),null;case 4:return Xa(),null;case 10:return Hi(t.type._context),null;case 22:case 23:return ec(),null;default:return null}}var qu=!1,Bu=!1,zu="function"===typeof WeakSet?WeakSet:Set,Wu=null;function Ku(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){dc(e,t,r)}else n.current=null}function Gu(e,t,n){try{n()}catch(r){dc(e,t,r)}}var Hu=!1;function Qu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Gu(t,n,a)}i=i.next}while(i!==r)}}function Yu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function $u(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function Xu(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&Gu(t,n,a),r=r.next}while(r!==e)}break;case 1:if(Ku(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){dc(t,n,o)}break;case 5:Ku(t,n);break;case 4:is(e,t,n)}}function Ju(e){var t=e.alternate;null!==t&&(e.alternate=null,Ju(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ci],delete t[li],delete t[fi],delete t[di],delete t[pi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zu(e){return 5===e.tag||3===e.tag||4===e.tag}function es(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Zu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ts(e){e:{for(var t=e.return;null!==t;){if(Zu(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(fe(t,""),n.flags&=-33),rs(e,n=es(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,ns(e,n=es(e),t);break;default:throw Error(a(161))}}function ns(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xr));else if(4!==r&&null!==(e=e.child))for(ns(e,t,n),e=e.sibling;null!==e;)ns(e,t,n),e=e.sibling}function rs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(rs(e,t,n),e=e.sibling;null!==e;)rs(e,t,n),e=e.sibling}function is(e,t,n){for(var r,i,o=t,u=!1;;){if(!u){u=o.return;e:for(;;){if(null===u)throw Error(a(160));switch(r=u.stateNode,u.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}u=u.return}u=!0}if(5===o.tag||6===o.tag){e:for(var s=e,c=o,l=n,h=c;;)if(Xu(s,h,l),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===c)break e;for(;null===h.sibling;){if(null===h.return||h.return===c)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(s=r,c=o.stateNode,8===s.nodeType?s.parentNode.removeChild(c):s.removeChild(c)):r.removeChild(o.stateNode)}else if(18===o.tag)i?(s=r,c=o.stateNode,8===s.nodeType?ai(s.parentNode,c):1===s.nodeType&&ai(s,c),qt(s)):ai(r,o.stateNode);else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(Xu(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(u=!1)}o.sibling.return=o.return,o=o.sibling}}function as(e,t){switch(t.tag){case 0:case 11:case 14:case 15:return Qu(3,t,t.return),Yu(3,t),void Qu(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for("input"===e&&"radio"===r.type&&null!=r.name&&X(n,r),ke(e,i),t=ke(e,r),i=0;i<o.length;i+=2){var u=o[i],s=o[i+1];"style"===u?ye(n,s):"dangerouslySetInnerHTML"===u?he(n,s):"children"===u?fe(n,s):k(n,u,s,t)}switch(e){case"input":J(n,r);break;case"textarea":ae(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ne(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ne(n,!!r.multiple,r.defaultValue,!0):ne(n,!!r.multiple,r.multiple?[]:"",!1))}n[li]=r}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void(null!==e&&e.memoizedState.isDehydrated&&qt(t.stateNode.containerInfo));case 13:case 19:return void os(t)}throw Error(a(163))}function os(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new zu),t.forEach((function(t){var r=mc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function us(e,t,n){Wu=e,ss(e,t,n)}function ss(e,t,n){for(var r=0!==(1&e.mode);null!==Wu;){var i=Wu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||qu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Bu;u=qu;var c=Bu;if(qu=o,(Bu=s)&&!c)for(Wu=i;null!==Wu;)s=(o=Wu).child,22===o.tag&&null!==o.memoizedState?hs(i):null!==s?(s.return=o,Wu=s):hs(i);for(;null!==a;)Wu=a,ss(a,t,n),a=a.sibling;Wu=i,qu=u,Bu=c}cs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Wu=a):cs(e)}}function cs(e){for(;null!==Wu;){var t=Wu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Bu||Yu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Bu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:qi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&oa(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}oa(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&qt(f)}}}break;default:throw Error(a(163))}Bu||512&t.flags&&$u(t)}catch(d){dc(t,t.return,d)}}if(t===e){Wu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Wu=n;break}Wu=t.return}}function ls(e){for(;null!==Wu;){var t=Wu;if(t===e){Wu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Wu=n;break}Wu=t.return}}function hs(e){for(;null!==Wu;){var t=Wu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Yu(4,t)}catch(s){dc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){dc(t,i,s)}}var a=t.return;try{$u(t)}catch(s){dc(t,a,s)}break;case 5:var o=t.return;try{$u(t)}catch(s){dc(t,o,s)}}}catch(s){dc(t,t.return,s)}if(t===e){Wu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Wu=u;break}Wu=t.return}}var fs,ds=Math.ceil,ps=w.ReactCurrentDispatcher,vs=w.ReactCurrentOwner,ys=w.ReactCurrentBatchConfig,ms=0,gs=null,ks=null,ws=0,bs=0,_s=bi(0),xs=0,Is=null,Ss=0,Ts=0,Es=0,Cs=null,Ns=null,As=0,Ps=1/0,Rs=!1,Ds=null,Os=null,Ls=!1,Ms=null,Fs=0,Us=0,Vs=null,js=-1,qs=0;function Bs(){return 0!==(6&ms)?Xe():-1!==js?js:js=Xe()}function zs(e){return 0===(1&e.mode)?1:0!==(2&ms)&&0!==ws?ws&-ws:null!==ji.transition?(0===qs&&(e=ct,0===(4194240&(ct<<=1))&&(ct=64),qs=e),qs):0!==(e=gt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function Ws(e,t,n){if(50<Us)throw Us=0,Vs=null,Error(a(185));var r=Ks(e,t);return null===r?null:(yt(r,t,n),0!==(2&ms)&&r===gs||(r===gs&&(0===(2&ms)&&(Ts|=t),4===xs&&$s(r,ws)),Gs(r,n),1===t&&0===ms&&0===(1&e.mode)&&(Ps=Xe()+500,Mi&&Vi())),r)}function Ks(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Gs(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ft(e,e===gs?ws:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Mi=!0,Ui(e)}(Xs.bind(null,e)):Ui(Xs.bind(null,e)),ri((function(){0===ms&&Vi()})),n=null;else{switch(kt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=gc(n,Hs.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Hs(e,t){if(js=-1,qs=0,0!==(6&ms))throw Error(a(327));var n=e.callbackNode;if(hc()&&e.callbackNode!==n)return null;var r=ft(e,e===gs?ws:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ac(e,r);else{t=r;var i=ms;ms|=2;var o=rc();for(gs===e&&ws===t||(Ps=Xe()+500,tc(e,t));;)try{uc();break}catch(s){nc(e,s)}Gi(),ps.current=o,ms=i,null!==ks?t=0:(gs=null,ws=0,t=xs)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=Qs(e,i))),1===t)throw n=Is,tc(e,0),$s(e,r),Gs(e,Xe()),n;if(6===t)$s(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ar(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=ac(e,r))&&(0!==(o=pt(e))&&(r=o,t=Qs(e,o))),1===t))throw n=Is,tc(e,0),$s(e,r),Gs(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:lc(e,Ns);break;case 3:if($s(e,r),(130023424&r)===r&&10<(t=As+500-Xe())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Bs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ei(lc.bind(null,e,Ns),t);break}lc(e,Ns);break;case 4:if($s(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ds(r/1960))-r)){e.timeoutHandle=ei(lc.bind(null,e,Ns),r);break}lc(e,Ns);break;default:throw Error(a(329))}}}return Gs(e,Xe()),e.callbackNode===n?Hs.bind(null,e):null}function Qs(e,t){var n=Cs;return e.current.memoizedState.isDehydrated&&(tc(e,t).flags|=256),2!==(e=ac(e,t))&&(t=Ns,Ns=n,null!==t&&Ys(t)),e}function Ys(e){null===Ns?Ns=e:Ns.push.apply(Ns,e)}function $s(e,t){for(t&=~Es,t&=~Ts,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function Xs(e){if(0!==(6&ms))throw Error(a(327));hc();var t=ft(e,0);if(0===(1&t))return Gs(e,Xe()),null;var n=ac(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=Qs(e,r))}if(1===n)throw n=Is,tc(e,0),$s(e,t),Gs(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lc(e,Ns),Gs(e,Xe()),null}function Js(e,t){var n=ms;ms|=1;try{return e(t)}finally{0===(ms=n)&&(Ps=Xe()+500,Mi&&Vi())}}function Zs(e){null!==Ms&&0===Ms.tag&&0===(6&ms)&&hc();var t=ms;ms|=1;var n=ys.transition,r=gt;try{if(ys.transition=null,gt=1,e)return e()}finally{gt=r,ys.transition=n,0===(6&(ms=t))&&Vi()}}function ec(){bs=_s.current,_i(_s)}function tc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ti(n)),null!==ks)for(n=ks.return;null!==n;){var r=n;switch(Ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ai();break;case 3:Xa(),_i(Ti),_i(Si),ro();break;case 5:Za(r);break;case 4:Xa();break;case 13:case 19:_i(eo);break;case 10:Hi(r.type._context);break;case 22:case 23:ec()}n=n.return}if(gs=e,ks=e=_c(e.current,null),ws=bs=t,xs=0,Is=null,Es=Ts=Ss=0,Ns=Cs=null,null!==Xi){for(t=0;t<Xi.length;t++)if(null!==(r=(n=Xi[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Xi=null}return e}function nc(e,t){for(;;){var n=ks;try{if(Gi(),io.current=Jo,lo){for(var r=uo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}lo=!1}if(oo=0,co=so=uo=null,ho=!1,fo=0,vs.current=null,null===n||null===n.return){xs=1,Is=t,ks=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=ws,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=s,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=hu(u);if(null!==p){p.flags&=-257,fu(p,u,s,0,t),1&p.mode&&lu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){lu(o,l,t),ic();break e}c=Error(a(426))}else if(Na&&1&s.mode){var m=hu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),fu(m,u,s,0,t),Ua(c);break e}}o=c,4!==xs&&(xs=2),null===Cs?Cs=[o]:Cs.push(o),c=nu(c,s),s=u;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,ia(s,su(0,c,t));break e;case 1:o=c;var g=s.type,k=s.stateNode;if(0===(128&s.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Os||!Os.has(k)))){s.flags|=65536,t&=-t,s.lanes|=t,ia(s,cu(s,o,t));break e}}s=s.return}while(null!==s)}cc(n)}catch(w){t=w,ks===n&&null!==n&&(ks=n=n.return);continue}break}}function rc(){var e=ps.current;return ps.current=Jo,null===e?Jo:e}function ic(){0!==xs&&3!==xs&&2!==xs||(xs=4),null===gs||0===(268435455&Ss)&&0===(268435455&Ts)||$s(gs,ws)}function ac(e,t){var n=ms;ms|=2;var r=rc();for(gs===e&&ws===t||tc(e,t);;)try{oc();break}catch(i){nc(e,i)}if(Gi(),ms=n,ps.current=r,null!==ks)throw Error(a(261));return gs=null,ws=0,xs}function oc(){for(;null!==ks;)sc(ks)}function uc(){for(;null!==ks&&!Ye();)sc(ks)}function sc(e){var t=fs(e.alternate,e,bs);e.memoizedProps=e.pendingProps,null===t?cc(e):ks=t,vs.current=null}function cc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=vu(n,t,bs)))return void(ks=n)}else{if(null!==(n=ju(n,t)))return n.flags&=32767,void(ks=n);if(null===e)return xs=6,void(ks=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(ks=t);ks=t=e}while(null!==t);0===xs&&(xs=5)}function lc(e,t){var n=gt,r=ys.transition;try{ys.transition=null,gt=1,function(e,t,n){do{hc()}while(null!==Ms);if(0!==(6&ms))throw Error(a(327));var r=e.finishedWork,i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===gs&&(ks=gs=null,ws=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Ls||(Ls=!0,gc(tt,(function(){return hc(),null}))),o=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||o){o=ys.transition,ys.transition=null;var u=gt;gt=1;var s=ms;ms|=4,vs.current=null,function(e,t){if(hr(e=lr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var u=0,s=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(s=u+i),f!==o||0!==r&&3!==f.nodeType||(c=u+r),3===f.nodeType&&(u+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++h===r&&(c=u),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jr={focusedElem:e,selectionRange:n},Wu=t;null!==Wu;)if(e=(t=Wu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Wu=e;else for(;null!==Wu;){t=Wu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:qi(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var w=t.stateNode.containerInfo;if(1===w.nodeType)w.textContent="";else if(9===w.nodeType){var b=w.body;null!=b&&(b.textContent="")}break;default:throw Error(a(163))}}catch(_){dc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Wu=e;break}Wu=t.return}v=Hu,Hu=!1}(e,r),function(e,t){for(Wu=t;null!==Wu;){var n=(t=Wu).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{is(e,i,t);var a=i.alternate;null!==a&&(a.return=null),i.return=null}catch(I){dc(i,t,I)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,Wu=n;else for(;null!==Wu;){t=Wu;try{var o=t.flags;if(32&o&&fe(t.stateNode,""),512&o){var u=t.alternate;if(null!==u){var s=u.ref;null!==s&&("function"===typeof s?s(null):s.current=null)}}if(8192&o)switch(t.tag){case 13:if(null!==t.memoizedState){var c=t.alternate;null!==c&&null!==c.memoizedState||(As=Xe())}break;case 22:var l=null!==t.memoizedState,h=t.alternate,f=null!==h&&null!==h.memoizedState;e:{i=l;for(var d=null,p=r=n=t;;){if(5===p.tag){if(null===d){d=p;var v=p.stateNode;if(i){var y=v.style;"function"===typeof y.setProperty?y.setProperty("display","none","important"):y.display="none"}else{var m=p.stateNode,g=p.memoizedProps.style,k=void 0!==g&&null!==g&&g.hasOwnProperty("display")?g.display:null;m.style.display=ve("display",k)}}}else if(6===p.tag)null===d&&(p.stateNode.nodeValue=i?"":p.memoizedProps);else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===r)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===r)break;for(;null===p.sibling;){if(null===p.return||p.return===r)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}if(l&&!f&&0!==(1&n.mode)){Wu=n;for(var w=n.child;null!==w;){for(n=Wu=w;null!==Wu;){var b=(r=Wu).child;switch(r.tag){case 0:case 11:case 14:case 15:Qu(4,r,r.return);break;case 1:Ku(r,r.return);var _=r.stateNode;if("function"===typeof _.componentWillUnmount){var x=r.return;try{_.props=r.memoizedProps,_.state=r.memoizedState,_.componentWillUnmount()}catch(I){dc(r,x,I)}}break;case 5:Ku(r,r.return);break;case 22:if(null!==r.memoizedState){ls(n);continue}}null!==b?(b.return=r,Wu=b):ls(n)}w=w.sibling}}}switch(4102&o){case 2:ts(t),t.flags&=-3;break;case 6:ts(t),t.flags&=-3,as(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,as(t.alternate,t);break;case 4:as(t.alternate,t)}}catch(I){dc(t,t.return,I)}if(null!==(n=t.sibling)){n.return=t.return,Wu=n;break}Wu=t.return}}}(e,r),fr(Jr),Jr=null,e.current=r,us(r,e,i),$e(),ms=s,gt=u,ys.transition=o}else e.current=r;if(Ls&&(Ls=!1,Ms=e,Fs=i),0===(o=e.pendingLanes)&&(Os=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),Gs(e,Xe()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(Rs)throw Rs=!1,e=Ds,Ds=null,e;0!==(1&Fs)&&0!==e.tag&&hc(),0!==(1&(o=e.pendingLanes))?e===Vs?Us++:(Us=0,Vs=e):Us=0,Vi()}(e,t,n)}finally{ys.transition=r,gt=n}return null}function hc(){if(null!==Ms){var e=kt(Fs),t=ys.transition,n=gt;try{if(ys.transition=null,gt=16>e?16:e,null===Ms)var r=!1;else{if(e=Ms,Ms=null,Fs=0,0!==(6&ms))throw Error(a(331));var i=ms;for(ms|=4,Wu=e.current;null!==Wu;){var o=Wu,u=o.child;if(0!==(16&Wu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Wu=l;null!==Wu;){var h=Wu;switch(h.tag){case 0:case 11:case 15:Qu(8,h,o)}var f=h.child;if(null!==f)f.return=h,Wu=f;else for(;null!==Wu;){var d=(h=Wu).sibling,p=h.return;if(Ju(h),h===l){Wu=null;break}if(null!==d){d.return=p,Wu=d;break}Wu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Wu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Wu=u;else e:for(;null!==Wu;){if(0!==(2048&(o=Wu).flags))switch(o.tag){case 0:case 11:case 15:Qu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Wu=g;break e}Wu=o.return}}var k=e.current;for(Wu=k;null!==Wu;){var w=(u=Wu).child;if(0!==(2064&u.subtreeFlags)&&null!==w)w.return=u,Wu=w;else e:for(u=k;null!==Wu;){if(0!==(2048&(s=Wu).flags))try{switch(s.tag){case 0:case 11:case 15:Yu(9,s)}}catch(_){dc(s,s.return,_)}if(s===u){Wu=null;break e}var b=s.sibling;if(null!==b){b.return=s.return,Wu=b;break e}Wu=s.return}}if(ms=i,Vi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{gt=n,ys.transition=t}}return!1}function fc(e,t,n){na(e,t=su(0,t=nu(n,t),1)),t=Bs(),null!==(e=Ks(e,1))&&(yt(e,1,t),Gs(e,t))}function dc(e,t,n){if(3===e.tag)fc(e,e,n);else for(;null!==t;){if(3===t.tag){fc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Os||!Os.has(r))){na(t,e=cu(t,e=nu(n,e),1)),e=Bs(),null!==(t=Ks(t,1))&&(yt(t,1,e),Gs(t,e));break}}t=t.return}}function pc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Bs(),e.pingedLanes|=e.suspendedLanes&n,gs===e&&(ws&n)===n&&(4===xs||3===xs&&(130023424&ws)===ws&&500>Xe()-As?tc(e,0):Es|=n),Gs(e,t)}function vc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=Bs();null!==(e=Ks(e,t))&&(yt(e,t,n),Gs(e,n))}function yc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),vc(e,n)}function mc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),vc(e,n)}function gc(e,t){return He(e,t)}function kc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wc(e,t,n,r){return new kc(e,t,n,r)}function bc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function _c(e,t){var n=e.alternate;return null===n?((n=wc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function xc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)bc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Ic(n.children,i,o,t);case I:u=8,i|=8;break;case S:return(e=wc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=wc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=wc(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Sc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case E:u=9;break e;case C:u=11;break e;case P:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=wc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ic(e,t,n,r){return(e=wc(7,e,r,t)).lanes=n,e}function Sc(e,t,n,r){return(e=wc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={},e}function Tc(e,t,n){return(e=wc(6,e,null,t)).lanes=n,e}function Ec(e,t,n){return(t=wc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Cc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Nc(e,t,n,r,i,a,o,u,s){return e=new Cc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=wc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},Zi(a),e}function Ac(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Pc(e){if(!e)return Ii;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ni(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ni(n))return Ri(e,n,t)}return t}function Rc(e,t,n,r,i,a,o,u,s){return(e=Nc(n,r,!0,e,0,a,0,u,s)).context=Pc(null),n=e.current,(a=ta(r=Bs(),i=zs(n))).callback=void 0!==t&&null!==t?t:null,na(n,a),e.current.lanes=i,yt(e,i,r),Gs(e,r),e}function Dc(e,t,n,r){var i=t.current,a=Bs(),o=zs(i);return n=Pc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ta(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),na(i,t),null!==(e=Ws(i,o,a))&&ra(e,i,o),o}function Oc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Lc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Mc(e,t){Lc(e,t),(e=e.alternate)&&Lc(e,t)}fs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ti.current)mu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return mu=!1,function(e,t,n){switch(t.tag){case 3:Eu(t),Fa();break;case 5:Ja(t);break;case 1:Ni(t.type)&&Di(t);break;case 4:$a(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;xi(Bi,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(xi(eo,1&eo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Pu(e,t,n):(xi(eo,1&eo.current),null!==(e=Vu(e,t,n))?e.sibling:null);xi(eo,1&eo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Uu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),xi(eo,eo.current),r)break;return null;case 22:case 23:return t.lanes=0,_u(e,t,n)}return Vu(e,t,n)}(e,t,n);mu=0!==(131072&e.flags)}else mu=!1,Na&&0!==(1048576&t.flags)&&Ia(t,ma,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Ci(t,Si.current);Yi(t,n),i=mo(null,t,r,e,i,n);var o=go();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ni(r)?(o=!0,Di(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Zi(t),i.updater=ca,t.stateNode=i,i._reactInternals=t,da(t,r,e,n),t=Tu(null,t,r,!0,o,n)):(t.tag=0,Na&&o&&Sa(t),gu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return bc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=qi(r,e),i){case 0:t=Iu(null,t,r,e,n);break e;case 1:t=Su(null,t,r,e,n);break e;case 11:t=ku(null,t,r,e,n);break e;case 14:t=wu(null,t,r,qi(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Iu(e,t,r,i=t.elementType===r?i:qi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Su(e,t,r,i=t.elementType===r?i:qi(r,i),n);case 3:e:{if(Eu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ea(e,t),aa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Cu(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Cu(e,t,r,n,i=Error(a(424)));break e}for(Ca=oi(t.stateNode.containerInfo.firstChild),Ea=t,Na=!0,Aa=null,n=Wa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Fa(),r===i){t=Vu(e,t,n);break e}gu(e,t,r,n)}t=t.child}return t;case 5:return Ja(t),null===e&&Oa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,Zr(r,i)?u=null:null!==o&&Zr(r,o)&&(t.flags|=32),xu(e,t),gu(e,t,u,n),t.child;case 6:return null===e&&Oa(t),null;case 13:return Pu(e,t,n);case 4:return $a(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=za(t,null,r,n):gu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ku(e,t,r,i=t.elementType===r?i:qi(r,i),n);case 7:return gu(e,t,t.pendingProps,n),t.child;case 8:case 12:return gu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,xi(Bi,r._currentValue),r._currentValue=u,null!==o)if(ar(o.value,u)){if(o.children===i.children&&!Ti.current){t=Vu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ta(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Qi(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Qi(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}gu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Yi(t,n),r=r(i=$i(i)),t.flags|=1,gu(e,t,r,n),t.child;case 14:return i=qi(r=t.type,t.pendingProps),wu(e,t,r,i=qi(r.type,i),n);case 15:return bu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:qi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ni(r)?(e=!0,Di(t)):e=!1,Yi(t,n),ha(t,r,i),da(t,r,i,n),Tu(null,t,r,!0,e,n);case 19:return Uu(e,t,n);case 22:return _u(e,t,n)}throw Error(a(156,t.tag))};var Fc="function"===typeof reportError?reportError:function(e){console.error(e)};function Uc(e){this._internalRoot=e}function Vc(e){this._internalRoot=e}function jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Bc(){}function zc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Oc(o);u.call(e)}}Dc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Oc(o);a.call(e)}}var o=Rc(t,r,e,0,null,!1,0,"",Bc);return e._reactRootContainer=o,e[hi]=o.current,jr(8===e.nodeType?e.parentNode:e),Zs(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Oc(s);u.call(e)}}var s=Nc(e,0,!1,null,0,!1,0,"",Bc);return e._reactRootContainer=s,e[hi]=s.current,jr(8===e.nodeType?e.parentNode:e),Zs((function(){Dc(t,s,n,r)})),s}(n,t,e,i,r);return Oc(o)}Vc.prototype.render=Uc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Dc(e,t,null,null)},Vc.prototype.unmount=Uc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zs((function(){Dc(null,e,null,null)})),t[hi]=null}},Vc.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(mt(t,1|n),Gs(t,Xe()),0===(6&ms)&&(Ps=Xe()+500,Vi()))}break;case 13:var r=Bs();Zs((function(){return Ws(e,1,r)})),Mc(e,1)}},bt=function(e){13===e.tag&&(Ws(e,134217728,Bs()),Mc(e,134217728))},_t=function(e){if(13===e.tag){var t=Bs(),n=zs(e);Ws(e,n,t),Mc(e,n)}},xt=function(){return gt},It=function(e,t){var n=gt;try{return gt=e,t()}finally{gt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=gi(r);if(!i)throw Error(a(90));H(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=Js,Ne=Zs;var Wc={usingClientEntryPoint:!1,Events:[yi,mi,gi,Te,Ee,Js]},Kc={findFiberByHostInstance:vi,bundleType:0,version:"18.0.0-fc46dba67-20220329",rendererPackageName:"react-dom"},Gc={bundleType:Kc.bundleType,version:Kc.version,rendererPackageName:Kc.rendererPackageName,rendererConfig:Kc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:Kc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{it=Hc.inject(Gc),at=Hc}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!jc(t))throw Error(a(200));return Ac(e,t,null,n)},t.createRoot=function(e,t){if(!jc(e))throw Error(a(299));var n=!1,r="",i=Fc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Nc(e,1,!1,null,0,n,0,r,i),e[hi]=t.current,jr(8===e.nodeType?e.parentNode:e),new Uc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return Zs(e)},t.hydrate=function(e,t,n){if(!qc(t))throw Error(a(200));return zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Fc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Rc(t,null,e,1,null!=n?n:null,i,0,o,u),e[hi]=t.current,jr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Vc(t)},t.render=function(e,t,n){if(!qc(t))throw Error(a(200));return zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!qc(e))throw Error(a(40));return!!e._reactRootContainer&&(Zs((function(){zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[hi]=null}))})),!0)},t.unstable_batchedUpdates=Js,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!qc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return zc(e,t,n,!1,r)},t.version="18.0.0-fc46dba67-20220329"},250:function(e,t,n){"use strict";var r=n(164);t.s=r.createRoot,r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var w=k.prototype=new g;w.constructor=k,v(w,m.prototype),w.isPureReactComponent=!0;var b=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,b(o)?(i="",null!=e&&(i=e.replace(E,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",b(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.0.0-fc46dba67-20220329"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(P){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=h;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=S(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:f,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};s(k,a,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(N([])));b&&b!==n&&r.call(b,a)&&(k=b);var _=g.prototype=y.prototype=Object.create(k);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"===typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return m.prototype=g,s(_,"constructor",g),s(g,"constructor",m),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},x(I.prototype),s(I.prototype,o,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new I(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(_),s(_,u,"Generator"),s(_,a,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function b(e){if(y=!1,w(e),!v)if(null!==r(c))v=!0,D(_);else{var t=r(l);null!==t&&O(b,t.startTime-e)}}function _(e,n){v=!1,y&&(y=!1,g(T),T=-1),p=!0;var a=d;try{for(w(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!N());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var u=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?f.callback=u:f===r(c)&&i(c),w(n)}else i(c);f=r(c)}if(null!==f)var s=!0;else{var h=r(l);null!==h&&O(b,h.startTime-n),s=!1}return s}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,S=null,T=-1,E=5,C=-1;function N(){return!(t.unstable_now()-C<E)}function A(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?x():(I=!1,S=null)}}else I=!1}if("function"===typeof k)x=function(){k(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=A,x=function(){R.postMessage(null)}}else x=function(){m(A,0)};function D(e){S=e,I||(I=!0,x())}function O(e,n){T=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(T),T=-1):y=!0,O(b,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,D(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return $},SDK_VERSION:function(){return ft},_DEFAULT_ENTRY_NAME:function(){return Ze},_addComponent:function(){return rt},_addOrOverwriteComponent:function(){return it},_apps:function(){return tt},_clearComponents:function(){return st},_components:function(){return nt},_getProvider:function(){return ot},_registerComponent:function(){return at},_removeServiceInstance:function(){return ut},deleteApp:function(){return yt},getApp:function(){return pt},getApps:function(){return vt},initializeApp:function(){return dt},onLog:function(){return kt},registerVersion:function(){return gt},setLogLevel:function(){return wt}});var t=n(791),r=n.t(t,2),i=(n(164),n(250));function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||u(e,t)||s()}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function k(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function b(e,t){if(t&&("object"===w(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function _(e){var t=k();return function(){var n,r=g(e);if(t){var i=g(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return b(this,n)}}function x(e,t,n){return x=k()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&y(i,n.prototype),i},x.apply(null,arguments)}function I(e){var t="function"===typeof Map?new Map:void 0;return I=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return x(e,arguments,g(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),y(n,e)},I(e)}var S=n(757),T=n.n(S),E=!1,C=!1,N="${JSCORE_VERSION}",A=function(e,t){if(!e)throw P(t)},P=function(e){return new Error("Firebase Database ("+N+") INTERNAL ASSERT FAILED: "+e)},R=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},D={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,h=(3&a)<<4|u>>4,f=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(R(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var h=u<<6&192|s;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},O=function(e){var t=R(e);return D.encodeByteArray(t,!0)},L=function(e){return O(e).replace(/\./g,"")},M=function(e){try{return D.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function F(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=F(e[n],t[n]));return e}var U=function(){function e(){var t=this;h(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return d(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function V(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[L(JSON.stringify({alg:"none",type:"JWT"})),L(JSON.stringify(a)),""].join(".")}function j(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function q(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(j())}function B(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function z(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function W(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function K(){var e=j();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function G(){return!0===E||!0===C}function H(){return"object"===typeof indexedDB}function Q(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(_C){t(_C)}}))}function Y(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}var $=function(e){m(n,e);var t=_(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(v(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(v(a),X.prototype.create),a}return d(n)}(I(Error)),X=function(){function e(t,n,r){h(this,e),this.service=t,this.serviceName=n,this.errors=r}return d(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?J(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new $(n,a,t);return o}}]),e}();function J(e,t){return e.replace(Z,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Z=/\{\$([^}]+)}/g;function ee(e){return JSON.parse(e)}function te(e){return JSON.stringify(e)}var ne=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=ee(M(a[0])||""),n=ee(M(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function re(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ie(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function ae(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function oe(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function ue(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(se(u)&&se(s)){if(!ue(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function se(e){return null!==e&&"object"===typeof e}function ce(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function le(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=c(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function he(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var fe=function(){function e(){h(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return d(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=f^l&(h^f),s=1518500249):(u=l^h^f,s=1859775393):p<60?(u=l&h|f&(l|h),s=2400959708):(u=l^h^f,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function de(e,t){var n=new pe(e,t);return n.subscribe.bind(n)}var pe=function(){function e(t,n){var r=this;h(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return d(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=p(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ve),void 0===r.error&&(r.error=ve),void 0===r.complete&&(r.complete=ve);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ve(){}var ye=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function me(e,t){return"".concat(e," failed: ").concat(t," argument ")}function ge(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(me(e,t)+"must be a valid function.")}function ke(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(me(e,t)+"must be a valid context object.")}var we=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},be=144e5;function _e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(be,r+i)}function xe(e){return e&&e._delegate?e._delegate:e}function Ie(e,t){return new Promise((function(n,r){e.onsuccess=function(e){n(e.target.result)},e.onerror=function(e){var n;r("".concat(t,": ").concat(null===(n=e.target.error)||void 0===n?void 0:n.message))}}))}var Se=function(){function e(t){h(this,e),this._db=t,this.objectStoreNames=this._db.objectStoreNames}return d(e,[{key:"transaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readonly";return new Te(this._db.transaction.call(this._db,e,t))}},{key:"createObjectStore",value:function(e,t){return new Ee(this._db.createObjectStore(e,t))}},{key:"close",value:function(){this._db.close()}}]),e}(),Te=function(){function e(t){var n=this;h(this,e),this._transaction=t,this.complete=new Promise((function(e,t){n._transaction.oncomplete=function(){e()},n._transaction.onerror=function(){t(n._transaction.error)},n._transaction.onabort=function(){t(n._transaction.error)}}))}return d(e,[{key:"objectStore",value:function(e){return new Ee(this._transaction.objectStore(e))}}]),e}(),Ee=function(){function e(t){h(this,e),this._store=t}return d(e,[{key:"index",value:function(e){return new Ce(this._store.index(e))}},{key:"createIndex",value:function(e,t,n){return new Ce(this._store.createIndex(e,t,n))}},{key:"get",value:function(e){return Ie(this._store.get(e),"Error reading from IndexedDB")}},{key:"put",value:function(e,t){return Ie(this._store.put(e,t),"Error writing to IndexedDB")}},{key:"delete",value:function(e){return Ie(this._store.delete(e),"Error deleting from IndexedDB")}},{key:"clear",value:function(){return Ie(this._store.clear(),"Error clearing IndexedDB object store")}}]),e}(),Ce=function(){function e(t){h(this,e),this._index=t}return d(e,[{key:"get",value:function(e){return Ie(this._index.get(e),"Error reading from IndexedDB")}}]),e}();function Ne(e,t,n){return new Promise((function(r,i){try{var a=indexedDB.open(e,t);a.onsuccess=function(e){r(new Se(e.target.result))},a.onerror=function(e){var t;i("Error opening indexedDB: ".concat(null===(t=e.target.error)||void 0===t?void 0:t.message))},a.onupgradeneeded=function(e){n(new Se(a.result),e.oldVersion,e.newVersion,new Te(a.transaction))}}catch(o){i("Error opening indexedDB: ".concat(o.message))}}))}function Ae(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Pe(e){return function(e){if(Array.isArray(e))return o(e)}(e)||Ae(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(_C){return void n(_C)}u.done?t(s):Promise.resolve(s).then(r,i)}function De(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Re(a,r,i,o,u,"next",e)}function u(e){Re(a,r,i,o,u,"throw",e)}o(void 0)}))}}var Oe=function(){function e(t,n,r){h(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return d(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Le="[DEFAULT]",Me=function(){function e(t,n){h(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return d(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new U;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Le})}catch(s){}var t,n=p(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=De(S.mark((function e(){var t;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Pe(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Pe(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=p(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=c(i.value,2),s=u[0],l=u[1],h=this.normalizeInstanceIdentifier(s);r===h&&l.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(cv){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t=e.instanceIdentifier,n=e.options,r=void 0===n?{}:n,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Fe(t),options:r}),this.instances.set(t,i),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(cv){}return i||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le;return this.component?this.component.multipleInstances?e:Le:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();function Fe(e){return e===Le?void 0:e}var Ue,Ve,je=function(){function e(t){h(this,e),this.name=t,this.providers=new Map}return d(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Me(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),qe=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ve||(Ve={}));var Be,ze,We={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},Ke=Ve.INFO,Ge=(l(Ue={},Ve.DEBUG,"log"),l(Ue,Ve.VERBOSE,"log"),l(Ue,Ve.INFO,"info"),l(Ue,Ve.WARN,"warn"),l(Ue,Ve.ERROR,"error"),Ue),He=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Ge[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Qe=function(){function e(t){h(this,e),this.name=t,this._logLevel=Ke,this._logHandler=He,this._userLogHandler=null,qe.push(this)}return d(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Ve))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?We[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ve.DEBUG].concat(t)),this._logHandler.apply(this,[this,Ve.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ve.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Ve.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ve.INFO].concat(t)),this._logHandler.apply(this,[this,Ve.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ve.WARN].concat(t)),this._logHandler.apply(this,[this,Ve.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ve.ERROR].concat(t)),this._logHandler.apply(this,[this,Ve.ERROR].concat(t))}}]),e}();var Ye=function(){function e(t){h(this,e),this.container=t}return d(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var $e="@firebase/app",Xe="0.7.21",Je=new Qe("@firebase/app"),Ze="[DEFAULT]",et=(l(Be={},$e,"fire-core"),l(Be,"@firebase/app-compat","fire-core-compat"),l(Be,"@firebase/analytics","fire-analytics"),l(Be,"@firebase/analytics-compat","fire-analytics-compat"),l(Be,"@firebase/app-check","fire-app-check"),l(Be,"@firebase/app-check-compat","fire-app-check-compat"),l(Be,"@firebase/auth","fire-auth"),l(Be,"@firebase/auth-compat","fire-auth-compat"),l(Be,"@firebase/database","fire-rtdb"),l(Be,"@firebase/database-compat","fire-rtdb-compat"),l(Be,"@firebase/functions","fire-fn"),l(Be,"@firebase/functions-compat","fire-fn-compat"),l(Be,"@firebase/installations","fire-iid"),l(Be,"@firebase/installations-compat","fire-iid-compat"),l(Be,"@firebase/messaging","fire-fcm"),l(Be,"@firebase/messaging-compat","fire-fcm-compat"),l(Be,"@firebase/performance","fire-perf"),l(Be,"@firebase/performance-compat","fire-perf-compat"),l(Be,"@firebase/remote-config","fire-rc"),l(Be,"@firebase/remote-config-compat","fire-rc-compat"),l(Be,"@firebase/storage","fire-gcs"),l(Be,"@firebase/storage-compat","fire-gcs-compat"),l(Be,"@firebase/firestore","fire-fst"),l(Be,"@firebase/firestore-compat","fire-fst-compat"),l(Be,"fire-js","fire-js"),l(Be,"firebase","fire-js-all"),Be),tt=new Map,nt=new Map;function rt(e,t){try{e.container.addComponent(t)}catch(n){Je.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function it(e,t){e.container.addOrOverwriteComponent(t)}function at(e){var t=e.name;if(nt.has(t))return Je.debug("There were multiple attempts to register component ".concat(t,".")),!1;nt.set(t,e);var n,r=p(tt.values());try{for(r.s();!(n=r.n()).done;){rt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function ot(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ut(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ze;ot(e,t).clearInstance(n)}function st(){nt.clear()}var ct=(l(ze={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),l(ze,"bad-app-name","Illegal App name: '{$appName}"),l(ze,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),l(ze,"app-deleted","Firebase App named '{$appName}' already deleted"),l(ze,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),l(ze,"invalid-log-argument","First argument to `onLog` must be null or a function."),l(ze,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),l(ze,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),l(ze,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),l(ze,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),ze),lt=new X("app","Firebase",ct),ht=function(){function e(t,n,r){var i=this;h(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Oe("app",(function(){return i}),"PUBLIC"))}return d(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw lt.create("app-deleted",{appName:this._name})}}]),e}(),ft="9.6.11";function dt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Ze,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw lt.create("bad-app-name",{appName:String(i)});var a=tt.get(i);if(a){if(ue(e,a.options)&&ue(r,a.config))return a;throw lt.create("duplicate-app",{appName:i})}var o,u=new je(i),s=p(nt.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(h){s.e(h)}finally{s.f()}var l=new ht(e,r,u);return tt.set(i,l),l}function pt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=tt.get(e);if(!t)throw lt.create("no-app",{appName:e});return t}function vt(){return Array.from(tt.values())}function yt(e){return mt.apply(this,arguments)}function mt(){return(mt=De(S.mark((function e(t){var n;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!tt.has(n)){e.next=6;break}return tt.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gt(e,t,n){var r,i=null!==(r=et[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Je.warn(u.join(" "))}at(new Oe("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function kt(e,t){if(null!==e&&"function"!==typeof e)throw lt.create("invalid-log-argument");!function(e,t){var n,r=p(qe);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=We[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Ve[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function wt(e){var t;t=e,qe.forEach((function(e){e.setLogLevel(t)}))}var bt="firebase-heartbeat-store",_t=null;function xt(){return _t||(_t=Ne("firebase-heartbeat-database",1,(function(e,t){if(0===t)e.createObjectStore(bt)})).catch((function(e){throw lt.create("storage-open",{originalErrorMessage:e.message})}))),_t}function It(e){return St.apply(this,arguments)}function St(){return St=De(S.mark((function e(t){var n;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xt();case 3:return n=e.sent,e.abrupt("return",n.transaction(bt).objectStore(bt).get(Ct(t)));case 7:throw e.prev=7,e.t0=e.catch(0),lt.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),St.apply(this,arguments)}function Tt(e,t){return Et.apply(this,arguments)}function Et(){return Et=De(S.mark((function e(t,n){var r,i,a;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,xt();case 3:return r=e.sent,i=r.transaction(bt,"readwrite"),a=i.objectStore(bt),e.next=8,a.put(n,Ct(t));case 8:return e.abrupt("return",i.complete);case 11:throw e.prev=11,e.t0=e.catch(0),lt.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Et.apply(this,arguments)}function Ct(e){return"".concat(e.name,"!").concat(e.options.appId)}var Nt=function(){function e(t){var n=this;h(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Ot(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return d(e,[{key:"triggerHeartbeat",value:function(){var e=De(S.mark((function e(){var t,n,r;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=At(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=De(S.mark((function e(){var t,n,r,i,a;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=At(),n=Pt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=L(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function At(){return(new Date).toISOString().substring(0,10)}function Pt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=p(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Lt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Lt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Rt,Dt,Ot=function(){function e(t){h(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return d(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=De(S.mark((function e(){return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",Q().then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=De(S.mark((function e(){var t;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,It(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=De(S.mark((function e(t){var n,r;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Tt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=De(S.mark((function e(t){var n,r;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Tt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Pe(r.heartbeats),Pe(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Lt(e){return L(JSON.stringify({version:2,heartbeats:e})).length}Rt="",at(new Oe("platform-logger",(function(e){return new Ye(e)}),"PRIVATE")),at(new Oe("heartbeat",(function(e){return new Nt(e)}),"PRIVATE")),gt($e,Xe,Rt),gt($e,Xe,"esm2017"),gt("fire-js","");var Mt=function(){function e(t,n){var r=this;h(this,e),this._delegate=t,this.firebase=n,rt(t,new Oe("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return d(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),yt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ze;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ze;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){rt(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){it(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Ft=(l(Dt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),l(Dt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Dt),Ut=new X("app-compat","Firebase",Ft);var Vt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=dt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(re(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:gt,setLogLevel:wt,onLog:kt,apps:null,SDK_VERSION:ft,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(at(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Ut.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&F(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!re(n,e=e||Ze))throw Ut.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Mt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){F(n,e)},createSubscribe:de,ErrorFactory:X,deepExtend:F}),n}(),jt=new Qe("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){jt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var qt=self.firebase.SDK_VERSION;qt&&qt.indexOf("LITE")>=0&&jt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Bt=Vt;!function(e){gt("@firebase/app-compat","0.1.22",e)}();Bt.registerVersion("firebase","9.6.11","app-compat");Bt.initializeApp({apiKey:"AIzaSyBtnGwZgjmSat4ETdI2GdzxFmK2GEppN-I",authDomain:"chatroom-bfbfd.firebaseapp.com",databaseURL:"https://chatroom-bfbfd-default-rtdb.firebaseio.com",projectId:"chatroom-bfbfd",storageBucket:"chatroom-bfbfd.appspot.com",messagingSenderId:"950188122661",appId:"1:950188122661:web:d9dbc22d73a1c7569915cc",measurementId:"G-H5B84VYH2G"});var zt=Bt;function Wt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function Kt(){return Kt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Wt(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Kt.apply(this,arguments)}var Gt,Ht="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Qt={},Yt=Yt||{},$t=Ht||self;function Xt(){}function Jt(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Zt(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var en="closure_uid_"+(1e9*Math.random()>>>0),tn=0;function nn(e,t,n){return e.call.apply(e.bind,arguments)}function rn(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function an(e,t,n){return(an=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?nn:rn).apply(null,arguments)}function on(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function un(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function sn(){this.s=this.s,this.o=this.o}var cn={};sn.prototype.s=!1,sn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,en)&&e[en]||(e[en]=++tn)}(this);delete cn[e]}},sn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ln=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},hn=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function fn(e){return Array.prototype.concat.apply([],arguments)}function dn(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function pn(e){return/^[\s\xa0]*$/.test(e)}var vn,yn=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function mn(e,t){return-1!=e.indexOf(t)}function gn(e,t){return e<t?-1:e>t?1:0}e:{var kn=$t.navigator;if(kn){var wn=kn.userAgent;if(wn){vn=wn;break e}}vn=""}function bn(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function _n(e){var t={};for(var n in e)t[n]=e[n];return t}var xn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function In(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<xn.length;a++)n=xn[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Sn(e){return Sn[" "](e),e}Sn[" "]=Xt;var Tn,En=mn(vn,"Opera"),Cn=mn(vn,"Trident")||mn(vn,"MSIE"),Nn=mn(vn,"Edge"),An=Nn||Cn,Pn=mn(vn,"Gecko")&&!(mn(vn.toLowerCase(),"webkit")&&!mn(vn,"Edge"))&&!(mn(vn,"Trident")||mn(vn,"MSIE"))&&!mn(vn,"Edge"),Rn=mn(vn.toLowerCase(),"webkit")&&!mn(vn,"Edge");function Dn(){var e=$t.document;return e?e.documentMode:void 0}e:{var On="",Ln=function(){var e=vn;return Pn?/rv:([^\);]+)(\)|;)/.exec(e):Nn?/Edge\/([\d\.]+)/.exec(e):Cn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Rn?/WebKit\/(\S+)/.exec(e):En?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Ln&&(On=Ln?Ln[1]:""),Cn){var Mn=Dn();if(null!=Mn&&Mn>parseFloat(On)){Tn=String(Mn);break e}}Tn=On}var Fn,Un={};function Vn(){return function(e){var t=Un;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=yn(String(Tn)).split("."),n=yn("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=gn(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||gn(0==a[2].length,0==o[2].length)||gn(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if($t.document&&Cn){var jn=Dn();Fn=jn||(parseInt(Tn,10)||void 0)}else Fn=void 0;var qn=Fn,Bn=function(){if(!$t.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{$t.addEventListener("test",Xt,t),$t.removeEventListener("test",Xt,t)}catch(n){}return e}();function zn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Wn(e,t){if(zn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Pn){e:{try{Sn(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Kn[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Wn.Z.h.call(this)}}zn.prototype.h=function(){this.defaultPrevented=!0},un(Wn,zn);var Kn={2:"touch",3:"pen",4:"mouse"};Wn.prototype.h=function(){Wn.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Gn="closure_listenable_"+(1e6*Math.random()|0),Hn=0;function Qn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Hn,this.ca=this.fa=!1}function Yn(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function $n(e){this.src=e,this.g={},this.h=0}function Xn(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=ln(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Yn(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Jn(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}$n.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Jn(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Qn(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Zn="closure_lm_"+(1e6*Math.random()|0),er={};function tr(e,t,n,r,i){if(r&&r.once)return rr(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)tr(e,t[a],n,r,i);return null}return n=lr(n),e&&e[Gn]?e.N(t,n,Zt(r)?!!r.capture:!!r,i):nr(e,t,n,!1,r,i)}function nr(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Zt(i)?!!i.capture:!!i,u=sr(e);if(u||(e[Zn]=u=new $n(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=ur;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Bn||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(or(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function rr(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)rr(e,t[a],n,r,i);return null}return n=lr(n),e&&e[Gn]?e.O(t,n,Zt(r)?!!r.capture:!!r,i):nr(e,t,n,!0,r,i)}function ir(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)ir(e,t[a],n,r,i);else r=Zt(r)?!!r.capture:!!r,n=lr(n),e&&e[Gn]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Jn(a=e.g[t],n,r,i))&&(Yn(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=sr(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Jn(t,n,r,i)),(n=-1<e?t[e]:null)&&ar(n))}function ar(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Gn])Xn(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(or(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=sr(t))?(Xn(n,e),0==n.h&&(n.src=null,t[Zn]=null)):Yn(e)}}}function or(e){return e in er?er[e]:er[e]="on"+e}function ur(e,t){if(e.ca)e=!0;else{t=new Wn(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&ar(e),e=n.call(r,t)}return e}function sr(e){return(e=e[Zn])instanceof $n?e:null}var cr="__closure_events_fn_"+(1e9*Math.random()>>>0);function lr(e){return"function"===typeof e?e:(e[cr]||(e[cr]=function(t){return e.handleEvent(t)}),e[cr])}function hr(){sn.call(this),this.i=new $n(this),this.P=this,this.I=null}function fr(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new zn(t,e);else if(t instanceof zn)t.target=t.target||e;else{var i=t;In(t=new zn(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=dr(o,r,!0,t)&&i}if(i=dr(o=t.g=e,r,!0,t)&&i,i=dr(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=dr(o=t.g=n[a],r,!1,t)&&i}function dr(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Xn(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}un(hr,sn),hr.prototype[Gn]=!0,hr.prototype.removeEventListener=function(e,t,n,r){ir(this,e,t,n,r)},hr.prototype.M=function(){if(hr.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Yn(n[r]);delete t.g[e],t.h--}}this.I=null},hr.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},hr.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var pr=$t.JSON.stringify;function vr(){var e=xr,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var yr,mr=function(){function e(){h(this,e),this.h=this.g=null}return d(e,[{key:"add",value:function(e,t){var n=gr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),gr=new(function(){function e(t,n){h(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return d(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new kr}),(function(e){return e.reset()})),kr=function(){function e(){h(this,e),this.next=this.g=this.h=null}return d(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function wr(e){$t.setTimeout((function(){throw e}),0)}function br(e,t){yr||function(){var e=$t.Promise.resolve(void 0);yr=function(){e.then(Ir)}}(),_r||(yr(),_r=!0),xr.add(e,t)}var _r=!1,xr=new mr;function Ir(){for(var e;e=vr();){try{e.h.call(e.g)}catch(n){wr(n)}var t=gr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}_r=!1}function Sr(e,t){hr.call(this),this.h=e||1,this.g=t||$t,this.j=an(this.kb,this),this.l=Date.now()}function Tr(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Er(e,t,n){if("function"===typeof e)n&&(e=an(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=an(e.handleEvent,e)}return 2147483647<Number(t)?-1:$t.setTimeout(e,t||0)}function Cr(e){e.g=Er((function(){e.g=null,e.i&&(e.i=!1,Cr(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}un(Sr,hr),(Gt=Sr.prototype).da=!1,Gt.S=null,Gt.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),fr(this,"tick"),this.da&&(Tr(this),this.start()))}},Gt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Gt.M=function(){Sr.Z.M.call(this),Tr(this),delete this.g};var Nr=function(e){m(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return d(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Cr(this)}},{key:"M",value:function(){Kt(g(n.prototype),"M",this).call(this),this.g&&($t.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(sn);function Ar(e){sn.call(this),this.h=e,this.g={}}un(Ar,sn);var Pr=[];function Rr(e,t,n,r){Array.isArray(n)||(n&&(Pr[0]=n.toString()),n=Pr);for(var i=0;i<n.length;i++){var a=tr(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Dr(e){bn(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ar(e)}),e),e.g={}}function Or(){this.g=!0}function Lr(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return pr(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Ar.prototype.M=function(){Ar.Z.M.call(this),Dr(this)},Ar.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Or.prototype.Aa=function(){this.g=!1},Or.prototype.info=function(){};var Mr={},Fr=null;function Ur(){return Fr=Fr||new hr}function Vr(e){zn.call(this,Mr.Ma,e)}function jr(e){var t=Ur();fr(t,new Vr(t,e))}function qr(e,t){zn.call(this,Mr.STAT_EVENT,e),this.stat=t}function Br(e){var t=Ur();fr(t,new qr(t,e))}function zr(e,t){zn.call(this,Mr.Na,e),this.size=t}function Wr(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return $t.setTimeout((function(){e()}),t)}Mr.Ma="serverreachability",un(Vr,zn),Mr.STAT_EVENT="statevent",un(qr,zn),Mr.Na="timingevent",un(zr,zn);var Kr={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Gr={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Hr(){}function Qr(e){return e.h||(e.h=e.i())}function Yr(){}Hr.prototype.h=null;var $r,Xr={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Jr(){zn.call(this,"d")}function Zr(){zn.call(this,"c")}function ei(){}function ti(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Ar(this),this.P=ri,e=An?125:void 0,this.W=new Sr(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ni}function ni(){this.i=null,this.g="",this.h=!1}un(Jr,zn),un(Zr,zn),un(ei,Hr),ei.prototype.g=function(){return new XMLHttpRequest},ei.prototype.i=function(){return{}},$r=new ei;var ri=45e3,ii={},ai={};function oi(e,t,n){e.K=1,e.v=Ni(xi(t)),e.s=n,e.U=!0,ui(e,null)}function ui(e,t){e.F=Date.now(),hi(e),e.A=xi(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Bi(n.h,"t",r),e.C=0,n=e.l.H,e.h=new ni,e.g=Wa(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Nr(an(e.Ia,e,e.g),e.O)),Rr(e.V,e.g,"readystatechange",e.gb),t=e.H?_n(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),jr(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function si(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function ci(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=li(e,n))==ai){4==t&&(e.o=4,Br(14),i=!1),Lr(e.j,e.m,null,"[Incomplete Response]");break}if(r==ii){e.o=4,Br(15),Lr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Lr(e.j,e.m,r,null),yi(e,r)}si(e)&&r!=ai&&r!=ii&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Br(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ma(t),t.L=!0,Br(11))):(Lr(e.j,e.m,n,"[Invalid Chunked Response]"),vi(e),pi(e))}function li(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?ai:(n=Number(t.substring(n,r)),isNaN(n)?ii:(r+=1)+n>t.length?ai:(t=t.substr(r,n),e.C=r+n,t))}function hi(e){e.Y=Date.now()+e.P,fi(e,e.P)}function fi(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Wr(an(e.eb,e),t)}function di(e){e.B&&($t.clearTimeout(e.B),e.B=null)}function pi(e){0==e.l.G||e.I||Va(e.l,e)}function vi(e){di(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Tr(e.W),Dr(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function yi(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||$i(n.i,e)))if(n.I=e.N,!e.J&&$i(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Ua(n),Ea(n)}La(n),Br(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Wr(an(n.ab,n),6e3));if(1>=Yi(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else qa(n,11)}else if((e.J||n.g==e)&&Ua(n),!pn(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(mn(l,"spdy")||mn(l,"quic")||mn(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Xi(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Ci(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=za(r,r.H?r.la:null,r.W),d.J){Ji(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(di(p),hi(p)),r.g=d}else Oa(r);0<n.l.length&&Aa(n)}else"stop"!=a[0]&&"close"!=a[0]||qa(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?qa(n,7):Ta(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}jr(4)}catch(a){}}function mi(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Jt(e)||"string"===typeof e)hn(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Jt(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Jt(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function gi(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof gi)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function ki(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];wi(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)wi(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function wi(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Gt=ti.prototype).setTimeout=function(e){this.P=e},Gt.gb=function(e){e=e.target;var t=this.L;t&&3==ba(e)?t.l():this.Ia(e)},Gt.Ia=function(e){try{if(e==this.g)e:{var t=ba(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||An||this.g&&(this.h.h||this.g.ga()||_a(this.g)))){this.I||4!=t||7==n||jr(8==n||0>=r?3:2),di(this);var i=this.g.ba();this.N=i;t:if(si(this)){var a=_a(this.g);e="";var o=a.length,u=4==ba(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){vi(this),pi(this);var s="";break t}this.h.i=new $t.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pn(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,Br(12),vi(this),pi(this);break e}Lr(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,yi(this,i)}this.U?(ci(this,t,s),An&&this.i&&3==t&&(Rr(this.V,this.W,"tick",this.fb),this.W.start())):(Lr(this.j,this.m,s,null),yi(this,s)),4==t&&vi(this),this.i&&!this.I&&(4==t?Va(this.l,this):(this.i=!1,hi(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Br(12)):(this.o=0,Br(13)),vi(this),pi(this)}}}catch(t){}},Gt.fb=function(){if(this.g){var e=ba(this.g),t=this.g.ga();this.C<t.length&&(di(this),ci(this,e,t),this.i&&4!=e&&hi(this))}},Gt.cancel=function(){this.I=!0,vi(this)},Gt.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(jr(3),Br(17)),vi(this),this.o=2,pi(this)):fi(this,this.Y-e)},(Gt=gi.prototype).R=function(){ki(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Gt.T=function(){return ki(this),this.g.concat()},Gt.get=function(e,t){return wi(this.h,e)?this.h[e]:t},Gt.set=function(e,t){wi(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Gt.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var bi=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function _i(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof _i){this.g=void 0!==t?t:e.g,Ii(this,e.j),this.s=e.s,Si(this,e.i),Ti(this,e.m),this.l=e.l,t=e.h;var n=new Ui;n.i=t.i,t.g&&(n.g=new gi(t.g),n.h=t.h),Ei(this,n),this.o=e.o}else e&&(n=String(e).match(bi))?(this.g=!!t,Ii(this,n[1]||"",!0),this.s=Ai(n[2]||""),Si(this,n[3]||"",!0),Ti(this,n[4]),this.l=Ai(n[5]||"",!0),Ei(this,n[6]||"",!0),this.o=Ai(n[7]||"")):(this.g=!!t,this.h=new Ui(null,this.g))}function xi(e){return new _i(e)}function Ii(e,t,n){e.j=n?Ai(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Si(e,t,n){e.i=n?Ai(t,!0):t}function Ti(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ei(e,t,n){t instanceof Ui?(e.h=t,function(e,t){t&&!e.j&&(Vi(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(ji(this,t),Bi(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Pi(t,Mi)),e.h=new Ui(t,e.g))}function Ci(e,t,n){e.h.set(t,n)}function Ni(e){return Ci(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ai(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Pi(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ri),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ri(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}_i.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Pi(t,Di,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Pi(t,Di,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Pi(n,"/"==n.charAt(0)?Li:Oi,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Pi(n,Fi)),e.join("")};var Di=/[#\/\?@]/g,Oi=/[#\?:]/g,Li=/[#\?]/g,Mi=/[#\?@]/g,Fi=/#/g;function Ui(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Vi(e){e.g||(e.g=new gi,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function ji(e,t){Vi(e),t=zi(e,t),wi(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,wi((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&ki(e)))}function qi(e,t){return Vi(e),t=zi(e,t),wi(e.g.h,t)}function Bi(e,t,n){ji(e,t),0<n.length&&(e.i=null,e.g.set(zi(e,t),dn(n)),e.h+=n.length)}function zi(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Gt=Ui.prototype).add=function(e,t){Vi(this),this.i=null,e=zi(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Gt.forEach=function(e,t){Vi(this),this.g.forEach((function(n,r){hn(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Gt.T=function(){Vi(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Gt.R=function(e){Vi(this);var t=[];if("string"===typeof e)qi(this,e)&&(t=fn(t,this.g.get(zi(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=fn(t,e[n])}return t},Gt.set=function(e,t){return Vi(this),this.i=null,qi(this,e=zi(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Gt.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Gt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Wi=d((function e(t,n){h(this,e),this.h=t,this.g=n}));function Ki(e){this.l=e||Hi,$t.PerformanceNavigationTiming?e=0<(e=$t.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!($t.g&&$t.g.Ea&&$t.g.Ea()&&$t.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Gi,Hi=10;function Qi(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Yi(e){return e.h?1:e.g?e.g.size:0}function $i(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Xi(e,t){e.g?e.g.add(t):e.h=t}function Ji(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Zi(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=p(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return dn(e.i)}function ea(){}function ta(){this.g=new ea}function na(e,t,n){var r=n||"";try{mi(e,(function(e,n){var i=e;Zt(e)&&(i=pr(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ra(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function ia(e){this.l=e.$b||null,this.j=e.ib||!1}function aa(e,t){hr.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=oa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ki.prototype.cancel=function(){if(this.i=Zi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=p(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},ea.prototype.stringify=function(e){return $t.JSON.stringify(e,void 0)},ea.prototype.parse=function(e){return $t.JSON.parse(e,void 0)},un(ia,Hr),ia.prototype.g=function(){return new aa(this.l,this.j)},ia.prototype.i=(Gi={},function(){return Gi}),un(aa,hr);var oa=0;function ua(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function sa(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ca(e)}function ca(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Gt=aa.prototype).open=function(e,t){if(this.readyState!=oa)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ca(this)},Gt.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||$t).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Gt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sa(this)),this.readyState=oa},Gt.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ca(this)),this.g&&(this.readyState=3,ca(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof $t.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ua(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Gt.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?sa(this):ca(this),3==this.readyState&&ua(this)}},Gt.Ua=function(e){this.g&&(this.response=this.responseText=e,sa(this))},Gt.Ta=function(e){this.g&&(this.response=e,sa(this))},Gt.ha=function(){this.g&&sa(this)},Gt.setRequestHeader=function(e,t){this.v.append(e,t)},Gt.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Gt.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(aa.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var la=$t.JSON.parse;function ha(e){hr.call(this),this.headers=new gi,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=fa,this.K=this.L=!1}un(ha,hr);var fa="",da=/^https?$/i,pa=["POST","PUT"];function va(e){return"content-type"==e.toLowerCase()}function ya(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ma(e),ka(e)}function ma(e){e.D||(e.D=!0,fr(e,"complete"),fr(e,"error"))}function ga(e){if(e.h&&"undefined"!=typeof Yt&&(!e.C[1]||4!=ba(e)||2!=e.ba()))if(e.v&&4==ba(e))Er(e.Fa,0,e);else if(fr(e,"readystatechange"),4==ba(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(bi)[1]||null;if(!a&&$t.self&&$t.self.location){var o=$t.self.location.protocol;a=o.substr(0,o.length-1)}i=!da.test(a?a.toLowerCase():"")}t=i}if(t)fr(e,"complete"),fr(e,"success");else{e.m=6;try{var u=2<ba(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",ma(e)}}finally{ka(e)}}}function ka(e,t){if(e.g){wa(e);var n=e.g,r=e.C[0]?Xt:null;e.g=null,e.C=null,t||fr(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function wa(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&($t.clearTimeout(e.A),e.A=null)}function ba(e){return e.g?e.g.readyState:0}function _a(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case fa:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function xa(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return bn(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ci(e,t,n))}function Ia(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Sa(e){this.za=0,this.l=[],this.h=new Or,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ia("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ia("baseRetryDelayMs",5e3,e),this.$a=Ia("retryDelaySeedMs",1e4,e),this.Ya=Ia("forwardChannelMaxRetries",2,e),this.ra=Ia("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Ki(e&&e.concurrentRequestLimit),this.Ca=new ta,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Ta(e){if(Ca(e),3==e.G){var t=e.V++,n=xi(e.F);Ci(n,"SID",e.J),Ci(n,"RID",t),Ci(n,"TYPE","terminate"),Ra(e,n),(t=new ti(e,e.h,t,void 0)).K=2,t.v=Ni(xi(n)),n=!1,$t.navigator&&$t.navigator.sendBeacon&&(n=$t.navigator.sendBeacon(t.v.toString(),"")),!n&&$t.Image&&((new Image).src=t.v,n=!0),n||(t.g=Wa(t.l,null),t.g.ea(t.v)),t.F=Date.now(),hi(t)}Ba(e)}function Ea(e){e.g&&(Ma(e),e.g.cancel(),e.g=null)}function Ca(e){Ea(e),e.u&&($t.clearTimeout(e.u),e.u=null),Ua(e),e.i.cancel(),e.m&&("number"===typeof e.m&&$t.clearTimeout(e.m),e.m=null)}function Na(e,t){e.l.push(new Wi(e.Za++,t)),3==e.G&&Aa(e)}function Aa(e){Qi(e.i)||e.m||(e.m=!0,br(e.Ha,e),e.C=0)}function Pa(e,t){var n;n=t?t.m:e.V++;var r=xi(e.F);Ci(r,"SID",e.J),Ci(r,"RID",n),Ci(r,"AID",e.U),Ra(e,r),e.o&&e.s&&xa(r,e.o,e.s),n=new ti(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Da(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Xi(e.i,n),oi(n,r,t)}function Ra(e,t){e.j&&mi({},(function(e,n){Ci(t,n,e)}))}function Da(e,t,n){n=Math.min(e.l.length,n);var r=e.j?an(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{na(l,o,"req"+c+"_")}catch(ko){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Oa(e){e.g||e.u||(e.Y=1,br(e.Ga,e),e.A=0)}function La(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Wr(an(e.Ga,e),ja(e,e.A)),e.A++,!0)}function Ma(e){null!=e.B&&($t.clearTimeout(e.B),e.B=null)}function Fa(e){e.g=new ti(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=xi(e.oa);Ci(t,"RID","rpc"),Ci(t,"SID",e.J),Ci(t,"CI",e.N?"0":"1"),Ci(t,"AID",e.U),Ra(e,t),Ci(t,"TYPE","xmlhttp"),e.o&&e.s&&xa(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Ni(xi(t)),n.s=null,n.U=!0,ui(n,e)}function Ua(e){null!=e.v&&($t.clearTimeout(e.v),e.v=null)}function Va(e,t){var n=null;if(e.g==t){Ua(e),Ma(e),e.g=null;var r=2}else{if(!$i(e.i,t))return;n=t.D,Ji(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;fr(r=Ur(),new zr(r,n,t,i)),Aa(e)}else Oa(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Yi(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Wr(an(e.Ha,e,t),ja(e,e.C)),e.C++,!0))}(e,t)||2==r&&La(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:qa(e,5);break;case 4:qa(e,10);break;case 3:qa(e,6);break;default:qa(e,2)}}function ja(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function qa(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=an(e.jb,e);n||(n=new _i("//www.google.com/images/cleardot.gif"),$t.location&&"http"==$t.location.protocol||Ii(n,"https"),Ni(n)),function(e,t){var n=new Or;if($t.Image){var r=new Image;r.onload=on(ra,n,r,"TestLoadImage: loaded",!0,t),r.onerror=on(ra,n,r,"TestLoadImage: error",!1,t),r.onabort=on(ra,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=on(ra,n,r,"TestLoadImage: timeout",!1,t),$t.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Br(2);e.G=0,e.j&&e.j.va(t),Ba(e),Ca(e)}function Ba(e){e.G=0,e.I=-1,e.j&&(0==Zi(e.i).length&&0==e.l.length||(e.i.i.length=0,dn(e.l),e.l.length=0),e.j.ua())}function za(e,t,n){var r=function(e){return e instanceof _i?xi(e):new _i(e,void 0)}(n);if(""!=r.i)t&&Si(r,t+"."+r.i),Ti(r,r.m);else{var i=$t.location;r=function(e,t,n,r){var i=new _i(null,void 0);return e&&Ii(i,e),t&&Si(i,t),n&&Ti(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&bn(e.aa,(function(e,t){Ci(r,t,e)})),t=e.D,n=e.sa,t&&n&&Ci(r,t,n),Ci(r,"VER",e.ma),Ra(e,r),r}function Wa(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new ha(new ia({ib:!0})):new ha(e.qa)).L=e.H,t}function Ka(){}function Ga(){if(Cn&&!(10<=Number(qn)))throw Error("Environmental error: no available transport.")}function Ha(e,t){hr.call(this),this.g=new Sa(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!pn(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!pn(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new $a(this)}function Qa(e){Jr.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ya(){Zr.call(this),this.status=1}function $a(e){this.g=e}(Gt=ha.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():$r.g(),this.C=this.u?Qr(this.u):Qr($r),this.g.onreadystatechange=an(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void ya(this,a)}e=n||"";var i=new gi(this.headers);r&&mi(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=va,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=$t.FormData&&e instanceof $t.FormData,!(0<=ln(pa,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{wa(this),0<this.B&&((this.K=function(e){return Cn&&Vn()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=an(this.pa,this)):this.A=Er(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){ya(this,a)}},Gt.pa=function(){"undefined"!=typeof Yt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,fr(this,"timeout"),this.abort(8))},Gt.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,fr(this,"complete"),fr(this,"abort"),ka(this))},Gt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ka(this,!0)),ha.Z.M.call(this)},Gt.Fa=function(){this.s||(this.F||this.v||this.l?ga(this):this.cb())},Gt.cb=function(){ga(this)},Gt.ba=function(){try{return 2<ba(this)?this.g.status:-1}catch(Gi){return-1}},Gt.ga=function(){try{return this.g?this.g.responseText:""}catch(Gi){return""}},Gt.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),la(t)}},Gt.Da=function(){return this.m},Gt.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Gt=Sa.prototype).ma=8,Gt.G=1,Gt.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Gt.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new ti(this,this.h,e,void 0),n=this.s;if(this.P&&(n?In(n=_n(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Da(this,t,r),Ci(i=xi(this.F),"RID",e),Ci(i,"CVER",22),this.D&&Ci(i,"X-HTTP-Session-Id",this.D),Ra(this,i),this.o&&n&&xa(i,this.o,n),Xi(this.i,t),this.Ra&&Ci(i,"TYPE","init"),this.ja?(Ci(i,"$req",r),Ci(i,"SID","null"),t.$=!0,oi(t,i,null)):oi(t,i,r),this.G=2}}else 3==this.G&&(e?Pa(this,e):0==this.l.length||Qi(this.i)||Pa(this))},Gt.Ga=function(){if(this.u=null,Fa(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Wr(an(this.bb,this),e)}},Gt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Br(10),Ea(this),Fa(this))},Gt.ab=function(){null!=this.v&&(this.v=null,Ea(this),La(this),Br(19))},Gt.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Br(2)):(this.h.info("Failed to ping google.com"),Br(1))},(Gt=Ka.prototype).xa=function(){},Gt.wa=function(){},Gt.va=function(){},Gt.ua=function(){},Gt.Oa=function(){},Ga.prototype.g=function(e,t){return new Ha(e,t)},un(Ha,hr),Ha.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),br(an(e.hb,e,t))),Br(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=za(e,null,e.W),Aa(e)},Ha.prototype.close=function(){Ta(this.g)},Ha.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Na(this.g,t)}else this.v?((t={}).__data__=pr(e),Na(this.g,t)):Na(this.g,e)},Ha.prototype.M=function(){this.g.j=null,delete this.j,Ta(this.g),delete this.g,Ha.Z.M.call(this)},un(Qa,Jr),un(Ya,Zr),un($a,Ka),$a.prototype.xa=function(){fr(this.g,"a")},$a.prototype.wa=function(e){fr(this.g,new Qa(e))},$a.prototype.va=function(e){fr(this.g,new Ya(e))},$a.prototype.ua=function(){fr(this.g,"b")},Ga.prototype.createWebChannel=Ga.prototype.g,Ha.prototype.send=Ha.prototype.u,Ha.prototype.open=Ha.prototype.m,Ha.prototype.close=Ha.prototype.close,Kr.NO_ERROR=0,Kr.TIMEOUT=8,Kr.HTTP_ERROR=6,Gr.COMPLETE="complete",Yr.EventType=Xr,Xr.OPEN="a",Xr.CLOSE="b",Xr.ERROR="c",Xr.MESSAGE="d",hr.prototype.listen=hr.prototype.N,ha.prototype.listenOnce=ha.prototype.O,ha.prototype.getLastError=ha.prototype.La,ha.prototype.getLastErrorCode=ha.prototype.Da,ha.prototype.getStatus=ha.prototype.ba,ha.prototype.getResponseJson=ha.prototype.Qa,ha.prototype.getResponseText=ha.prototype.ga,ha.prototype.send=ha.prototype.ea;var Xa=Qt.createWebChannelTransport=function(){return new Ga},Ja=Qt.getStatEventTarget=function(){return Ur()},Za=Qt.ErrorCode=Kr,eo=Qt.EventType=Gr,to=Qt.Event=Mr,no=Qt.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ro=Qt.FetchXmlHttpFactory=ia,io=Qt.WebChannel=Yr,ao=Qt.XhrIo=ha,oo="@firebase/firestore",uo=function(){function e(t){h(this,e),this.uid=t}return d(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();uo.UNAUTHENTICATED=new uo(null),uo.GOOGLE_CREDENTIALS=new uo("google-credentials-uid"),uo.FIRST_PARTY=new uo("first-party-uid"),uo.MOCK_USER=new uo("mock-user");var so="9.6.11",co=new Qe("@firebase/firestore");function lo(){return co.logLevel}function ho(e){if(co.logLevel<=Ve.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(vo);co.debug.apply(co,["Firestore (".concat(so,"): ").concat(e)].concat(Pe(i)))}}function fo(e){if(co.logLevel<=Ve.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(vo);co.error.apply(co,["Firestore (".concat(so,"): ").concat(e)].concat(Pe(i)))}}function po(e){if(co.logLevel<=Ve.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(vo);co.warn.apply(co,["Firestore (".concat(so,"): ").concat(e)].concat(Pe(i)))}}function vo(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function yo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(so,") INTERNAL ASSERTION FAILED: ")+e;throw fo(t),new Error(t)}function mo(e,t){e||yo()}function go(e,t){return e}var ko={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},wo=function(e){m(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return d(n)}($),bo=d((function e(){var t=this;h(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),_o=d((function e(t,n){h(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),xo=function(){function e(){h(this,e)}return d(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(uo.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Io=function(){function e(t){h(this,e),this.token=t,this.changeListener=null}return d(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),So=function(){function e(t){h(this,e),this.t=t,this.currentUser=uo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return d(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new bo;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new bo,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){ho("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(ho("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new bo)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(ho("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(mo("string"==typeof n.accessToken),new _o(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return mo(null===e||"string"==typeof e),new uo(e)}}]),e}(),To=d((function e(t,n,r){h(this,e),this.type="FirstParty",this.user=uo.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Eo=function(){function e(t,n,r){h(this,e),this.h=t,this.l=n,this.m=r}return d(e,[{key:"getToken",value:function(){return Promise.resolve(new To(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(uo.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Co=d((function e(t){h(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),No=function(){function e(t){h(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return d(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&ho("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,ho("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){ho("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):ho("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(mo("string"==typeof t.token),e.p=t.token,new Co(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Ao=function(){function e(t,n){var r=this;h(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return d(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Po(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Ao.A=-1;var Ro=function(){function e(){h(this,e)}return d(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Po(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Do(e,t){return e<t?-1:e>t?1:0}function Oo(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Lo(e){return e+"\0"}var Mo=function(){function e(t,n){if(h(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new wo(ko.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new wo(ko.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new wo(ko.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new wo(ko.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return d(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Do(this.nanoseconds,e.nanoseconds):Do(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Fo=function(){function e(t){h(this,e),this.timestamp=t}return d(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Mo(0,0))}},{key:"max",value:function(){return new e(new Mo(253402300799,999999999))}}]),e}();function Uo(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Vo(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function jo(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var qo=function(){function e(t,n,r){h(this,e),void 0===n?n=0:n>t.length&&yo(),void 0===r?r=t.length-n:r>t.length-n&&yo(),this.segments=t,this.offset=n,this.len=r}return d(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Bo=function(e){m(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return d(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new wo(ko.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Pe(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(qo),zo=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Wo=function(e){m(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return d(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return zo.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new wo(ko.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new wo(ko.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new wo(ko.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new wo(ko.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(qo),Ko=function(){function e(t){h(this,e),this.fields=t,t.sort(Wo.comparator)}return d(e,[{key:"covers",value:function(e){var t,n=p(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Oo(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Go=function(e){function t(e){h(this,t),this.binaryString=e}return d(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Do(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Go.EMPTY_BYTE_STRING=new Go("");var Ho=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qo(e){if(mo(!!e),"string"==typeof e){var t=0,n=Ho.exec(e);if(mo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Yo(e.seconds),nanos:Yo(e.nanos)}}function Yo(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function $o(e){return"string"==typeof e?Go.fromBase64String(e):Go.fromUint8Array(e)}function Xo(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Jo(e){var t=e.mapValue.fields.__previous_value__;return Xo(t)?Jo(t):t}function Zo(e){var t=Qo(e.mapValue.fields.__local_write_time__.timestampValue);return new Mo(t.seconds,t.nanos)}var eu=d((function e(t,n,r,i,a,o,u,s){h(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),tu=function(){function e(t,n){h(this,e),this.projectId=t,this.database=n||"(default)"}return d(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function nu(e){return null==e}function ru(e){return 0===e&&1/e==-1/0}function iu(e){return"number"==typeof e&&Number.isInteger(e)&&!ru(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var au=function(){function e(t){h(this,e),this.path=t}return d(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Bo.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Bo.fromString(t))}},{key:"fromName",value:function(t){return new e(Bo.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Bo.emptyPath())}},{key:"comparator",value:function(e,t){return Bo.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Bo(t.slice()))}}]),e}(),ou={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},uu={nullValue:"NULL_VALUE"};function su(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Xo(e)?4:_u(e)?9:10:yo()}function cu(e,t){if(e===t)return!0;var n=su(e);if(n!==su(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Zo(e).isEqual(Zo(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Qo(e.timestampValue),r=Qo(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return $o(e.bytesValue).isEqual($o(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Yo(e.geoPointValue.latitude)===Yo(t.geoPointValue.latitude)&&Yo(e.geoPointValue.longitude)===Yo(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Yo(e.integerValue)===Yo(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Yo(e.doubleValue),r=Yo(t.doubleValue);return n===r?ru(n)===ru(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Oo(e.arrayValue.values||[],t.arrayValue.values||[],cu);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Uo(n)!==Uo(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!cu(n[i],r[i])))return!1;return!0}(e,t);default:return yo()}}function lu(e,t){return void 0!==(e.values||[]).find((function(e){return cu(e,t)}))}function hu(e,t){if(e===t)return 0;var n=su(e),r=su(t);if(n!==r)return Do(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Do(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Yo(e.integerValue||e.doubleValue),r=Yo(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return fu(e.timestampValue,t.timestampValue);case 4:return fu(Zo(e),Zo(t));case 5:return Do(e.stringValue,t.stringValue);case 6:return function(e,t){var n=$o(e),r=$o(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Do(n[i],r[i]);if(0!==a)return a}return Do(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Do(Yo(e.latitude),Yo(t.latitude));return 0!==n?n:Do(Yo(e.longitude),Yo(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=hu(n[i],r[i]);if(a)return a}return Do(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Do(r[o],a[o]);if(0!==u)return u;var s=hu(n[r[o]],i[a[o]]);if(0!==s)return s}return Do(r.length,a.length)}(e.mapValue,t.mapValue);default:throw yo()}}function fu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Do(e,t);var n=Qo(e),r=Qo(t),i=Do(n.seconds,r.seconds);return 0!==i?i:Do(n.nanos,r.nanos)}function du(e){return pu(e)}function pu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Qo(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?$o(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,au.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=p(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=pu(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=p(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(pu(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):yo();var t,n}function vu(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function yu(e){return!!e&&"integerValue"in e}function mu(e){return!!e&&"arrayValue"in e}function gu(e){return!!e&&"nullValue"in e}function ku(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function wu(e){return!!e&&"mapValue"in e}function bu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Vo(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=bu(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=bu(e.arrayValue.values[r]);return n}return Object.assign({},e)}function _u(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function xu(e){return"nullValue"in e?uu:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?vu(tu.empty(),au.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:yo()}function Iu(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?vu(tu.empty(),au.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?ou:yo()}function Su(e,t){return void 0===e?t:void 0===t||hu(e,t)>0?e:t}function Tu(e,t){return void 0===e?t:void 0===t||hu(e,t)<0?e:t}var Eu=function(){function e(t){h(this,e),this.value=t}return d(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!wu(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bu(t)}},{key:"setAll",value:function(e){var t=this,n=Wo.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=bu(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());wu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return cu(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];wu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Vo(t,(function(t,n){return e[t]=n}));var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(bu(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Cu(e){var t=[];return Vo(e.fields,(function(e,n){var r=new Wo([e]);if(wu(n)){var i=Cu(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=p(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Ko(t)}var Nu=function(){function e(t,n,r,i,a,o){h(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return d(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Eu.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Eu.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Fo.min(),Fo.min(),Eu.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Fo.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Fo.min(),Eu.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Fo.min(),Eu.empty(),2)}}]),e}(),Au=d((function e(t,n,r,i){h(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Pu(e){return e.fields.find((function(e){return 2===e.kind}))}function Ru(e){return e.fields.filter((function(e){return 2!==e.kind}))}Au.UNKNOWN_ID=-1;var Du=d((function e(t,n){h(this,e),this.fieldPath=t,this.kind=n})),Ou=function(){function e(t,n){h(this,e),this.sequenceNumber=t,this.offset=n}return d(e,null,[{key:"empty",value:function(){return new e(0,Fu.min())}}]),e}();function Lu(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Fo.fromTimestamp(1e9===r?new Mo(n+1,0):new Mo(n,r));return new Fu(i,au.empty(),t)}function Mu(e){return new Fu(e.readTime,e.key,-1)}var Fu=function(){function e(t,n,r){h(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return d(e,null,[{key:"min",value:function(){return new e(Fo.min(),au.empty(),-1)}},{key:"max",value:function(){return new e(Fo.max(),au.empty(),-1)}}]),e}();function Uu(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=au.comparator(e.documentKey,t.documentKey))?n:Do(e.largestBatchId,t.largestBatchId)}var Vu=d((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;h(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null}));function ju(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Vu(e,t,n,r,i,a,o)}function qu(e){var t=go(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+du(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),nu(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return du(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return du(e)})).join(",")),t.P=n}return t.P}function Bu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!is(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!cu(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!os(e.startAt,t.startAt)&&os(e.endAt,t.endAt)}function zu(e){return au.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Wu(e,t){return e.filters.filter((function(e){return e instanceof Hu&&e.field.isEqual(t)}))}function Ku(e,t,n){var r,i,a=!0,o=p(Wu(e,t));try{for(o.s();!(i=o.n()).done;){var u=i.value,s=void 0,c=!0;switch(u.op){case"<":case"<=":s=xu(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=uu}Su(r,s)===s&&(r=s,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];Su(r,h)===h&&(r=h,a=n.inclusive);break}return{value:r,inclusive:a}}function Gu(e,t,n){var r,i,a=!0,o=p(Wu(e,t));try{for(o.s();!(i=o.n()).done;){var u=i.value,s=void 0,c=!0;switch(u.op){case">=":case">":s=Iu(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=ou}Tu(r,s)===s&&(r=s,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];Tu(r,h)===h&&(r=h,a=n.inclusive);break}return{value:r,inclusive:a}}var Hu=function(e){m(n,e);var t=_(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return d(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(hu(t,this.value)):null!==t&&su(this.value)===su(t)&&this.v(hu(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return yo()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Qu(e,t,r):"array-contains"===t?new Ju(e,r):"in"===t?new Zu(e,r):"not-in"===t?new es(e,r):"array-contains-any"===t?new ts(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new Yu(e,n):new $u(e,n)}}]),n}(function(){return d((function e(){h(this,e)}))}()),Qu=function(e){m(n,e);var t=_(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this,e,r,i)).key=au.fromName(i.referenceValue),a}return d(n,[{key:"matches",value:function(e){var t=au.comparator(e.key,this.key);return this.v(t)}}]),n}(Hu),Yu=function(e){m(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,"in",r)).keys=Xu("in",r),i}return d(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Hu),$u=function(e){m(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,"not-in",r)).keys=Xu("not-in",r),i}return d(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Hu);function Xu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return au.fromName(e.referenceValue)}))}var Ju=function(e){m(n,e);var t=_(n);function n(e,r){return h(this,n),t.call(this,e,"array-contains",r)}return d(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return mu(t)&&lu(t.arrayValue,this.value)}}]),n}(Hu),Zu=function(e){m(n,e);var t=_(n);function n(e,r){return h(this,n),t.call(this,e,"in",r)}return d(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&lu(this.value.arrayValue,t)}}]),n}(Hu),es=function(e){m(n,e);var t=_(n);function n(e,r){return h(this,n),t.call(this,e,"not-in",r)}return d(n,[{key:"matches",value:function(e){if(lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!lu(this.value.arrayValue,t)}}]),n}(Hu),ts=function(e){m(n,e);var t=_(n);function n(e,r){return h(this,n),t.call(this,e,"array-contains-any",r)}return d(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!mu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return lu(t.value.arrayValue,e)}))}}]),n}(Hu),ns=d((function e(t,n){h(this,e),this.position=t,this.inclusive=n})),rs=d((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";h(this,e),this.field=t,this.dir=n}));function is(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function as(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?au.comparator(au.fromName(o.referenceValue),n.key):hu(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function os(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!cu(e.position[n],t.position[n]))return!1;return!0}var us=d((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;h(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt}));function ss(e,t,n,r,i,a,o,u){return new us(e,t,n,r,i,a,o,u)}function cs(e){return new us(e)}function ls(e){return!nu(e.limit)&&"F"===e.limitType}function hs(e){return!nu(e.limit)&&"L"===e.limitType}function fs(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ds(e){var t,n=p(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function ps(e){return null!==e.collectionGroup}function vs(e){var t=go(e);if(null===t.D){t.D=[];var n=ds(t),r=fs(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new rs(n)),t.D.push(new rs(Wo.keyField(),"asc"));else{var i,a=!1,o=p(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new rs(Wo.keyField(),s))}}}return t.D}function ys(e){var t=go(e);if(!t.C)if("F"===t.limitType)t.C=ju(t.path,t.collectionGroup,vs(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=p(vs(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new rs(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new ns(t.endAt.position,!t.endAt.inclusive):null,s=t.startAt?new ns(t.startAt.position,!t.startAt.inclusive):null;t.C=ju(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function ms(e,t,n){return new us(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function gs(e,t){return Bu(ys(e),ys(t))&&e.limitType===t.limitType}function ks(e){return"".concat(qu(ys(e)),"|lt:").concat(e.limitType)}function ws(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(du(t.value));var t})).join(", "),"]")),nu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return du(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return du(e)})).join(",")),"Target(".concat(t,")")}(ys(e)),"; limitType=").concat(e.limitType,")")}function bs(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):au.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=p(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=p(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=as(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,vs(e),t))&&!(e.endAt&&!function(e,t,n){var r=as(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,vs(e),t))}(e,t)}function _s(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function xs(e){return function(t,n){var r,i=!1,a=p(vs(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Is(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Is(e,t,n){var r=e.field.isKeyField()?au.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?hu(r,i):yo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return yo()}}function Ss(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ru(t)?"-0":t}}function Ts(e){return{integerValue:""+e}}function Es(e,t){return iu(t)?Ts(t):Ss(e,t)}var Cs=d((function e(){h(this,e),this._=void 0}));function Ns(e,t,n){return e instanceof Rs?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ds?Os(e,t):e instanceof Ls?Ms(e,t):function(e,t){var n=Ps(e,t),r=Us(n)+Us(e.k);return yu(n)&&yu(e.k)?Ts(r):Ss(e.M,r)}(e,t)}function As(e,t,n){return e instanceof Ds?Os(e,t):e instanceof Ls?Ms(e,t):n}function Ps(e,t){return e instanceof Fs?yu(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Rs=function(e){m(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return d(n)}(Cs),Ds=function(e){m(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this)).elements=e,r}return d(n)}(Cs);function Os(e,t){var n,r=Vs(t),i=p(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return cu(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Ls=function(e){m(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this)).elements=e,r}return d(n)}(Cs);function Ms(e,t){var n,r=Vs(t),i=p(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!cu(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Fs=function(e){m(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).M=e,i.k=r,i}return d(n)}(Cs);function Us(e){return Yo(e.integerValue||e.doubleValue)}function Vs(e){return mu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var js=d((function e(t,n){h(this,e),this.field=t,this.transform=n}));var qs=d((function e(t,n){h(this,e),this.version=t,this.transformResults=n})),Bs=function(){function e(t,n){h(this,e),this.updateTime=t,this.exists=n}return d(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function zs(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Ws=d((function e(){h(this,e)}));function Ks(e,t,n){e instanceof $s?function(e,t,n){var r=e.value.clone(),i=Zs(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Xs?function(e,t,n){if(zs(e.precondition,t)){var r=Zs(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Js(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Gs(e,t,n){e instanceof $s?function(e,t,n){if(zs(e.precondition,t)){var r=e.value.clone(),i=ec(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Ys(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Xs?function(e,t,n){if(zs(e.precondition,t)){var r=ec(e.fieldTransforms,n,t),i=t.data;i.setAll(Js(e)),i.setAll(r),t.convertToFoundDocument(Ys(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){zs(e.precondition,t)&&t.convertToNoDocument(Fo.min())}(e,t)}function Hs(e,t){var n,r=null,i=p(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Ps(a.transform,o||null);null!=u&&(null==r&&(r=Eu.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Qs(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Oo(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ds&&t instanceof Ds||e instanceof Ls&&t instanceof Ls?Oo(e.elements,t.elements,cu):e instanceof Fs&&t instanceof Fs?cu(e.k,t.k):e instanceof Rs&&t instanceof Rs}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Ys(e){return e.isFoundDocument()?e.version:Fo.min()}var $s=function(e){m(n,e);var t=_(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return h(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return d(n)}(Ws),Xs=function(e){m(n,e);var t=_(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return h(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return d(n)}(Ws);function Js(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Zs(e,t,n){var r=new Map;mo(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,As(o,u,n[i]))}return r}function ec(e,t,n){var r,i=new Map,a=p(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Ns(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var tc,nc,rc=function(e){m(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return d(n)}(Ws),ic=function(e){m(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return d(n)}(Ws),ac=d((function e(t){h(this,e),this.count=t}));function oc(e){switch(e){default:return yo();case ko.CANCELLED:case ko.UNKNOWN:case ko.DEADLINE_EXCEEDED:case ko.RESOURCE_EXHAUSTED:case ko.INTERNAL:case ko.UNAVAILABLE:case ko.UNAUTHENTICATED:return!1;case ko.INVALID_ARGUMENT:case ko.NOT_FOUND:case ko.ALREADY_EXISTS:case ko.PERMISSION_DENIED:case ko.FAILED_PRECONDITION:case ko.ABORTED:case ko.OUT_OF_RANGE:case ko.UNIMPLEMENTED:case ko.DATA_LOSS:return!0}}function uc(e){if(void 0===e)return fo("GRPC error has no .code"),ko.UNKNOWN;switch(e){case tc.OK:return ko.OK;case tc.CANCELLED:return ko.CANCELLED;case tc.UNKNOWN:return ko.UNKNOWN;case tc.DEADLINE_EXCEEDED:return ko.DEADLINE_EXCEEDED;case tc.RESOURCE_EXHAUSTED:return ko.RESOURCE_EXHAUSTED;case tc.INTERNAL:return ko.INTERNAL;case tc.UNAVAILABLE:return ko.UNAVAILABLE;case tc.UNAUTHENTICATED:return ko.UNAUTHENTICATED;case tc.INVALID_ARGUMENT:return ko.INVALID_ARGUMENT;case tc.NOT_FOUND:return ko.NOT_FOUND;case tc.ALREADY_EXISTS:return ko.ALREADY_EXISTS;case tc.PERMISSION_DENIED:return ko.PERMISSION_DENIED;case tc.FAILED_PRECONDITION:return ko.FAILED_PRECONDITION;case tc.ABORTED:return ko.ABORTED;case tc.OUT_OF_RANGE:return ko.OUT_OF_RANGE;case tc.UNIMPLEMENTED:return ko.UNIMPLEMENTED;case tc.DATA_LOSS:return ko.DATA_LOSS;default:return yo()}}(nc=tc||(tc={}))[nc.OK=0]="OK",nc[nc.CANCELLED=1]="CANCELLED",nc[nc.UNKNOWN=2]="UNKNOWN",nc[nc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nc[nc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nc[nc.NOT_FOUND=5]="NOT_FOUND",nc[nc.ALREADY_EXISTS=6]="ALREADY_EXISTS",nc[nc.PERMISSION_DENIED=7]="PERMISSION_DENIED",nc[nc.UNAUTHENTICATED=16]="UNAUTHENTICATED",nc[nc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nc[nc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nc[nc.ABORTED=10]="ABORTED",nc[nc.OUT_OF_RANGE=11]="OUT_OF_RANGE",nc[nc.UNIMPLEMENTED=12]="UNIMPLEMENTED",nc[nc.INTERNAL=13]="INTERNAL",nc[nc.UNAVAILABLE=14]="UNAVAILABLE",nc[nc.DATA_LOSS=15]="DATA_LOSS";var sc=function(){function e(t,n){h(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return d(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Vo(this.inner,(function(t,n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return jo(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),cc=function(){function e(t,n){h(this,e),this.comparator=t,this.root=n||hc.EMPTY}return d(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,hc.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,hc.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new lc(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new lc(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new lc(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new lc(this.root,e,this.comparator,!0)}}]),e}(),lc=function(){function e(t,n,r,i){h(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return d(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),hc=function(){function e(t,n,r,i,a){h(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return d(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw yo();if(this.right.isRed())throw yo();var e=this.left.check();if(e!==this.right.check())throw yo();return e+(this.isRed()?0:1)}}]),e}();hc.EMPTY=null,hc.RED=!0,hc.BLACK=!1,hc.EMPTY=new(function(){function e(){h(this,e),this.size=0}return d(e,[{key:"key",get:function(){throw yo()}},{key:"value",get:function(){throw yo()}},{key:"color",get:function(){throw yo()}},{key:"left",get:function(){throw yo()}},{key:"right",get:function(){throw yo()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new hc(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var fc=function(){function e(t){h(this,e),this.comparator=t,this.data=new cc(this.comparator)}return d(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new dc(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new dc(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),dc=function(){function e(t){h(this,e),this.iter=t}return d(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function pc(e){return e.hasNext()?e.getNext():void 0}var vc=new cc(au.comparator);function yc(){return vc}var mc=new cc(au.comparator);function gc(){return mc}function kc(){return new sc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var wc=new cc(au.comparator),bc=new fc(au.comparator);function _c(){for(var e=bc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var xc=new fc(Do);function Ic(){return xc}var Sc=function(){function e(t,n,r,i,a){h(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return d(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Tc.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Fo.min(),r,Ic(),yc(),_c())}}]),e}(),Tc=function(){function e(t,n,r,i,a){h(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return d(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Go.EMPTY_BYTE_STRING,n,_c(),_c(),_c())}}]),e}(),Ec=d((function e(t,n,r,i){h(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),Cc=d((function e(t,n){h(this,e),this.targetId=t,this.$=n})),Nc=d((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Go.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;h(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Ac=function(){function e(){h(this,e),this.B=0,this.L=Dc(),this.U=Go.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return d(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=_c(),t=_c(),n=_c();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:yo()}})),new Tc(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=Dc()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),Pc=function(){function e(t){h(this,e),this.nt=t,this.st=new Map,this.it=yc(),this.rt=Rc(),this.ot=new fc(Do)}return d(e,[{key:"ut",value:function(e){var t,n=p(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=p(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:yo()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(zu(i))if(0===n){var a=new au(i.path);this.ct(t,a,Nu.newNoDocument(a,Fo.min()))}else mo(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&zu(a.target)){var o=new au(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,Nu.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=_c();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new Sc(e,n,this.ot,this.it,r);return this.it=yc(),this.rt=Rc(),this.ot=new fc(Do),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new Ac,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new fc(Do),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||ho("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new Ac),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Rc(){return new cc(au.comparator)}function Dc(){return new cc(au.comparator)}var Oc={asc:"ASCENDING",desc:"DESCENDING"},Lc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Mc=d((function e(t,n){h(this,e),this.databaseId=t,this.N=n}));function Fc(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Uc(e,t){return e.N?t.toBase64():t.toUint8Array()}function Vc(e,t){return Fc(e,t.toTimestamp())}function jc(e){return mo(!!e),Fo.fromTimestamp(function(e){var t=Qo(e);return new Mo(t.seconds,t.nanos)}(e))}function qc(e,t){return function(e){return new Bo(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Bc(e){var t=Bo.fromString(e);return mo(hl(t)),t}function zc(e,t){return qc(e.databaseId,t.path)}function Wc(e,t){var n=Bc(t);if(n.get(1)!==e.databaseId.projectId)throw new wo(ko.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new wo(ko.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new au(Qc(n))}function Kc(e,t){return qc(e.databaseId,t)}function Gc(e){var t=Bc(e);return 4===t.length?Bo.emptyPath():Qc(t)}function Hc(e){return new Bo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Qc(e){return mo(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Yc(e,t,n){return{name:zc(e,t),fields:n.value.mapValue.fields}}function $c(e,t,n){var r=Wc(e,t.name),i=jc(t.updateTime),a=new Eu({mapValue:{fields:t.fields}}),o=Nu.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Xc(e,t){return"found"in t?function(e,t){mo(!!t.found),t.found.name,t.found.updateTime;var n=Wc(e,t.found.name),r=jc(t.found.updateTime),i=new Eu({mapValue:{fields:t.found.fields}});return Nu.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){mo(!!t.missing),mo(!!t.readTime);var n=Wc(e,t.missing),r=jc(t.readTime);return Nu.newNoDocument(n,r)}(e,t):yo()}function Jc(e,t){var n;if(t instanceof $s)n={update:Yc(e,t.key,t.value)};else if(t instanceof rc)n={delete:zc(e,t.key)};else if(t instanceof Xs)n={update:Yc(e,t.key,t.data),updateMask:ll(t.fieldMask)};else{if(!(t instanceof ic))return yo();n={verify:zc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Rs)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ds)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ls)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Fs)return{fieldPath:t.field.canonicalString(),increment:n.k};throw yo()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Vc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:yo()}(e,t.precondition)),n}function Zc(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Bs.updateTime(jc(e.updateTime)):void 0!==e.exists?Bs.exists(e.exists):Bs.none()}(t.currentDocument):Bs.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)mo("REQUEST_TIME"===t.setToServerValue),n=new Rs;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Ds(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Ls(i)}else"increment"in t?n=new Fs(e,t.increment):yo();var a=Wo.fromServerFormat(t.fieldPath);return new js(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Wc(e,t.update.name),a=new Eu({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Ko(t.map((function(e){return Wo.fromServerFormat(e)})))}(t.updateMask);return new Xs(i,a,o,n,r)}return new $s(i,a,n,r)}if(t.delete){var u=Wc(e,t.delete);return new rc(u,n)}if(t.verify){var s=Wc(e,t.verify);return new ic(s,n)}return yo()}function el(e,t){return{documents:[Kc(e,t.path)]}}function tl(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Kc(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Kc(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(ku(e.value))return{unaryFilter:{field:ol(e.field),op:"IS_NAN"}};if(gu(e.value))return{unaryFilter:{field:ol(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ku(e.value))return{unaryFilter:{field:ol(e.field),op:"IS_NOT_NAN"}};if(gu(e.value))return{unaryFilter:{field:ol(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ol(e.field),op:al(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:ol(e.field),direction:il(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||nu(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function nl(e){var t=Gc(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){mo(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=rl(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new rs(ul(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return nu(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new ns(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new ns(n,t)}(n.endAt)),ss(t,i,u,o,s,"F",c,l)}function rl(e){return e?void 0!==e.unaryFilter?[cl(e)]:void 0!==e.fieldFilter?[sl(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return rl(e)})).reduce((function(e,t){return e.concat(t)})):yo():[]}function il(e){return Oc[e]}function al(e){return Lc[e]}function ol(e){return{fieldPath:e.canonicalString()}}function ul(e){return Wo.fromServerFormat(e.fieldPath)}function sl(e){return Hu.create(ul(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return yo()}}(e.fieldFilter.op),e.fieldFilter.value)}function cl(e){switch(e.unaryFilter.op){case"IS_NAN":var t=ul(e.unaryFilter.field);return Hu.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=ul(e.unaryFilter.field);return Hu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ul(e.unaryFilter.field);return Hu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ul(e.unaryFilter.field);return Hu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return yo()}}function ll(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function hl(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function fl(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=pl(t)),t=dl(e.get(n),t);return pl(t)}function dl(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function pl(e){return e+"\x01\x01"}function vl(e){var t=e.length;if(mo(t>=2),2===t)return mo("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Bo.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&yo(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:yo()}a=o+2}return new Bo(r)}var yl=["userId","batchId"];function ml(e,t){return[e,fl(t)]}function gl(e,t,n){return[e,fl(t),n]}var kl={},wl=["prefixPath","collectionGroup","readTime","documentId"],bl=["prefixPath","collectionGroup","documentId"],_l=["collectionGroup","readTime","prefixPath","documentId"],xl=["canonicalId","targetId"],Il=["targetId","path"],Sl=["path","targetId"],Tl=["collectionId","parent"],El=["indexId","uid"],Cl=["uid","sequenceNumber"],Nl=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Al=["indexId","uid","orderedDocumentKey"],Pl=["userId","collectionPath","documentId"],Rl=["userId","collectionPath","largestBatchId"],Dl=["userId","collectionGroup","largestBatchId"],Ol=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Ll=[].concat(Pe(Ol),["documentOverlays"]),Ml=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fl=[].concat(Ml,["indexConfiguration","indexState","indexEntries"]),Ul="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Vl=function(){function e(){h(this,e),this.onCommittedListeners=[]}return d(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),jl=function(){function e(t){var n=this;h(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return d(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&yo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=p(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),ql=function(){function e(t,n){var r=this;h(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new bo,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new Wl(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=Yl(e.target.error);r.At.reject(new Wl(t,n))}}return d(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(ho("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"Pt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Gl(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Wl(n,t)}}}]),e}(),Bl=function(){function e(t,n,r){h(this,e),this.name=t,this.version=n,this.bt=r,12.2===e.Vt(j())&&fo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return d(e,[{key:"Nt",value:function(){var e=De(T().mark((function e(t){var n=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return ho("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Wl(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new wo(ko.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new wo(ko.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Wl(t,n))},i.onupgradeneeded=function(e){ho("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.bt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){ho("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=De(T().mark((function e(t,n,r,i){var a,o,u,s,c=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(T().mark((function e(){var n,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=ql.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.Pt(),e})).catch((function(e){return n.abort(e),jl.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,ho("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return ho("SimpleDb","Removing database:",e),Hl(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!H())return!1;if(e.St())return!0;var t=j(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),zl=function(){function e(t){h(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return d(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return Hl(this.Ft.delete())}}]),e}(),Wl=function(e){m(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this,ko.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return d(n)}(wo);function Kl(e){return"IndexedDbTransactionError"===e.name}var Gl=function(){function e(t){h(this,e),this.store=t}return d(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(ho("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(ho("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Hl(n)}},{key:"add",value:function(e){return ho("SimpleDb","ADD",this.store.name,e,e),Hl(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Hl(this.store.get(e)).next((function(n){return void 0===n&&(n=null),ho("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return ho("SimpleDb","DELETE",this.store.name,e),Hl(this.store.delete(e))}},{key:"count",value:function(){return ho("SimpleDb","COUNT",this.store.name),Hl(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new jl((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new jl((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){ho("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new jl((function(n,r){t.onerror=function(e){var t=Yl(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new jl((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new zl(i),o=t(i.primaryKey,i.value,a);if(o instanceof jl){var u=o.catch((function(e){return a.done(),jl.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return jl.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Hl(e){return new jl((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Yl(e.target.error);n(t)}}))}var Ql=!1;function Yl(e){var t=Bl.Vt(j());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new wo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ql||(Ql=!0,setTimeout((function(){throw r}),0)),r}}return e}var $l=function(e){m(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return d(n)}(Vl);function Xl(e,t){var n=go(e);return Bl.xt(n.Ht,t)}var Jl=function(){function e(t,n,r,i){h(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return d(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Ks(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=p(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Gs(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=p(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Gs(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Fo.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),_c())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Oo(this.mutations,e.mutations,(function(e,t){return Qs(e,t)}))&&Oo(this.baseMutations,e.baseMutations,(function(e,t){return Qs(e,t)}))}}]),e}(),Zl=function(){function e(t,n,r,i){h(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return d(e,null,[{key:"from",value:function(t,n,r){mo(t.mutations.length===r.length);for(var i=wc,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),eh=function(){function e(t,n){h(this,e),this.largestBatchId=t,this.mutation=n}return d(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),th=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Fo.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Fo.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Go.EMPTY_BYTE_STRING;h(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return d(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),nh=d((function e(t){h(this,e),this.Jt=t}));function rh(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ih(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:zc(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Fc(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ah(t.version)};else{if(!t.isUnknownDocument())return yo();r.unknownDocument={path:n.path.toArray(),version:ah(t.version)}}return r}function ih(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ah(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function oh(e){var t=new Mo(e.seconds,e.nanoseconds);return Fo.fromTimestamp(t)}function uh(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Zc(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Zc(e.Jt,t)})),u=Mo.fromMillis(t.localWriteTimeMs);return new Jl(t.batchId,u,n,o)}function sh(e){var t,n,r=oh(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?oh(e.lastLimboFreeSnapshotVersion):Fo.min();return void 0!==e.query.documents?(mo(1===(n=e.query).documents.length),t=ys(cs(Gc(n.documents[0])))):t=function(e){return ys(nl(e))}(e.query),new th(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Go.fromBase64String(e.resumeToken))}function ch(e,t){var n,r=ah(t.snapshotVersion),i=ah(t.lastLimboFreeSnapshotVersion);n=zu(t.target)?el(e.Jt,t.target):tl(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:qu(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function lh(e){var t=nl({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ms(t,t.limit,"L"):t}function hh(e,t){return new eh(t.largestBatchId,Zc(e.Jt,t.overlayMutation))}function fh(e,t){var n=t.path.lastSegment();return[e,fl(t.path.popLast()),n]}var dh=function(){function e(){h(this,e)}return d(e,[{key:"getBundleMetadata",value:function(e,t){return ph(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:oh(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return ph(e).put({bundleId:(n=t).id,createTime:ah(jc(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return vh(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:lh(t.bundledQuery),readTime:oh(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return vh(e).put(function(e){return{name:e.name,readTime:ah(jc(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function ph(e){return Xl(e,"bundles")}function vh(e){return Xl(e,"namedQueries")}var yh=function(){function e(t,n){h(this,e),this.M=t,this.userId=n}return d(e,[{key:"getOverlay",value:function(e,t){var n=this;return mh(e).get(fh(this.userId,t)).next((function(e){return e?hh(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new eh(t,a);i.push(r.Xt(e,o))})),jl.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(fl(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(mh(e).Qt("collectionPathOverlayIndex",i))})),jl.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=kc(),a=fl(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return mh(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=hh(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=kc(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return mh(e).Wt({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=hh(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return mh(e).put(function(e,t,n){var r=c(fh(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Jc(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function mh(e){return Xl(e,"documentOverlays")}var gh=function(){function e(){h(this,e)}return d(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Yo(e.integerValue));else if("doubleValue"in e){var n=Yo(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),ru(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue($o(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?_u(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):yo()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),au.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function kh(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function wh(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=kh(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}gh.fe=new gh;var bh=function(){function e(){h(this,e),this.buffer=new Uint8Array(1024),this.position=0}return d(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=wh(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=wh(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Pe",value:function(){this.be(255),this.be(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.be(0),this.be(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"be",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),_h=function(){function e(t){h(this,e),this.De=t}return d(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.Pe()}}]),e}(),xh=function(){function e(t){h(this,e),this.De=t}return d(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),Ih=function(){function e(){h(this,e),this.De=new bh,this.Ce=new _h(this.De),this.xe=new xh(this.De)}return d(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),Sh=function(){function e(t,n,r,i){h(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return d(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Th(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Eh(e.arrayValue,t.arrayValue))?n:0!==(n=Eh(e.directionalValue,t.directionalValue))?n:au.comparator(e.documentKey,t.documentKey)}function Eh(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Ch=function(){function e(t){h(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=p(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return d(e,[{key:"$e",value:function(e){var t=Pu(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=Ru(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=p(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),Nh=function(){function e(){h(this,e),this.qe=new Ah}return d(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),jl.resolve()}},{key:"getCollectionParents",value:function(e,t){return jl.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return jl.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return jl.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return jl.resolve(null)}},{key:"getFieldIndex",value:function(e,t){return jl.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return jl.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return jl.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return jl.resolve()}},{key:"updateIndexEntries",value:function(e,t){return jl.resolve()}}]),e}(),Ah=function(){function e(){h(this,e),this.index={}}return d(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new fc(Bo.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new fc(Bo.comparator)).toArray()}}]),e}(),Ph=new Uint8Array(0),Rh=function(){function e(t,n){h(this,e),this.user=t,this.databaseId=n,this.Ke=new Ah,this.Ge=new sc((function(e){return qu(e)}),(function(e,t){return Bu(e,t)})),this.uid=t.uid||""}return d(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:fl(i)};return Dh(e).put(a)}return jl.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Lo(t),""],!1,!0);return Dh(e).qt(r).next((function(e){var r,i=p(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(vl(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=Lh(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Lh(e),r=Mh(e),i=Oh(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Oh(e),i=!0,a=new Map;return jl.forEach(this.Qe(t),(function(t){return n.getFieldIndex(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=_c(),o=[];return jl.forEach(a,(function(i,a){var u;ho("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(qu(t)));var s=function(e,t){var n=Pu(t);if(void 0===n)return null;var r,i=p(Wu(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=p(Ru(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=p(Wu(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=p(Ru(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Ku(e,o.fieldPath,e.startAt):Gu(e,o.fieldPath,e.startAt);if(!u.value)return null;r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new ns(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=p(Ru(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Gu(e,o.fieldPath,e.endAt):Ku(e,o.fieldPath,e.endAt);if(!u.value)return null;r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new ns(r,i)}(a,i),f=n.je(i,a,l),d=n.je(i,a,h),v=n.We(i,a,c),y=n.ze(i.indexId,s,f,!!l&&l.inclusive,d,!!h&&h.inclusive,v);return jl.forEach(y,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){var n=au.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return jl.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"ze",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(null!=n?n.length:1,null!=i?i.length:1),c=s/(null!=t?t.length:1),l=[],h=function(s){var h=t?u.He(t[s/c]):Ph,f=n?u.Je(e,h,n[s%c],r):u.Ye(e),d=i?u.Xe(e,h,i[s%c],a):u.Ye(e+1);l.push.apply(l,Pe(u.createRange(f,d,o.map((function(t){return u.Je(e,h,t,!0)})))))},f=0;f<s;++f)h(f);return l}},{key:"Je",value:function(e,t,n,r){var i=new Sh(e,au.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new Sh(e,au.empty(),t,n);return r?i.ke():i}},{key:"Ye",value:function(e){return new Sh(e,au.empty(),Ph,Ph)}},{key:"getFieldIndex",value:function(e,t){var n=new Ch(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t=e.filter((function(e){return n.$e(e)}));return t.sort((function(e,t){return t.fields.length-e.fields.length})),t.length>0?t[0]:null}))}},{key:"Ze",value:function(e,t){var n,r=new Ih,i=p(Ru(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);gh.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"He",value:function(e){var t=new Ih;return gh.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new Ih;return gh.fe.Zt(vu(this.databaseId,t),n.Ne(function(e){var t=Ru(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"We",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Ih);var i,a=0,o=p(Ru(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=p(r);try{for(l.s();!(u=l.n()).done;){var h=u.value;if(this.en(t,s.fieldPath)&&mu(c))r=this.nn(r,s,c);else{var f=h.Ne(s.kind);gh.fe.Zt(c,f)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.sn(r)}},{key:"je",value:function(e,t,n){return null==n?null:this.We(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=Pe(e),a=[],o=p(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=p(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=new Ih;h.seed(l.Se()),gh.fe.Zt(s,h.Ne(t.kind)),a.push(h)}}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Hu&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Lh(e),i=Mh(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return jl.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Ou(t.sequenceNumber,new Fu(oh(t.readTime),new au(vl(t.documentKey)),t.largestBatchId)):Ou.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new Du(Wo.fromServerFormat(n),r)}));return new Au(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Do(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Lh(e),a=Mh(e);return this.rn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return jl.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:ah(r.readTime),documentKey:fl(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return jl.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?jl.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),jl.forEach(a,(function(r){return n.on(e,t,r).next((function(t){var a=n.un(i,r);return t.isEqual(a)?jl.resolve():n.an(e,i,r,t,a)}))}))}))}))}},{key:"cn",value:function(e,t,n,r){return Oh(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return Oh(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=Oh(e),i=new fc(Th);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(function(e,r){i=i.add(new Sh(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"un",value:function(e,t){var n=new fc(Th),r=this.Ze(t,e);if(null==r)return n;var i=Pu(t);if(null!=i){var a=e.data.field(i.fieldPath);if(mu(a)){var o,u=p(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Sh(t.indexId,e.key,this.He(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Sh(t.indexId,e.key,Ph,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;ho("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=pc(a),s=pc(o);u||s;){var c=!1,l=!1;if(u&&s){var h=n(u,s);h<0?l=!0:h>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=pc(o)):l?(i(u),u=pc(a)):(u=pc(a),s=pc(o))}}(r,i,Th,(function(r){o.push(a.cn(e,t,n,r))}),(function(r){o.push(a.hn(e,t,n,r))})),jl.waitFor(o)}},{key:"rn",value:function(e){var t=1;return Mh(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Th(e,t)})).filter((function(e,t,n){return!t||0!==Th(e,n[t-1])}));var r=[];r.push(e);var i,a=p(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Th(o,e),s=Th(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(h){a.e(h)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Ph,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Ph,[]]));return c}}]),e}();function Dh(e){return Xl(e,"collectionParents")}function Oh(e){return Xl(e,"indexEntries")}function Lh(e){return Xl(e,"indexConfiguration")}function Mh(e){return Xl(e,"indexState")}var Fh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Uh=function(){function e(t,n,r){h(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return d(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Vh(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){mo(1===u)})));var c,l=[],h=p(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=gl(t,f.key.path,n.batchId);a.push(i.delete(d)),l.push(f.key)}}catch(v){h.e(v)}finally{h.f()}return jl.waitFor(a).next((function(){return l}))}function jh(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw yo();t=e.noDocument}return JSON.stringify(t).length}Uh.DEFAULT_COLLECTION_PERCENTILE=10,Uh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Uh.DEFAULT=new Uh(41943040,Uh.DEFAULT_COLLECTION_PERCENTILE,Uh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Uh.DISABLED=new Uh(-1,0,0);var qh=function(){function e(t,n,r,i){h(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return d(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zh(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Wh(e),o=zh(e);return o.add({}).next((function(u){mo("number"==typeof u);var s,c=new Jl(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Jc(e.Jt,t)})),i=n.mutations.map((function(t){return Jc(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),h=[],f=new fc((function(e,t){return Do(e.canonicalString(),t.canonicalString())})),d=p(r);try{for(d.s();!(s=d.n()).done;){var v=s.value,y=gl(i.userId,v.key.path,u);f=f.add(v.key.path.popLast()),h.push(o.put(l)),h.push(a.put(y,kl))}}catch(m){d.e(m)}finally{d.f()}return f.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.ln[u]=c.keys()})),jl.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return zh(e).get(t).next((function(e){return e?(mo(e.userId===n.userId),uh(n.M,e)):null}))}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?jl.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return zh(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(mo(t.batchId>=r),a=uh(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return zh(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zh(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return uh(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=ml(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Wh(e).Wt({range:i},(function(r,i,o){var u=c(r,3),s=u[0],l=u[1],h=u[2],f=vl(l);if(s===n.userId&&t.path.isEqual(f))return zh(e).get(h).next((function(e){if(!e)throw yo();mo(e.userId===n.userId),a.push(uh(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new fc(Do),i=[];return t.forEach((function(t){var a=ml(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Wh(e).Wt({range:o},(function(e,i,a){var o=c(e,3),u=o[0],s=o[1],l=o[2],h=vl(s);u===n.userId&&t.path.isEqual(h)?r=r.add(l):a.done()}));i.push(u)})),jl.waitFor(i).next((function(){return n.dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=ml(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new fc(Do);return Wh(e).Wt({range:o},(function(e,t,a){var o=c(e,3),s=o[0],l=o[1],h=o[2],f=vl(l);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(h)):a.done()})).next((function(){return n.dn(e,u)}))}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(zh(e).get(t).next((function(e){if(null===e)throw yo();mo(e.userId===n.userId),r.push(uh(n.M,e))})))})),jl.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Vh(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n._n(t.batchId)})),jl.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return jl.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Wh(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=vl(e[1]);i.push(a)}else r.done()})).next((function(){mo(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Bh(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return Kh(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return mo(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Bh(e,t,n){var r=ml(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Wh(e).Wt({range:a,jt:!0},(function(e,n,r){var a=c(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function zh(e){return Xl(e,"mutations")}function Wh(e){return Xl(e,"documentMutations")}function Kh(e){return Xl(e,"mutationQueues")}var Gh=function(){function e(t){h(this,e),this.mn=t}return d(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),Hh=function(){function e(t,n){h(this,e),this.referenceDelegate=t,this.M=n}return d(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next((function(n){var r=new Gh(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next((function(e){return Fo.fromTimestamp(new Mo(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next((function(){return n.pn(e).next((function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Qh(e).delete(t.targetId)})).next((function(){return n.pn(e)})).next((function(t){return mo(t.targetCount>0),t.targetCount-=1,n.In(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Qh(e).Wt((function(o,u){var s=sh(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return jl.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Qh(e).Wt((function(e,n){var r=sh(n);t(r)}))}},{key:"pn",value:function(e){return Yh(e).get("targetGlobalKey").next((function(e){return mo(null!==e),e}))}},{key:"In",value:function(e,t){return Yh(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return Qh(e).put(ch(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=qu(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Qh(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=sh(n);Bu(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=$h(e);return t.forEach((function(t){var o=fl(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),jl.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=$h(e);return jl.forEach(t,(function(t){var a=fl(t.path);return jl.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=$h(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=$h(e),i=_c();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=vl(e[1]),a=new au(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=fl(t.path),r=IDBKeyRange.bound([n],[Lo(n)],!1,!0),i=0;return $h(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Qh(e).get(t).next((function(e){return e?sh(e):null}))}}]),e}();function Qh(e){return Xl(e,"targets")}function Yh(e){return Xl(e,"targetGlobal")}function $h(e){return Xl(e,"targetDocuments")}function Xh(e){return Jh.apply(this,arguments)}function Jh(){return Jh=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===ko.FAILED_PRECONDITION&&t.message===Ul){e.next=2;break}throw t;case 2:ho("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Jh.apply(this,arguments)}function Zh(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],u=a[1],s=Do(r,o);return 0===s?Do(i,u):s}var ef=function(){function e(t){h(this,e),this.An=t,this.buffer=new fc(Zh),this.Rn=0}return d(e,[{key:"Pn",value:function(){return++this.Rn}},{key:"bn",value:function(e){var t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Zh(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),tf=function(){function e(t,n){h(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return d(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;ho("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,De(T().mark((function n(){return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Kl(n.t0)){n.next=12;break}ho("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Xh(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),nf=function(){function e(t,n){h(this,e),this.Dn=t,this.params=n}return d(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return jl.resolve(Ao.A);var r=new ef(t);return this.Dn.forEachTarget(e,(function(e){return r.bn(e.sequenceNumber)})).next((function(){return n.Dn.xn(e,(function(e){return r.bn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(ho("LruGarbageCollector","Garbage collection skipped; disabled"),jl.resolve(Fh)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(ho("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Fh):n.Nn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(ho("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),lo()<=Ve.DEBUG&&ho("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),jl.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),rf=function(){function e(t,n){h(this,e),this.db=t,this.garbageCollector=function(e,t){return new nf(e,t)}(this,n)}return d(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"kn",value:function(e){var t=0;return this.xn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return af(e,n)}},{key:"removeReference",value:function(e,t,n){return af(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return af(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return Kh(e).zt((function(r){return Bh(e,r,t).next((function(e){return e&&(n=!0),jl.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,(function(o,u){if(u<=t){var s=n.On(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Fo.min()),$h(e).delete([0,fl(o.path)])}))}));i.push(s)}})).next((function(){return jl.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return af(e,t)}},{key:"Mn",value:function(e,t){var n,r=$h(e),i=Ao.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Ao.A&&t(new au(vl(n)),i),i=s,n=u):i=Ao.A})).next((function(){i!==Ao.A&&t(new au(vl(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function af(e,t){return $h(e).put(function(e,t){return{targetId:0,path:fl(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var of=function(){function e(){h(this,e),this.changes=new sc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return d(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Nu.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?jl.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),uf=function(){function e(t){h(this,e),this.M=t}return d(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return lf(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return lf(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],ih(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Fn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Nu.newInvalidDocument(t);return lf(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(hf(t))},(function(e,i){r=n.$n(t,i)})).next((function(){return r}))}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:Nu.newInvalidDocument(t)};return lf(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(hf(t))},(function(e,i){r={document:n.$n(t,i),size:jh(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=yc();return this.Ln(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Un",value:function(e,t){var n=this,r=yc(),i=new cc(au.comparator);return this.Ln(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,jh(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return jl.resolve();var r=new fc(df);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(hf(r.first()),hf(r.last())),a=r.getIterator(),o=a.getNext();return lf(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=au.fromSegments([].concat(Pe(t.prefixPath),[t.collectionGroup,t.documentId]));o&&df(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(hf(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),ih(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lf(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=yc(),i=p(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(au.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=yc(),o=ff(t,n),u=ff(t,Fu.max());return lf(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.$n(au.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new sf(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return cf(e).get("remoteDocumentGlobalKey").next((function(e){return mo(!!e),e}))}},{key:"Fn",value:function(e,t){return cf(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=$c(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=au.fromSegments(t.noDocument.path),i=oh(t.noDocument.readTime);n=Nu.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return yo();var a=au.fromSegments(t.unknownDocument.path),o=oh(t.unknownDocument.version);n=Nu.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Mo(e[0],e[1]);return Fo.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(Fo.min()))return n}return Nu.newInvalidDocument(e)}}]),e}(),sf=function(e){m(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new sc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return d(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new fc((function(e,t){return Do(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=rh(t.Kn.M,o);i=i.add(a.path.popLast());var c=jh(s);r+=c-u.size,n.push(t.Kn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=rh(t.Kn.M,o.convertToNoDocument(Fo.min()));n.push(t.Kn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Kn.updateMetadata(e,r)),jl.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(of);function cf(e){return Xl(e,"remoteDocumentGlobal")}function lf(e){return Xl(e,"remoteDocumentsV14")}function hf(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function ff(e,t){var n=t.documentKey.path.toArray();return[e,ih(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function df(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Do(n[a],r[a]))return i;return(i=Do(n.length,r.length))||((i=Do(n[n.length-2],r[r.length-2]))||Do(n[n.length-1],r[r.length-1]))}var pf=function(){function e(t){h(this,e),this.M=t}return d(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new ql("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yl,{unique:!0}),e.createObjectStore("documentMutations")}(e),vf(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=jl.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),vf(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Fo.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yl,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return jl.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Qn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Wn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Hn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Pl});t.createIndex("collectionPathOverlayIndex",Rl,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Dl,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:wl});t.createIndex("documentKeyIndex",bl),t.createIndex("collectionGroupIndex",_l)}(e)})).next((function(){return i.Jn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:El}).createIndex("sequenceNumberIndex",Cl,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Nl}).createIndex("documentKeyIndex",Al,{unique:!1})}(e)}))),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=jh(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return jl.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return jl.forEach(r,(function(r){mo(r.userId===n.userId);var i=uh(t.M,r);return Vh(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new Bo(n),o=function(e){return[0,fl(e)]}(a);r.push(t.get(o).next((function(n){return n?jl.resolve():function(n){return t.put({targetId:0,path:fl(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return jl.waitFor(r)}))}))}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Tl});var n=t.store("collectionParents"),r=new Ah,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:fl(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new Bo(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],vl(r));return i(a.popLast())}))}))}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=sh(r),a=ch(t.M,i);return n.put(a)}))}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new au(Bo.fromString(i.document.name).popFirst(5)):i.noDocument?au.fromSegments(i.noDocument.path):i.unknownDocument?au.fromSegments(i.unknownDocument.path):yo()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return jl.waitFor(r)}))}}]),e}();function vf(e){e.createObjectStore("targetDocuments",{keyPath:Il}).createIndex("documentTargetsIndex",Sl,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",xl,{unique:!0}),e.createObjectStore("targetGlobal")}var yf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",mf=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(h(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=a,this.window=o,this.document=u,this.Xn=c,this.Zn=l,this.ts=f,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new wo(ko.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new rf(this,i),this.hs=n+"main",this.M=new nh(s),this.ls=new Bl(this.hs,this.ts,new pf(this.M)),this.fs=new Hh(this.referenceDelegate,this.M),this.ds=function(e){return new uf(e)}(this.M),this._s=new dh,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===l&&fo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return d(e,[{key:"start",value:function(){var e=this;return this.gs().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new wo(ko.FAILED_PRECONDITION,yf);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.fs.getHighestSequenceNumber(t)}))})).then((function(t){e.es=new Ao(t,e.Xn)})).then((function(){e.ns=!0})).catch((function(t){return e.ls&&e.ls.close(),Promise.reject(t)}))}},{key:"Ts",value:function(e){var t=this;return this.cs=function(){var n=De(T().mark((function n(r){return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ls.Ot(function(){var t=De(T().mark((function t(n){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}}),e)})))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return kf(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Es(t).next((function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable((function(){return e.cs(!1)})))}))})).next((function(){return e.As(t)})).next((function(n){return e.isPrimary&&!n?e.Rs(t).next((function(){return!1})):!!n&&e.Ps(t).next((function(){return!0}))}))})).catch((function(t){if(Kl(t))return ho("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return ho("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable((function(){return e.cs(t)})),e.isPrimary=t}))}},{key:"Es",value:function(e){var t=this;return gf(e).get("owner").next((function(e){return jl.resolve(t.bs(e))}))}},{key:"Vs",value:function(e){return kf(e).delete(this.clientId)}},{key:"vs",value:function(){var e=De(T().mark((function e(){var t,n,r,i,a=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ss(this.us,18e5)){e.next=6;break}return this.us=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Xl(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ds(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return jl.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ws){n=p(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ws.removeItem(this.Cs(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.gs().then((function(){return e.vs()})).then((function(){return e.Is()}))}))}},{key:"bs",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?jl.resolve(!0):gf(e).get("owner").next((function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.bs(n)&&t.networkEnabled)return!0;if(!t.bs(n)){if(!n.allowTabSynchronization)throw new wo(ko.FAILED_PRECONDITION,yf);return!1}}return!(!t.networkEnabled||!t.inForeground)||kf(e).qt().next((function(e){return void 0===t.Ds(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&ho("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=De(T().mark((function e(){var t=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),e.next=7,this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new $l(e,Ao.A);return t.Rs(n).next((function(){return t.Vs(n)}))}));case 7:this.ls.close(),this.Os();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ds",value:function(e,t){var n=this;return e.filter((function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)}))}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return kf(t).qt().next((function(t){return e.Ds(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return qh.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new Rh(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return yh.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;ho("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.ts)?Fl:13===i?Ml:12===i?Ll:11===i?Ol:void yo();return this.ls.runTransaction(e,o,u,(function(i){return a=new $l(i,r.es?r.es.next():Ao.A),"readwrite-primary"===t?r.Es(a).next((function(e){return!!e||r.As(a)})).next((function(t){if(!t)throw fo("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable((function(){return r.cs(!1)})),new wo(ko.FAILED_PRECONDITION,Ul);return n(a)})).next((function(e){return r.Ps(a).next((function(){return e}))})):r.$s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e){var t=this;return gf(e).get("owner").next((function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.bs(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new wo(ko.FAILED_PRECONDITION,yf)}))}},{key:"Ps",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return gf(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=gf(e);return n.get("owner").next((function(e){return t.bs(e)?(ho("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):jl.resolve()}))}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(fo("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()}))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),!B()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return ho("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return fo("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(un){fo("Failed to set zombie client id.",un)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(un){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return Bl.vt()}}]),e}();function gf(e){return Xl(e,"owner")}function kf(e){return Xl(e,"clientMetadata")}function wf(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var bf=function(){function e(t,n,r){h(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return d(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Us(e,t,r)}))}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next((function(e){var t,r=p(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=p(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Qs",value:function(e,t,n){return function(e){return au.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):ps(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new au(t)).next((function(e){var t=gc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=gc();return this.indexManager.getCollectionParents(e,i).next((function(o){return jl.forEach(o,(function(o){var u=function(e,t){return new us(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=p(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=Nu.newInvalidDocument(s),r=r.insert(s,c)),Gs(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){bs(t,n)||(r=r.remove(e))})),r}))}}]),e}(),_f=function(){function e(t,n,r,i){h(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return d(e,null,[{key:"Ys",value:function(t,n){var r,i=_c(),a=_c(),o=p(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),xf=function(){function e(){h(this,e)}return d(e,[{key:"Xs",value:function(e){this.Zs=e}},{key:"Qs",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Fo.min())?this.ti(e,t):this.Zs.Ks(e,r).next((function(a){var o=i.ei(t,a);return(ls(t)||hs(t))&&i.ni(t.limitType,o,r,n)?i.ti(e,t):(lo()<=Ve.DEBUG&&ho("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ws(t)),i.Zs.Qs(e,t,Lu(n,-1)).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"ei",value:function(e,t){var n=new fc(xs(e));return t.forEach((function(t,r){bs(e,r)&&(n=n.add(r))})),n}},{key:"ni",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ti",value:function(e,t){return lo()<=Ve.DEBUG&&ho("QueryEngine","Using full collection scan to execute query:",ws(t)),this.Zs.Qs(e,t,Fu.min())}}]),e}(),If=function(){function e(t,n,r,i){h(this,e),this.persistence=t,this.si=n,this.M=i,this.ii=new cc(Do),this.ri=new sc((function(e){return qu(e)}),Bu),this.oi=new Map,this.ui=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.ai(r)}return d(e,[{key:"ai",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new bf(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ii)}))}}]),e}();function Sf(e,t,n,r){return new If(e,t,n,r)}function Tf(e,t){return Ef.apply(this,arguments)}function Ef(){return Ef=De(T().mark((function e(t,n){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=go(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Bs.getAllMutationBatches(e).next((function(i){return t=i,r.ai(n),r.Bs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=_c(),s=p(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,h=p(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;u=u.add(f.key)}}catch(w){h.e(w)}finally{h.f()}}}catch(w){s.e(w)}finally{s.f()}var d,v=p(n);try{for(v.s();!(d=v.n()).done;){var y=d.value;o.push(y.batchId);var m,g=p(y.mutations);try{for(g.s();!(m=g.n()).done;){var k=m.value;u=u.add(k.key)}}catch(w){g.e(w)}finally{g.f()}}}catch(w){v.e(w)}finally{v.f()}return r.ci.Ks(e,u).next((function(e){return{hi:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Ef.apply(this,arguments)}function Cf(e,t){var n=go(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=jl.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);mo(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Bs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.ci.Ks(e,r)}))}))}function Nf(e){var t=go(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.fs.getLastRemoteSnapshotVersion(e)}))}function Af(e,t){var n=go(e),r=t.snapshotVersion,i=n.ii;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.ui.newChangeBuffer({trackRemovals:!0});i=n.ii;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.fs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Go.EMPTY_BYTE_STRING,Fo.min()).withLastLimboFreeSnapshotVersion(Fo.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.fs.updateTargetData(e,c))}}));var u=yc();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Pf(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(Fo.min())){var s=n.fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return jl.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.ci.Gs(e,u)})).next((function(){return u}))})).then((function(e){return n.ii=i,e}))}function Pf(e,t,n){var r=_c();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=yc();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(Fo.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):ho("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function Rf(e,t){var n=go(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)}))}function Df(e,t){var n=go(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.fs.getTargetData(e,t).next((function(i){return i?(r=i,jl.resolve(r)):n.fs.allocateTargetId(e).next((function(i){return r=new th(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ii.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ii=n.ii.insert(e.targetId,e),n.ri.set(t,e.targetId)),e}))}function Of(e,t,n){return Lf.apply(this,arguments)}function Lf(){return Lf=De(T().mark((function e(t,n,r){var i,a,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=go(t),a=i.ii.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Kl(e.t1)){e.next=12;break}throw e.t1;case 12:ho("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ii=i.ii.remove(n),i.ri.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Lf.apply(this,arguments)}function Mf(e,t,n){var r=go(e),i=Fo.min(),a=_c();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=go(e),i=r.ri.get(n);return void 0!==i?jl.resolve(r.ii.get(i)):r.fs.getTargetData(t,n)}(r,e,ys(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.si.Qs(e,t,n?i:Fo.min(),n?a:_c())})).next((function(e){return Vf(r,_s(t),e),{documents:e,li:a}}))}))}function Ff(e,t){var n=go(e),r=go(n.fs),i=n.ii.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function Uf(e,t){var n=go(e),r=n.oi.get(t)||Fo.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.ui.getAllFromCollectionGroup(e,t,Lu(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Vf(n,t,e),e}))}function Vf(e,t,n){var r=Fo.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.oi.set(t,r)}function jf(e,t,n,r){return qf.apply(this,arguments)}function qf(){return qf=De(T().mark((function e(t,n,r,i){var a,o,u,s,c,l,h,f,d,v;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=go(t),o=_c(),u=yc(),s=p(r);try{for(s.s();!(c=s.n()).done;)l=c.value,h=n.fi(l.metadata.name),l.document&&(o=o.add(h)),(f=n.di(l)).setReadTime(n._i(l.metadata.readTime)),u=u.insert(h,f)}catch(y){s.e(y)}finally{s.f()}return d=a.ui.newChangeBuffer({trackRemovals:!0}),e.next=7,Df(a,function(e){return ys(cs(Bo.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Pf(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.fs.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.fs.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.ci.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),qf.apply(this,arguments)}function Bf(e,t){return zf.apply(this,arguments)}function zf(){return zf=De(T().mark((function e(t,n){var r,i,a,o=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:_c(),e.next=3,Df(t,ys(lh(n.bundledQuery)));case 3:return i=e.sent,a=go(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=jc(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(Go.EMPTY_BYTE_STRING,t);return a.ii=a.ii.insert(o.targetId,o),a.fs.updateTargetData(e,o).next((function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a._s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),zf.apply(this,arguments)}var Wf=function(){function e(t){h(this,e),this.M=t,this.wi=new Map,this.mi=new Map}return d(e,[{key:"getBundleMetadata",value:function(e,t){return jl.resolve(this.wi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.wi.set(t.id,{id:(n=t).id,version:n.version,createTime:jc(n.createTime)}),jl.resolve()}},{key:"getNamedQuery",value:function(e,t){return jl.resolve(this.mi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.mi.set(t.name,function(e){return{name:e.name,query:lh(e.bundledQuery),readTime:jc(e.readTime)}}(t)),jl.resolve()}}]),e}(),Kf=function(){function e(){h(this,e),this.overlays=new cc(au.comparator),this.gi=new Map}return d(e,[{key:"getOverlay",value:function(e,t){return jl.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),jl.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.gi.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.gi.delete(n)),jl.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=kc(),i=t.length+1,a=new au(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return jl.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new cc((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=kc(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=kc(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return jl.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.gi.get(r.largestBatchId).delete(n.key);this.gi.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new eh(t,n));var a=this.gi.get(t);void 0===a&&(a=_c(),this.gi.set(t,a)),this.gi.set(t,a.add(n.key))}}}]),e}(),Gf=function(){function e(){h(this,e),this.yi=new fc(Hf.pi),this.Ii=new fc(Hf.Ti)}return d(e,[{key:"isEmpty",value:function(){return this.yi.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Hf(e,t);this.yi=this.yi.add(n),this.Ii=this.Ii.add(n)}},{key:"Ei",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ai(new Hf(e,t))}},{key:"Ri",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Pi",value:function(e){var t=this,n=new au(new Bo([])),r=new Hf(n,e),i=new Hf(n,e+1),a=[];return this.Ii.forEachInRange([r,i],(function(e){t.Ai(e),a.push(e.key)})),a}},{key:"bi",value:function(){var e=this;this.yi.forEach((function(t){return e.Ai(t)}))}},{key:"Ai",value:function(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}},{key:"Vi",value:function(e){var t=new au(new Bo([])),n=new Hf(t,e),r=new Hf(t,e+1),i=_c();return this.Ii.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Hf(e,0),n=this.yi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Hf=function(){function e(t,n){h(this,e),this.key=t,this.vi=n}return d(e,null,[{key:"pi",value:function(e,t){return au.comparator(e.key,t.key)||Do(e.vi,t.vi)}},{key:"Ti",value:function(e,t){return Do(e.vi,t.vi)||au.comparator(e.key,t.key)}}]),e}(),Qf=function(){function e(t,n){h(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.Si=1,this.Di=new fc(Hf.pi)}return d(e,[{key:"checkEmpty",value:function(e){return jl.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.Si;this.Si++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var a=new Jl(i,t,n,r);this.Bs.push(a);var o,u=p(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Di=this.Di.add(new Hf(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return jl.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return jl.resolve(this.Ci(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.xi(n),i=r<0?0:r;return jl.resolve(this.Bs.length>i?this.Bs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return jl.resolve(0===this.Bs.length?-1:this.Si-1)}},{key:"getAllMutationBatches",value:function(e){return jl.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Hf(t,0),i=new Hf(t,Number.POSITIVE_INFINITY),a=[];return this.Di.forEachInRange([r,i],(function(e){var t=n.Ci(e.vi);a.push(t)})),jl.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new fc(Do);return t.forEach((function(e){var t=new Hf(e,0),i=new Hf(e,Number.POSITIVE_INFINITY);n.Di.forEachInRange([t,i],(function(e){r=r.add(e.vi)}))})),jl.resolve(this.Ni(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;au.isDocumentKey(i)||(i=i.child(""));var a=new Hf(new au(i),0),o=new fc(Do);return this.Di.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.vi)),!0)}),a),jl.resolve(this.Ni(o))}},{key:"Ni",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ci(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;mo(0===this.ki(t.batchId,"removed")),this.Bs.shift();var r=this.Di;return jl.forEach(t.mutations,(function(i){var a=new Hf(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Di=r}))}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Hf(t,0),r=this.Di.firstAfterOrEqual(n);return jl.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,jl.resolve()}},{key:"ki",value:function(e,t){return this.xi(e)}},{key:"xi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"Ci",value:function(e){var t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),Yf=function(){function e(t){h(this,e),this.Mi=t,this.docs=new cc(au.comparator),this.size=0}return d(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Mi(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return jl.resolve(n?n.document.mutableCopy():Nu.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=yc();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Nu.newInvalidDocument(e))})),jl.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=yc(),i=new au(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Uu(Mu(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return jl.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){yo()}},{key:"Oi",value:function(e,t){return jl.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new $f(this)}},{key:"getSize",value:function(e){return jl.resolve(this.size)}}]),e}(),$f=function(e){m(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this)).Kn=e,r}return d(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)})),jl.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}(of),Xf=function(){function e(t){h(this,e),this.persistence=t,this.Fi=new sc((function(e){return qu(e)}),Bu),this.lastRemoteSnapshotVersion=Fo.min(),this.highestTargetId=0,this.$i=0,this.Bi=new Gf,this.targetCount=0,this.Li=Gh.gn()}return d(e,[{key:"forEachTarget",value:function(e,t){return this.Fi.forEach((function(e,n){return t(n)})),jl.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return jl.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return jl.resolve(this.$i)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Li.next(),jl.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$i&&(this.$i=t),jl.resolve()}},{key:"Tn",value:function(e){this.Fi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Li=new Gh(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,jl.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),jl.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,jl.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Fi.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Fi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),jl.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return jl.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Fi.get(t)||null;return jl.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Bi.Ei(t,n),jl.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Bi.Ri(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),jl.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Bi.Pi(t),jl.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Bi.Vi(t);return jl.resolve(n)}},{key:"containsKey",value:function(e,t){return jl.resolve(this.Bi.containsKey(t))}}]),e}(),Jf=function(){function e(t,n){var r=this;h(this,e),this.Ui={},this.overlays={},this.es=new Ao(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new Xf(this),this.indexManager=new Nh,this.ds=new Yf((function(e){return r.referenceDelegate.qi(e)})),this.M=new nh(n),this._s=new Wf(this.M)}return d(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Kf,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ui[e.toKey()];return n||(n=new Qf(t,this.referenceDelegate),this.Ui[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;ho("MemoryPersistence","Starting transaction:",e);var i=new Zf(this.es.next());return this.referenceDelegate.Ki(),n(i).next((function(e){return r.referenceDelegate.Gi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Qi",value:function(e,t){return jl.or(Object.values(this.Ui).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Zf=function(e){m(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return d(n)}(Vl),ed=function(){function e(t){h(this,e),this.persistence=t,this.ji=new Gf,this.Wi=null}return d(e,[{key:"Hi",get:function(){if(this.Wi)return this.Wi;throw yo()}},{key:"addReference",value:function(e,t,n){return this.ji.addReference(n,t),this.Hi.delete(n.toString()),jl.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ji.removeReference(n,t),this.Hi.add(n.toString()),jl.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Hi.add(t.toString()),jl.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ji.Pi(t.targetId).forEach((function(e){return n.Hi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Hi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ki",value:function(){this.Wi=new Set}},{key:"Gi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return jl.forEach(this.Hi,(function(r){var i=au.fromPath(r);return t.Ji(e,i).next((function(e){e||n.removeEntry(i,Fo.min())}))})).next((function(){return t.Wi=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ji(e,t).next((function(e){e?n.Hi.delete(t.toString()):n.Hi.add(t.toString())}))}},{key:"qi",value:function(e){return 0}},{key:"Ji",value:function(e,t){var n=this;return jl.or([function(){return jl.resolve(n.ji.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Qi(e,t)}])}}],[{key:"zi",value:function(t){return new e(t)}}]),e}();function td(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function nd(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function rd(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var id=function(){function e(t,n,r,i){h(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return d(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Yi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new wo(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(fo("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),ad=function(){function e(t,n,r){h(this,e),this.targetId=t,this.state=n,this.error=r}return d(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Yi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new wo(i.error.code,i.error.message))),a?new e(t,i.state,r):(fo("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),od=function(){function e(t,n){h(this,e),this.clientId=t,this.activeTargetIds=n}return d(e,null,[{key:"Yi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Ic(),o=0;i&&o<r.activeTargetIds.length;++o)i=iu(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(fo("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),ud=function(){function e(t,n){h(this,e),this.clientId=t,this.onlineState=n}return d(e,null,[{key:"Yi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(fo("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),sd=function(){function e(){h(this,e),this.activeTargetIds=Ic()}return d(e,[{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"tr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Xi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),cd=function(){function e(t,n,r,i,a){h(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.er=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new cc(Do),this.started=!1,this.rr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ur=td(this.persistenceKey,this.er),this.ar=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ir=this.ir.insert(this.er,new sd),this.cr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.hr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.lr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.dr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this._r=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}return d(e,[{key:"start",value:function(){var e=De(T().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h,f=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Fs();case 2:t=e.sent,n=p(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.er){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(td(this.persistenceKey,i)))&&(o=od.Yi(i,a))&&(this.ir=this.ir.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.wr(),(u=this.storage.getItem(this.dr))&&(s=this.mr(u))&&this.gr(s),c=p(this.rr);try{for(c.s();!(l=c.n()).done;)h=l.value,this.sr(h)}catch(d){c.e(d)}finally{c.f()}this.rr=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ar,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.yr(this.ir)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ir.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.pr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.pr(e,t,n),this.Ir(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(rd(this.persistenceKey,e));if(n){var r=ad.Yi(e,n);r&&(t=r.state)}}return this.Tr.Zi(e),this.wr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Tr.tr(e),this.wr()}},{key:"isLocalQueryTarget",value:function(e){return this.Tr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(rd(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Er(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ir(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Ar(e)}},{key:"notifyBundleLoaded",value:function(e){this.Rr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return ho("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){ho("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){ho("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"sr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(ho("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ur)return void fo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(De(T().mark((function e(){var r,i,a,o,u,s,c;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Pr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Vr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.hr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Sr(a));case 16:e.next=41;break;case 18:if(!t.lr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Dr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Cr(o));case 23:e.next=41;break;case 25:if(n.key!==t.dr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.mr(n.newValue))){e.next=30;break}return e.abrupt("return",t.gr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ar){e.next=37;break}s=function(e){var t=Ao.A;if(null!=e)try{var n=JSON.parse(e);mo("number"==typeof n),t=n}catch(e){fo("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Ao.A&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t._r){e.next=41;break}return c=t.Nr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.kr(e)})));case 41:e.next=44;break;case 43:t.rr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Tr",get:function(){return this.ir.get(this.er)}},{key:"wr",value:function(){this.setItem(this.ur,this.Tr.Xi())}},{key:"pr",value:function(e,t,n){var r=new id(this.currentUser,e,t,n),i=nd(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Xi())}},{key:"Ir",value:function(e){var t=nd(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Ar",value:function(e){var t={clientId:this.er,onlineState:e};this.storage.setItem(this.dr,JSON.stringify(t))}},{key:"Er",value:function(e,t,n){var r=rd(this.persistenceKey,e),i=new ad(e,t,n);this.setItem(r,i.Xi())}},{key:"Rr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}},{key:"Pr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Vr",value:function(e,t){var n=this.Pr(e);return od.Yi(n,t)}},{key:"vr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return id.Yi(new uo(i),r,t)}},{key:"Dr",value:function(e,t){var n=this.lr.exec(e),r=Number(n[1]);return ad.Yi(r,t)}},{key:"mr",value:function(e){return ud.Yi(e)}},{key:"Nr",value:function(e){return JSON.parse(e)}},{key:"Sr",value:function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Mr(t.batchId,t.state,t.error));case 2:ho("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Cr",value:function(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.ir.insert(e,t):this.ir.remove(e),i=this.yr(this.ir),a=this.yr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Fr(o,u).then((function(){n.ir=r}))}},{key:"gr",value:function(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"yr",value:function(e){var t=Ic();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),ld=function(){function e(){h(this,e),this.$r=new sd,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return d(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.$r.Zi(e),this.Br[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Br[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.$r.tr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.$r.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Br[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.$r.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.$r.activeTargetIds.has(e)}},{key:"start",value:function(){return this.$r=new sd,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),hd=function(){function e(){h(this,e)}return d(e,[{key:"Lr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),fd=function(){function e(){var t=this;h(this,e),this.Ur=function(){return t.qr()},this.Kr=function(){return t.Gr()},this.Qr=[],this.jr()}return d(e,[{key:"Lr",value:function(e){this.Qr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}},{key:"jr",value:function(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}},{key:"qr",value:function(){ho("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=p(this.Qr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Gr",value:function(){ho("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=p(this.Qr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),dd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},pd=function(){function e(t){h(this,e),this.Wr=t.Wr,this.zr=t.zr}return d(e,[{key:"Hr",value:function(e){this.Jr=e}},{key:"Yr",value:function(e){this.Xr=e}},{key:"onMessage",value:function(e){this.Zr=e}},{key:"close",value:function(){this.zr()}},{key:"send",value:function(e){this.Wr(e)}},{key:"eo",value:function(){this.Jr()}},{key:"no",value:function(e){this.Xr(e)}},{key:"so",value:function(e){this.Zr(e)}}]),e}(),vd=function(e){m(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return d(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new ao;o.listenOnce(eo.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Za.NO_ERROR:var t=o.getResponseJson();ho("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Za.TIMEOUT:ho("Connection",'RPC "'+e+'" timed out'),a(new wo(ko.DEADLINE_EXCEEDED,"Request time out"));break;case Za.HTTP_ERROR:var n=o.getStatus();if(ho("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(ko).indexOf(t)>=0?t:ko.UNKNOWN}(r.status);a(new wo(u,r.message))}else a(new wo(ko.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new wo(ko.UNAVAILABLE,"Connection failed."));break;default:yo()}}finally{ho("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"lo",value:function(e,t,n){var r=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Xa(),a=Ja(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new ro({})),this.ao(o.initMessageHeaders,t,n),q()||W()||j().indexOf("Electron/")>=0||K()||j().indexOf("MSAppHost/")>=0||z()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");ho("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,h=new pd({Wr:function(e){l?ho("Connection","Not sending because WebChannel is closed:",e):(c||(ho("Connection","Opening WebChannel transport."),s.open(),c=!0),ho("Connection","WebChannel sending:",e),s.send(e))},zr:function(){return s.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(s,io.EventType.OPEN,(function(){l||ho("Connection","WebChannel transport opened.")})),f(s,io.EventType.CLOSE,(function(){l||(l=!0,ho("Connection","WebChannel transport closed"),h.no())})),f(s,io.EventType.ERROR,(function(e){l||(l=!0,po("Connection","WebChannel transport errored:",e),h.no(new wo(ko.UNAVAILABLE,"The operation could not be completed")))})),f(s,io.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];mo(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){ho("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=tc[e];if(void 0!==t)return uc(t)}(a),u=i.message;void 0===o&&(o=ko.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,h.no(new wo(o,u)),s.close()}else ho("Connection","WebChannel received:",n),h.so(n)}})),f(a,to.STAT_EVENT,(function(e){e.stat===no.PROXY?ho("Connection","Detected buffering proxy"):e.stat===no.NOPROXY&&ho("Connection","Detected no buffering proxy")})),setTimeout((function(){h.eo()}),0),h}}]),n}(function(){function e(t){h(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.io=n+"://"+t.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return d(e,[{key:"oo",value:function(e,t,n,r,i){var a=this.uo(e,t);ho("RestConnection","Sending: ",a,n);var o={};return this.ao(o,r,i),this.co(e,a,o,n).then((function(e){return ho("RestConnection","Received: ",e),e}),(function(t){throw po("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ho",value:function(e,t,n,r,i){return this.oo(e,t,n,r,i)}},{key:"ao",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+so,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"uo",value:function(e,t){var n=dd[e];return"".concat(this.io,"/v1/").concat(t,":").concat(n)}}]),e}());function yd(){return"undefined"!=typeof window?window:null}function md(){return"undefined"!=typeof document?document:null}function gd(e){return new Mc(e,!0)}var kd=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;h(this,e),this.Yn=t,this.timerId=n,this.fo=r,this._o=i,this.wo=a,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}return d(e,[{key:"reset",value:function(){this.mo=0}},{key:"Io",value:function(){this.mo=this.wo}},{key:"To",value:function(e){var t=this;this.cancel();var n=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,n-r);i>0&&ho("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.mo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,(function(){return t.po=Date.now(),e()})),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}},{key:"Ao",value:function(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}},{key:"cancel",value:function(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}},{key:"Eo",value:function(){return(Math.random()-.5)*this.mo}}]),e}(),wd=function(){function e(t,n,r,i,a,o,u,s){h(this,e),this.Yn=t,this.Ro=r,this.Po=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new kd(t,n)}return d(e,[{key:"Co",value:function(){return 1===this.state||5===this.state||this.xo()}},{key:"xo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.No()}},{key:"stop",value:function(){var e=De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Co(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ko",value:function(){this.state=0,this.Do.reset()}},{key:"Mo",value:function(){var e=this;this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,(function(){return e.Oo()})))}},{key:"Fo",value:function(e){this.$o(),this.stream.send(e)}},{key:"Oo",value:function(){var e=De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.xo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$o",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"Bo",value:function(){this.So&&(this.So.cancel(),this.So=null)}},{key:"close",value:function(){var e=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$o(),this.Bo(),this.Do.cancel(),this.Vo++,4!==t?this.Do.reset():n&&n.code===ko.RESOURCE_EXHAUSTED?(fo(n.toString()),fo("Using maximum backoff delay to prevent overloading the backend."),this.Do.Io()):n&&n.code===ko.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Lo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Yr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.Vo===n&&e.qo(i,a)}),(function(n){t((function(){var t=new wo(ko.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Ko(t)}))}))}},{key:"qo",value:function(e,t){var n=this,r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr((function(){r((function(){return n.state=2,n.So=n.Yn.enqueueAfterDelay(n.Po,1e4,(function(){return n.xo()&&(n.state=3),Promise.resolve()})),n.listener.Hr()}))})),this.stream.Yr((function(e){r((function(){return n.Ko(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"No",value:function(){var e=this;this.state=5,this.Do.To(De(T().mark((function t(){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Ko",value:function(e){return ho("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Uo",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget((function(){return t.Vo===e?n():(ho("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),bd=function(e){m(n,e);var t=_(n);function n(e,r,i,a,o,u){var s;return h(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).M=o,s}return d(n,[{key:"Go",value:function(e,t){return this.bo.lo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Do.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:yo()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(mo(void 0===t||"string"==typeof t),Go.fromBase64String(t||"")):(mo(void 0===t||t instanceof Uint8Array),Go.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?ko.UNKNOWN:uc(e.code);return new wo(t,e.message||"")}(o);n=new Nc(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Wc(e,s.document.name),l=jc(s.document.updateTime),h=new Eu({mapValue:{fields:s.document.fields}}),f=Nu.newFoundDocument(c,l,h),d=s.targetIds||[],p=s.removedTargetIds||[];n=new Ec(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=Wc(e,v.document),m=v.readTime?jc(v.readTime):Fo.min(),g=Nu.newNoDocument(y,m),k=v.removedTargetIds||[];n=new Ec([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=Wc(e,w.document),_=w.removedTargetIds||[];n=new Ec([],_,b,null)}else{if(!("filter"in t))return yo();t.filter;var x=t.filter;x.targetId;var I=x.count||0,S=new ac(I),T=x.targetId;n=new Cc(T,S)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Fo.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Fo.min():t.readTime?jc(t.readTime):Fo.min()}(e);return this.listener.Qo(t,n)}},{key:"jo",value:function(e){var t={};t.database=Hc(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=zu(r)?{documents:el(e,r)}:{query:tl(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Uc(e,t.resumeToken):t.snapshotVersion.compareTo(Fo.min())>0&&(n.readTime=Fc(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return yo()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Fo(t)}},{key:"Wo",value:function(e){var t={};t.database=Hc(this.M),t.removeTarget=e,this.Fo(t)}}]),n}(wd),_d=function(e){m(n,e);var t=_(n);function n(e,r,i,a,o,u){var s;return h(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).M=o,s.zo=!1,s}return d(n,[{key:"Ho",get:function(){return this.zo}},{key:"start",value:function(){this.zo=!1,this.lastStreamToken=void 0,Kt(g(n.prototype),"start",this).call(this)}},{key:"Lo",value:function(){this.zo&&this.Jo([])}},{key:"Go",value:function(e,t){return this.bo.lo("Write",e,t)}},{key:"onMessage",value:function(e){if(mo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();var t=function(e,t){return e&&e.length>0?(mo(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?jc(e.updateTime):jc(t);return n.isEqual(Fo.min())&&(n=jc(t)),new qs(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=jc(e.commitTime);return this.listener.Yo(n,t)}return mo(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}},{key:"Zo",value:function(){var e={};e.database=Hc(this.M),this.Fo(e)}},{key:"Jo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Jc(t.M,e)}))};this.Fo(n)}}]),n}(wd),xd=function(e){m(n,e);var t=_(n);function n(e,r,i,a){var o;return h(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.M=a,o.tu=!1,o}return d(n,[{key:"eu",value:function(){if(this.tu)throw new wo(ko.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"oo",value:function(e,t,n){var r=this;return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.bo.oo(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ko.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new wo(ko.UNKNOWN,e.toString())}))}},{key:"ho",value:function(e,t,n){var r=this;return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.bo.ho(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===ko.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new wo(ko.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.tu=!0}}]),n}(function(){return d((function e(){h(this,e)}))}()),Id=function(){function e(t,n){h(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}return d(e,[{key:"ru",value:function(){var e=this;0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.su=null,e.uu("Backend didn't respond within 10 seconds."),e.ou("Offline"),Promise.resolve()})))}},{key:"au",value:function(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ou("Offline")))}},{key:"set",value:function(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}},{key:"ou",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"uu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.iu?(fo(t),this.iu=!1):ho("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.su&&(this.su.cancel(),this.su=null)}}]),e}(),Sd=d((function e(t,n,r,i,a){var o=this;h(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=a,this._u.Lr((function(e){r.enqueueAndForget(De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Md(o),!e.t0){e.next=5;break}return ho("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=De(T().mark((function e(t){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=go(t)).fu.add(4),e.next=4,Cd(n);case 4:return n.wu.set("Unknown"),n.fu.delete(4),e.next=8,Td(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.wu=new Id(r,i)}));function Td(e){return Ed.apply(this,arguments)}function Ed(){return Ed=De(T().mark((function e(t){var n,r,i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Md(t)){e.next=18;break}n=p(t.du),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Ed.apply(this,arguments)}function Cd(e){return Nd.apply(this,arguments)}function Nd(){return Nd=De(T().mark((function e(t){var n,r,i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=p(t.du),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Nd.apply(this,arguments)}function Ad(e,t){var n=go(e);n.lu.has(t.targetId)||(n.lu.set(t.targetId,t),Ld(n)?Od(n):hp(n).xo()&&Rd(n,t))}function Pd(e,t){var n=go(e),r=hp(n);n.lu.delete(t),r.xo()&&Dd(n,t),0===n.lu.size&&(r.xo()?r.Mo():Md(n)&&n.wu.set("Unknown"))}function Rd(e,t){e.mu.Z(t.targetId),hp(e).jo(t)}function Dd(e,t){e.mu.Z(t),hp(e).Wo(t)}function Od(e){e.mu=new Pc({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.lu.get(t)||null}}),hp(e).start(),e.wu.ru()}function Ld(e){return Md(e)&&!hp(e).Co()&&e.lu.size>0}function Md(e){return 0===go(e).fu.size}function Fd(e){e.mu=void 0}function Ud(e){return Vd.apply(this,arguments)}function Vd(){return Vd=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.lu.forEach((function(e,n){Rd(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Vd.apply(this,arguments)}function jd(e,t){return qd.apply(this,arguments)}function qd(){return qd=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Fd(t),Ld(t)?(t.wu.au(n),Od(t)):t.wu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),qd.apply(this,arguments)}function Bd(e,t,n){return zd.apply(this,arguments)}function zd(){return zd=De(T().mark((function e(t,n,r){var i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.wu.set("Online"),!(n instanceof Nc&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=De(T().mark((function e(t,n){var r,i,a,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=p(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.lu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.lu.delete(o),t.mu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),ho("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Wd(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Ec?t.mu.ut(n):n instanceof Cc?t.mu._t(n):t.mu.ht(n),r.isEqual(Fo.min())){e.next=29;break}return e.prev=14,e.next=17,Nf(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.mu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.lu.get(r);i&&e.lu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.lu.get(t);if(n){e.lu.set(t,n.withResumeToken(Go.EMPTY_BYTE_STRING,n.snapshotVersion)),Dd(e,t);var r=new th(n.target,t,1,n.sequenceNumber);Rd(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),ho("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Wd(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),zd.apply(this,arguments)}function Wd(e,t,n){return Kd.apply(this,arguments)}function Kd(){return Kd=De(T().mark((function e(t,n,r){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Kl(n)){e.next=2;break}throw n;case 2:return t.fu.add(1),e.next=5,Cd(t);case 5:t.wu.set("Offline"),r||(r=function(){return Nf(t.localStore)}),t.asyncQueue.enqueueRetryable(De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ho("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.fu.delete(1),e.next=6,Td(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Kd.apply(this,arguments)}function Gd(e,t){return t().catch((function(n){return Wd(e,n,t)}))}function Hd(e){return Qd.apply(this,arguments)}function Qd(){return Qd=De(T().mark((function e(t){var n,r,i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=go(t),r=fp(n),i=n.hu.length>0?n.hu[n.hu.length-1].batchId:-1;case 2:if(!Yd(n)){e.next=19;break}return e.prev=3,e.next=6,Rf(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.hu.length&&r.Mo(),e.abrupt("break",19);case 10:i=a.batchId,$d(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Wd(n,e.t0);case 17:e.next=2;break;case 19:Xd(n)&&Jd(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Qd.apply(this,arguments)}function Yd(e){return Md(e)&&e.hu.length<10}function $d(e,t){e.hu.push(t);var n=fp(e);n.xo()&&n.Ho&&n.Jo(t.mutations)}function Xd(e){return Md(e)&&!fp(e).Co()&&e.hu.length>0}function Jd(e){fp(e).start()}function Zd(e){return ep.apply(this,arguments)}function ep(){return ep=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fp(t).Zo();case 1:case"end":return e.stop()}}),e)}))),ep.apply(this,arguments)}function tp(e){return np.apply(this,arguments)}function np(){return np=De(T().mark((function e(t){var n,r,i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=fp(t),r=p(t.hu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Jo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),np.apply(this,arguments)}function rp(e,t,n){return ip.apply(this,arguments)}function ip(){return ip=De(T().mark((function e(t,n,r){var i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.hu.shift(),a=Zl.from(i,n,r),e.next=3,Gd(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Hd(t);case 5:case"end":return e.stop()}}),e)}))),ip.apply(this,arguments)}function ap(e,t){return op.apply(this,arguments)}function op(){return op=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&fp(t).Ho,!e.t0){e.next=4;break}return e.next=4,function(){var e=De(T().mark((function e(t,n){var r,i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!oc(i=n.code)||i===ko.ABORTED){e.next=7;break}return r=t.hu.shift(),fp(t).ko(),e.next=5,Gd(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Hd(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Xd(t)&&Jd(t);case 5:case"end":return e.stop()}}),e)}))),op.apply(this,arguments)}function up(e,t){return sp.apply(this,arguments)}function sp(){return sp=De(T().mark((function e(t,n){var r,i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=go(t)).asyncQueue.verifyOperationInProgress(),ho("RemoteStore","RemoteStore received new credentials"),i=Md(r),r.fu.add(3),e.next=6,Cd(r);case 6:return i&&r.wu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.fu.delete(3),e.next=12,Td(r);case 12:case"end":return e.stop()}}),e)}))),sp.apply(this,arguments)}function cp(e,t){return lp.apply(this,arguments)}function lp(){return lp=De(T().mark((function e(t,n){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=go(t),!n){e.next=7;break}return r.fu.delete(2),e.next=5,Td(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.fu.add(2),e.next=12,Cd(r);case 12:r.wu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),lp.apply(this,arguments)}function hp(e){return e.gu||(e.gu=function(e,t,n){var r=go(e);return r.eu(),new bd(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Hr:Ud.bind(null,e),Yr:jd.bind(null,e),Qo:Bd.bind(null,e)}),e.du.push(function(){var t=De(T().mark((function t(n){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.gu.ko(),Ld(e)?Od(e):e.wu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.gu.stop();case 6:Fd(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}function fp(e){return e.yu||(e.yu=function(e,t,n){var r=go(e);return r.eu(),new _d(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Hr:Zd.bind(null,e),Yr:ap.bind(null,e),Xo:tp.bind(null,e),Yo:rp.bind(null,e)}),e.du.push(function(){var t=De(T().mark((function t(n){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.yu.ko(),t.next=4,Hd(e);case 4:t.next=9;break;case 6:return t.next=8,e.yu.stop();case 8:e.hu.length>0&&(ho("RemoteStore","Stopping write stream with ".concat(e.hu.length," pending writes")),e.hu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.yu}var dp=function(){function e(t,n,r,i,a){h(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new bo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return d(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new wo(ko.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function pp(e,t){if(fo("AsyncQueue","".concat(t,": ").concat(e)),Kl(e))return new wo(ko.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var vp=function(){function e(t){h(this,e),this.comparator=t?function(e,n){return t(e,n)||au.comparator(e.key,n.key)}:function(e,t){return au.comparator(e.key,t.key)},this.keyedMap=gc(),this.sortedSet=new cc(this.comparator)}return d(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),yp=function(){function e(){h(this,e),this.pu=new cc(au.comparator)}return d(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.pu.get(t);n?0!==e.type&&3===n.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==n.type?this.pu=this.pu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.pu=this.pu.remove(t):1===e.type&&2===n.type?this.pu=this.pu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):yo():this.pu=this.pu.insert(t,e)}},{key:"Iu",value:function(){var e=[];return this.pu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),mp=function(){function e(t,n,r,i,a,o,u,s){h(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return d(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gs(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,vp.emptySet(n),a,r,i,!0,!1)}}]),e}(),gp=d((function e(){h(this,e),this.Tu=void 0,this.listeners=[]})),kp=d((function e(){h(this,e),this.queries=new sc((function(e){return ks(e)}),gs),this.onlineState="Unknown",this.Eu=new Set}));function wp(e,t){return bp.apply(this,arguments)}function bp(){return bp=De(T().mark((function e(t,n){var r,i,a,o,u;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=go(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new gp),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Tu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=pp(e.t0,"Initialization of query '".concat(ws(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Au(r.onlineState),o.Tu&&n.Ru(o.Tu)&&Tp(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),bp.apply(this,arguments)}function _p(e,t){return xp.apply(this,arguments)}function xp(){return xp=De(T().mark((function e(t,n){var r,i,a,o,u;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=go(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),xp.apply(this,arguments)}function Ip(e,t){var n,r=go(e),i=!1,a=p(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=p(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Ru(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}s.Tu=o}}}catch(h){a.e(h)}finally{a.f()}i&&Tp(r)}function Sp(e,t,n){var r=go(e),i=r.queries.get(t);if(i){var a,o=p(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Tp(e){e.Eu.forEach((function(e){e.next()}))}var Ep=function(){function e(t,n,r){h(this,e),this.query=t,this.Pu=n,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}return d(e,[{key:"Ru",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=p(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new mp(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),a=!0):this.Su(e,this.onlineState)&&(this.Du(e),a=!0),this.Vu=e,a}},{key:"onError",value:function(e){this.Pu.error(e)}},{key:"Au",value:function(e){this.onlineState=e;var t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}},{key:"Su",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Cu||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Du",value:function(e){e=mp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}]),e}(),Cp=function(){function e(t,n){h(this,e),this.payload=t,this.byteLength=n}return d(e,[{key:"xu",value:function(){return"metadata"in this.payload}}]),e}(),Np=function(){function e(t){h(this,e),this.M=t}return d(e,[{key:"fi",value:function(e){return Wc(this.M,e)}},{key:"di",value:function(e){return e.metadata.exists?$c(this.M,e.document,!1):Nu.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}},{key:"_i",value:function(e){return jc(e)}}]),e}(),Ap=function(){function e(t,n,r){h(this,e),this.Nu=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Pp(t)}return d(e,[{key:"ku",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Bo.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Mu",value:function(e){var t,n=new Map,r=new Np(this.M),i=p(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.fi(a.metadata.name),s=p(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||_c()).add(u);n.set(c,l)}}catch(h){s.e(h)}finally{s.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=De(T().mark((function e(){var t,n,r,i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jf(this.localStore,new Np(this.M),this.documents,this.Nu.id);case 2:t=e.sent,n=this.Mu(this.documents),r=p(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Bf(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Ou:this.collectionGroups,Fu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Pp(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Rp=d((function e(t){h(this,e),this.key=t})),Dp=d((function e(t){h(this,e),this.key=t})),Op=function(){function e(t,n){h(this,e),this.query=t,this.$u=n,this.Bu=null,this.current=!1,this.Lu=_c(),this.mutatedKeys=_c(),this.Uu=xs(t),this.qu=new vp(this.Uu)}return d(e,[{key:"Ku",get:function(){return this.$u}},{key:"Gu",value:function(e,t){var n=this,r=t?t.Qu:new yp,i=t?t.qu:this.qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=ls(this.query)&&i.size===this.query.limit?i.last():null,c=hs(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=bs(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.ju(l,h)||(r.track({type:2,doc:h}),p=!0,(s&&n.Uu(h,s)>0||c&&n.Uu(h,c)<0)&&(u=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),ls(this.query)||hs(this.query))for(;o.size>this.query.limit;){var l=ls(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{qu:o,Qu:r,ni:u,mutatedKeys:a}}},{key:"ju",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;var a=e.Qu.Iu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yo()}};return n(e)-n(t)}(e.type,t.type)||r.Uu(e.doc,t.doc)})),this.Wu(n);var o=t?this.zu():[],u=0===this.Lu.size&&this.current?1:0,s=u!==this.Bu;return this.Bu=u,0!==a.length||s?{snapshot:new mp(this.query,e.qu,i,a,e.mutatedKeys,0===u,s,!1),Hu:o}:{Hu:o}}},{key:"Au",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new yp,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}},{key:"Ju",value:function(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}},{key:"Wu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.$u=t.$u.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.$u=t.$u.delete(e)})),this.current=e.current)}},{key:"zu",value:function(){var e=this;if(!this.current)return[];var t=this.Lu;this.Lu=_c(),this.qu.forEach((function(t){e.Ju(t.key)&&(e.Lu=e.Lu.add(t.key))}));var n=[];return t.forEach((function(t){e.Lu.has(t)||n.push(new Dp(t))})),this.Lu.forEach((function(e){t.has(e)||n.push(new Rp(e))})),n}},{key:"Yu",value:function(e){this.$u=e.li,this.Lu=_c();var t=this.Gu(e.documents);return this.applyChanges(t,!0)}},{key:"Xu",value:function(){return mp.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}]),e}(),Lp=d((function e(t,n,r){h(this,e),this.query=t,this.targetId=n,this.view=r})),Mp=d((function e(t){h(this,e),this.key=t,this.Zu=!1})),Fp=function(){function e(t,n,r,i,a,o){h(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.ta={},this.ea=new sc((function(e){return ks(e)}),gs),this.na=new Map,this.sa=new Set,this.ia=new cc(au.comparator),this.ra=new Map,this.oa=new Gf,this.ua={},this.aa=new Map,this.ca=Gh.yn(),this.onlineState="Unknown",this.ha=void 0}return d(e,[{key:"isPrimaryClient",get:function(){return!0===this.ha}}]),e}();function Up(e,t){return Vp.apply(this,arguments)}function Vp(){return Vp=De(T().mark((function e(t,n){var r,i,a,o,u,s;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Pv(t),!(o=r.ea.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Xu(),e.next=15;break;case 6:return e.next=8,Df(r.localStore,ys(n));case 8:return u=e.sent,r.isPrimaryClient&&Ad(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,jp(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Vp.apply(this,arguments)}function jp(e,t,n,r){return qp.apply(this,arguments)}function qp(){return qp=De(T().mark((function e(t,n,r,i){var a,o,u,s,c,l;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.la=function(e,n,r){return function(){var e=De(T().mark((function e(t,n,r,i){var a,o,u;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Gu(r),e.t0=a.ni,!e.t0){e.next=6;break}return e.next=5,Mf(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Gu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(uv(t,n.targetId,u.Hu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Mf(t.localStore,n,!0);case 3:return a=e.sent,o=new Op(n,a.li),u=o.Gu(a.documents),s=Tc.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),uv(t,r,c.Hu),l=new Lp(n,r,o),e.abrupt("return",(t.ea.set(n,l),t.na.has(r)?t.na.get(r).push(n):t.na.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),qp.apply(this,arguments)}function Bp(e,t){return zp.apply(this,arguments)}function zp(){return zp=De(T().mark((function e(t,n){var r,i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=go(t),i=r.ea.get(n),!((a=r.na.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.na.set(i.targetId,a.filter((function(e){return!gs(e,n)}))),void r.ea.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Of(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Pd(r.remoteStore,i.targetId),av(r,i.targetId)})).catch(Xh);case 9:e.next=14;break;case 11:return av(r,i.targetId),e.next=14,Of(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),zp.apply(this,arguments)}function Wp(e,t,n){return Kp.apply(this,arguments)}function Kp(){return Kp=De(T().mark((function e(t,n,r){var i,a,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Rv(t),e.prev=1,e.next=4,function(e,t){var n,r=go(e),i=Mo.now(),a=t.reduce((function(e,t){return e.add(t.key)}),_c());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.ci.Ks(e,a).next((function(a){n=a;var o,u=[],s=p(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Hs(c,n.get(c.key));null!=l&&u.push(new Xs(c.key,l,Cu(l.value.mapValue),Bs.exists(!0)))}}catch(h){s.e(h)}finally{s.f()}return r.Bs.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ua[e.currentUser.toKey()];r||(r=new cc(Do)),r=r.insert(t,n),e.ua[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,lv(i,a.changes);case 9:return e.next=11,Hd(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=pp(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Kp.apply(this,arguments)}function Gp(e,t){return Hp.apply(this,arguments)}function Hp(){return Hp=De(T().mark((function e(t,n){var r,i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=go(t),e.prev=1,e.next=4,Af(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ra.get(t);n&&(mo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Zu=!0:e.modifiedDocuments.size>0?mo(n.Zu):e.removedDocuments.size>0&&(mo(n.Zu),n.Zu=!1))})),e.next=8,lv(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Xh(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Hp.apply(this,arguments)}function Qp(e,t,n){var r=go(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ea.forEach((function(e,n){var r=n.view.Au(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=go(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=p(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Au(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Tp(n)}(r.eventManager,t),i.length&&r.ta.Qo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Yp(e,t,n){return $p.apply(this,arguments)}function $p(){return $p=De(T().mark((function e(t,n,r){var i,a,o,u,s,c;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=go(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ra.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new cc(au.comparator)).insert(o,Nu.newNoDocument(o,Fo.min())),s=_c().add(o),c=new Sc(Fo.min(),new Map,new fc(Do),u,s),e.next=9,Gp(i,c);case 9:i.ia=i.ia.remove(o),i.ra.delete(n),cv(i),e.next=16;break;case 14:return e.next=16,Of(i.localStore,n,!1).then((function(){return av(i,n,r)})).catch(Xh);case 16:case"end":return e.stop()}}),e)}))),$p.apply(this,arguments)}function Xp(e,t){return Jp.apply(this,arguments)}function Jp(){return Jp=De(T().mark((function e(t,n){var r,i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=go(t),i=n.batch.batchId,e.prev=1,e.next=4,Cf(r.localStore,n);case 4:return a=e.sent,iv(r,i,null),rv(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,lv(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Xh(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Jp.apply(this,arguments)}function Zp(e,t,n){return ev.apply(this,arguments)}function ev(){return ev=De(T().mark((function e(t,n,r){var i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=go(t),e.prev=1,e.next=4,function(e,t){var n=go(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Bs.lookupMutationBatch(e,t).next((function(t){return mo(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.ci.Ks(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,iv(i,n,r),rv(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,lv(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Xh(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),ev.apply(this,arguments)}function tv(e,t){return nv.apply(this,arguments)}function nv(){return nv=De(T().mark((function e(t,n){var r,i,a,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Md((r=go(t)).remoteStore)||ho("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=go(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.aa.get(i)||[]).push(n),r.aa.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=pp(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),nv.apply(this,arguments)}function rv(e,t){(e.aa.get(t)||[]).forEach((function(e){e.resolve()})),e.aa.delete(t)}function iv(e,t,n){var r=go(e),i=r.ua[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ua[r.currentUser.toKey()]=i}}function av(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=p(e.na.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ea.delete(a),n&&e.ta.fa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.na.delete(t),e.isPrimaryClient&&e.oa.Pi(t).forEach((function(t){e.oa.containsKey(t)||ov(e,t)}))}function ov(e,t){e.sa.delete(t.path.canonicalString());var n=e.ia.get(t);null!==n&&(Pd(e.remoteStore,n),e.ia=e.ia.remove(t),e.ra.delete(n),cv(e))}function uv(e,t,n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Rp?(e.oa.addReference(a.key,t),sv(e,a)):a instanceof Dp?(ho("SyncEngine","Document no longer in limbo: "+a.key),e.oa.removeReference(a.key,t),e.oa.containsKey(a.key)||ov(e,a.key)):yo()}}catch(o){i.e(o)}finally{i.f()}}function sv(e,t){var n=t.key,r=n.path.canonicalString();e.ia.get(n)||e.sa.has(r)||(ho("SyncEngine","New document in limbo: "+n),e.sa.add(r),cv(e))}function cv(e){for(;e.sa.size>0&&e.ia.size<e.maxConcurrentLimboResolutions;){var t=e.sa.values().next().value;e.sa.delete(t);var n=new au(Bo.fromString(t)),r=e.ca.next();e.ra.set(r,new Mp(n)),e.ia=e.ia.insert(n,r),Ad(e.remoteStore,new th(ys(cs(n.path)),r,2,Ao.A))}}function lv(e,t,n){return hv.apply(this,arguments)}function hv(){return hv=De(T().mark((function e(t,n,r){var i,a,o,u;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=go(t),a=[],o=[],u=[],e.t0=i.ea.isEmpty(),e.t0){e.next=9;break}return i.ea.forEach((function(e,t){u.push(i.la(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=_f.Ys(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.ta.Qo(a),e.next=9,function(){var e=De(T().mark((function e(t,n){var r,i,a,o,u,s,c,l;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=go(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return jl.forEach(n,(function(t){return jl.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return jl.forEach(t.Js,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Kl(e.t0)){e.next=10;break}throw e.t0;case 10:ho("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=p(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.ii.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.ii=r.ii.insert(u,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),hv.apply(this,arguments)}function fv(e,t){return dv.apply(this,arguments)}function dv(){return dv=De(T().mark((function e(t,n){var r,i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=go(t)).currentUser.isEqual(n)){e.next=11;break}return ho("SyncEngine","User change. New user:",n.toKey()),e.next=5,Tf(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.aa.forEach((function(e){e.forEach((function(e){e.reject(new wo(ko.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.aa.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,lv(r,i.hi);case 11:case"end":return e.stop()}}),e)}))),dv.apply(this,arguments)}function pv(e,t){var n=go(e),r=n.ra.get(t);if(r&&r.Zu)return _c().add(r.key);var i=_c(),a=n.na.get(t);if(!a)return i;var o,u=p(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ea.get(s);i=i.unionWith(c.view.Ku)}}catch(l){u.e(l)}finally{u.f()}return i}function vv(e,t){return yv.apply(this,arguments)}function yv(){return yv=De(T().mark((function e(t,n){var r,i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=go(t),e.next=3,Mf(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Yu(i),e.abrupt("return",(r.isPrimaryClient&&uv(r,n.targetId,a.Hu),a));case 6:case"end":return e.stop()}}),e)}))),yv.apply(this,arguments)}function mv(e,t){return gv.apply(this,arguments)}function gv(){return gv=De(T().mark((function e(t,n){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=go(t),e.abrupt("return",Uf(r.localStore,n).then((function(e){return lv(r,e)})));case 2:case"end":return e.stop()}}),e)}))),gv.apply(this,arguments)}function kv(e,t,n,r){return wv.apply(this,arguments)}function wv(){return wv=De(T().mark((function e(t,n,r,i){var a,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=go(t),e.next=3,function(e,t){var n=go(e),r=go(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.fn(e,t).next((function(t){return t?n.ci.Ks(e,t):jl.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Hd(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(iv(a,n,i||null),rv(a,n),function(e,t){go(go(e).Bs)._n(t)}(a.localStore,n)):yo();case 11:return e.next=13,lv(a,o);case 13:e.next=16;break;case 15:ho("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),wv.apply(this,arguments)}function bv(e,t){return _v.apply(this,arguments)}function _v(){return _v=De(T().mark((function e(t,n){var r,i,a,o,u,s,c,l;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pv(r=go(t)),Rv(r),!0!==n||!0===r.ha){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,xv(r,i.toArray());case 5:return a=e.sent,r.ha=!0,e.next=9,cp(r.remoteStore,!0);case 9:o=p(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Ad(r.remoteStore,s)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ha){e.next=25;break}return c=[],l=Promise.resolve(),r.na.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return av(r,t),Of(r.localStore,t,!0)})),Pd(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,xv(r,c);case 21:return function(e){var t=go(e);t.ra.forEach((function(e,n){Pd(t.remoteStore,n)})),t.oa.bi(),t.ra=new Map,t.ia=new cc(au.comparator)}(r),r.ha=!1,e.next=25,cp(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),_v.apply(this,arguments)}function xv(e,t,n){return Iv.apply(this,arguments)}function Iv(){return Iv=De(T().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f,d,v,y,m,g;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=go(t),a=[],o=[],u=p(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(h=i.na.get(c))||0===h.length){e.next=34;break}return e.next=11,Df(i.localStore,ys(h[0]));case 11:l=e.sent,f=p(h),e.prev=13,f.s();case 15:if((d=f.n()).done){e.next=24;break}return v=d.value,y=i.ea.get(v),e.next=20,vv(i,y);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Ff(i.localStore,c);case 36:return g=e.sent,e.next=39,Df(i.localStore,g);case 39:return l=e.sent,e.next=42,jp(i,Sv(g),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.ta.Qo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Iv.apply(this,arguments)}function Sv(e){return ss(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Tv(e){var t=go(e);return go(go(t.localStore).persistence).Fs()}function Ev(e,t,n,r){return Cv.apply(this,arguments)}function Cv(){return Cv=De(T().mark((function e(t,n,r,i){var a,o,u,s;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=go(t)).ha){e.next=3;break}return e.abrupt("return",void ho("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.na.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Uf(a.localStore,_s(o[0]));case 10:return u=e.sent,s=Sc.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,lv(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Of(a.localStore,n,!0);case 17:return av(a,n,i),e.abrupt("break",20);case 19:yo();case 20:case"end":return e.stop()}}),e)}))),Cv.apply(this,arguments)}function Nv(e,t,n){return Av.apply(this,arguments)}function Av(){return Av=De(T().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Pv(t)).ha){e.next=45;break}a=p(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.na.has(u)){e.next=10;break}return ho("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Ff(i.localStore,u);case 12:return s=e.sent,e.next=15,Df(i.localStore,s);case 15:return c=e.sent,e.next=18,jp(i,Sv(s),c.targetId,!1);case 18:Ad(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=p(r),e.prev=30,f=T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.na.has(t),!e.t0){e.next=5;break}return e.next=5,Of(i.localStore,t,!1).then((function(){Pd(i.remoteStore,t),av(i,t)})).catch(Xh);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(f(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Av.apply(this,arguments)}function Pv(e){var t=go(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Gp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=pv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Yp.bind(null,t),t.ta.Qo=Ip.bind(null,t.eventManager),t.ta.fa=Sp.bind(null,t.eventManager),t}function Rv(e){var t=go(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Xp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Zp.bind(null,t),t}function Dv(e,t,n){var r=go(e);(function(){var e=De(T().mark((function e(t,n,r){var i,a,o,u,s;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=go(e),r=jc(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n._s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Pp(i)),a=new Ap(i,t.localStore,n.M),e.next=15,n.da();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.ku(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.da();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,lv(t,s.Fu,void 0);case 31:return e.next=33,function(e,t){var n=go(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n._s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Ou));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(po("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Ov=function(){function e(){h(this,e),this.synchronizeTabs=!1}return d(e,[{key:"initialize",value:function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=gd(t.databaseInfo.databaseId),this.sharedClientState=this._a(t),this.persistence=this.wa(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.ma(t),this.localStore=this.ga(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ma",value:function(e){return null}},{key:"ga",value:function(e){return Sf(this.persistence,new xf,e.initialUser,this.M)}},{key:"wa",value:function(e){return new Jf(ed.zi,this.M)}},{key:"_a",value:function(e){return new ld}},{key:"terminate",value:function(){var e=De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Lv=function(e){m(n,e);var t=_(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).ya=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return d(n,[{key:"initialize",value:function(){var e=De(T().mark((function e(t){var r=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kt(g(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.ya.initialize(this,t);case 4:return e.next=6,Rv(this.ya.syncEngine);case 6:return e.next=8,Hd(this.ya.remoteStore);case 8:return e.next=10,this.persistence.Ts((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ga",value:function(e){return Sf(this.persistence,new xf,e.initialUser,this.M)}},{key:"ma",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new tf(t,e.asyncQueue)}},{key:"wa",value:function(e){var t=wf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Uh.withCacheSize(this.cacheSizeBytes):Uh.DEFAULT;return new mf(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,yd(),md(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"_a",value:function(e){return new ld}}]),n}(Ov),Mv=function(e){m(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,r,!1)).ya=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return d(n,[{key:"initialize",value:function(){var e=De(T().mark((function e(t){var r,i=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kt(g(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ya.syncEngine,e.t0=this.sharedClientState instanceof cd,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Mr:kv.bind(null,r),Or:Ev.bind(null,r),Fr:Nv.bind(null,r),Fs:Tv.bind(null,r),kr:mv.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ts(function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bv(i.ya.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_a",value:function(e){var t=yd();if(!cd.vt(t))throw new wo(ko.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=wf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new cd(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Lv),Fv=function(){function e(){h(this,e)}return d(e,[{key:"initialize",value:function(){var e=De(T().mark((function e(t,n){var r=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Qp(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=fv.bind(null,this.syncEngine),e.next=12,cp(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new kp}},{key:"createDatastore",value:function(e){var t,n=gd(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new vd(t));return function(e,t,n,r){return new xd(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Qp(o.syncEngine,e,0)},a=fd.vt()?new fd:new hd,new Sd(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Fp(e,t,n,r,i,a);return o&&(u.ha=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=De(T().mark((function e(t){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=go(t),ho("RemoteStore","RemoteStore shutting down."),n.fu.add(5),e.next=5,Cd(n);case 5:n._u.shutdown(),n.wu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Uv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return De(T().mark((function r(){var i;return T().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Vv=function(){function e(t){h(this,e),this.observer=t,this.muted=!1}return d(e,[{key:"next",value:function(e){this.observer.next&&this.pa(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Ia",value:function(){this.muted=!0}},{key:"pa",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),jv=function(){function e(t,n){var r=this;h(this,e),this.Ta=t,this.M=n,this.metadata=new bo,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then((function(e){e&&e.xu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return d(e,[{key:"close",value:function(){return this.Ta.cancel()}},{key:"getMetadata",value:function(){var e=De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"da",value:function(){var e=De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Aa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Aa",value:function(){var e=De(T().mark((function e(){var t,n,r,i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ra();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ea.decode(t),r=Number(n),isNaN(r)&&this.Pa("length string (".concat(n,") is not valid number")),e.next=9,this.ba(r);case 9:return i=e.sent,e.abrupt("return",new Cp(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Va",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ra",value:function(){var e=De(T().mark((function e(){var t,n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Va()<0)){e.next=7;break}return e.next=3,this.va();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Va())<0&&this.Pa("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(){var e=De(T().mark((function e(t){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.va();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pa("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ea.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pa",value:function(e){throw this.Ta.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"va",value:function(){var e=De(T().mark((function e(){var t,n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ta.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),qv=function(){function e(t){h(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return d(e,[{key:"lookup",value:function(){var e=De(T().mark((function e(t){var n,r=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new wo(ko.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=De(T().mark((function e(t,n){var r,i,a,o,u,s;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=go(t),i=Hc(r.M)+"/documents",a={documents:n.map((function(e){return zc(r.M,e)}))},e.next=5,r.ho("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Xc(r.M,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());mo(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new rc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=De(T().mark((function e(){var t,n=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=au.fromPath(t);n.mutations.push(new ic(r,n.precondition(r)))})),e.next=7,function(){var e=De(T().mark((function e(t,n){var r,i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=go(t),i=Hc(r.M)+"/documents",a={writes:n.map((function(e){return Jc(r.M,e)}))},e.next=3,r.oo("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw yo();t=Fo.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new wo(ko.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Bs.updateTime(t):Bs.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Fo.min()))throw new wo(ko.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bs.updateTime(t)}return Bs.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Bv=function(){function e(t,n,r,i){h(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.Sa=5,this.Do=new kd(this.asyncQueue,"transaction_retry")}return d(e,[{key:"run",value:function(){this.Sa-=1,this.Da()}},{key:"Da",value:function(){var e=this;this.Do.To(De(T().mark((function t(){var n,r;return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new qv(e.datastore),(r=e.Ca(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.xa(t)}))}))})).catch((function(t){e.xa(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Ca",value:function(e){try{var t=this.updateFunction(e);return!nu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"xa",value:function(e){var t=this;this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Da(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Na",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!oc(t)}return!1}}]),e}(),zv=function(){function e(t,n,r,i){var a=this;h(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=uo.UNAUTHENTICATED,this.clientId=Ro.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ho("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return ho("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return d(e,[{key:"getConfiguration",value:function(){var e=De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new wo(ko.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new bo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(De(T().mark((function n(){var r;return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=pp(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Wv(e,t){return Kv.apply(this,arguments)}function Kv(){return Kv=De(T().mark((function e(t,n){var r,i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),ho("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Tf(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Kv.apply(this,arguments)}function Gv(e,t){return Hv.apply(this,arguments)}function Hv(){return Hv=De(T().mark((function e(t,n){var r,i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Qv(t);case 3:return r=e.sent,ho("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return up(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return up(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Hv.apply(this,arguments)}function Qv(e){return Yv.apply(this,arguments)}function Yv(){return Yv=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return ho("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Wv(t,new Ov);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),Yv.apply(this,arguments)}function $v(e){return Xv.apply(this,arguments)}function Xv(){return Xv=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return ho("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Gv(t,new Fv);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Xv.apply(this,arguments)}function Jv(e){return Qv(e).then((function(e){return e.persistence}))}function Zv(e){return Qv(e).then((function(e){return e.localStore}))}function ey(e){return $v(e).then((function(e){return e.remoteStore}))}function ty(e){return $v(e).then((function(e){return e.syncEngine}))}function ny(e){return ry.apply(this,arguments)}function ry(){return ry=De(T().mark((function e(t){var n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$v(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Up.bind(null,n.syncEngine),r.onUnlisten=Bp.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),ry.apply(this,arguments)}function iy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new bo;return e.asyncQueue.enqueueAndForget(De(T().mark((function i(){return T().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Vv({next:function(a){t.enqueueAndForget((function(){return _p(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new wo(ko.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new wo(ko.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Ep(cs(n.path),a,{includeMetadataChanges:!0,Cu:!0});return wp(e,o)},i.next=3,ny(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function ay(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new bo;return e.asyncQueue.enqueueAndForget(De(T().mark((function i(){return T().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Vv({next:function(n){t.enqueueAndForget((function(){return _p(e,o)})),n.fromCache&&"server"===r.source?i.reject(new wo(ko.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Ep(n,a,{includeMetadataChanges:!0,Cu:!0});return wp(e,o)},i.next=3,ny(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var oy=new Map;function uy(e,t,n){if(!n)throw new wo(ko.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function sy(e,t,n,r){if(!0===t&&!0===r)throw new wo(ko.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function cy(e){if(!au.isDocumentKey(e))throw new wo(ko.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ly(e){if(au.isDocumentKey(e))throw new wo(ko.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function hy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":yo()}function fy(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new wo(ko.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=hy(e);throw new wo(ko.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function dy(e,t){if(t<=0)throw new wo(ko.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var py=function(){function e(t){var n;if(h(this,e),void 0===t.host){if(void 0!==t.ssl)throw new wo(ko.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new wo(ko.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,sy("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return d(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),vy=function(){function e(t,n,r){h(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new py({}),this._settingsFrozen=!1,t instanceof tu?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new wo(ko.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tu(e.options.projectId)}(t))}return d(e,[{key:"app",get:function(){if(!this._app)throw new wo(ko.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new wo(ko.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new py(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new xo;switch(e.type){case"gapi":var t=e.client;return mo(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Eo(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new wo(ko.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=oy.get(e);t&&(ho("ComponentProvider","Removing Datastore"),oy.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function yy(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=fy(e,vy))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&po("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=uo.MOCK_USER;else{o=V(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new wo(ko.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new uo(s)}e._authCredentials=new Io(new _o(o,u))}}var my=function(){function e(t,n,r){h(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return d(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new ky(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),gy=function(){function e(t,n,r){h(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return d(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),ky=function(e){m(n,e);var t=_(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this,e,r,cs(i)))._path=i,a.type="collection",a}return d(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new my(this.firestore,null,new au(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(gy);function wy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=xe(e),uy("collection","path",t),e instanceof vy){var a=Bo.fromString.apply(Bo,[t].concat(r));return ly(a),new ky(e,null,a)}if(!(e instanceof my||e instanceof ky))throw new wo(ko.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Bo.fromString.apply(Bo,[t].concat(r)));return ly(o),new ky(e.firestore,null,o)}function by(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=xe(e),1===arguments.length&&(t=Ro.R()),uy("doc","path",t),e instanceof vy){var a=Bo.fromString.apply(Bo,[t].concat(r));return cy(a),new my(e,null,new au(a))}if(!(e instanceof my||e instanceof ky))throw new wo(ko.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Bo.fromString.apply(Bo,[t].concat(r)));return cy(o),new my(e.firestore,e instanceof ky?e.converter:null,new au(o))}function _y(e,t){return e=xe(e),t=xe(t),(e instanceof my||e instanceof ky)&&(t instanceof my||t instanceof ky)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function xy(e,t){return e=xe(e),t=xe(t),e instanceof gy&&t instanceof gy&&e.firestore===t.firestore&&gs(e._query,t._query)&&e.converter===t.converter}var Iy=function(){function e(){var t=this;h(this,e),this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new kd(this,"async_queue_retry"),this.qa=function(){var e=md();e&&ho("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Do.Ao()};var n=md();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.qa)}return d(e,[{key:"isShuttingDown",get:function(){return this.Oa}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Ka(),this.Ga(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;var t=md();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.Ka(),this.Oa)return new Promise((function(){}));var n=new bo;return this.Ga((function(){return t.Oa&&t.La?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Ma.push(e),t.Qa()}))}},{key:"Qa",value:function(){var e=De(T().mark((function e(){var t=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Ma.length){e.next=14;break}return e.prev=1,e.next=4,this.Ma[0]();case 4:this.Ma.shift(),this.Do.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Kl(e.t0)){e.next=12;break}throw e.t0;case 12:ho("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Ma.length>0&&this.Do.To((function(){return t.Qa()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Ga",value:function(e){var t=this,n=this.ka.then((function(){return t.Ba=!0,e().catch((function(e){t.$a=e,t.Ba=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw fo("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ba=!1,e}))}));return this.ka=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);var i=dp.createAndSchedule(this,e,t,n,(function(e){return r.ja(e)}));return this.Fa.push(i),i}},{key:"Ka",value:function(){this.$a&&yo()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Wa",value:function(){var e=De(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.ka,e.next=3,t;case 3:if(t!==this.ka){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"za",value:function(e){var t,n=p(this.Fa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Ha",value:function(e){var t=this;return this.Wa().then((function(){t.Fa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=p(t.Fa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Wa()}))}},{key:"Ja",value:function(e){this.Ua.push(e)}},{key:"ja",value:function(e){var t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}]),e}();function Sy(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=p(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Ty=function(){function e(){h(this,e),this._progressObserver={},this._taskCompletionResolver=new bo,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return d(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Ey=function(e){m(n,e);var t=_(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new Iy,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return d(n,[{key:"_terminate",value:function(){return this._firestoreClient||Ny(this),this._firestoreClient.terminate()}}]),n}(vy);function Cy(e){return e._firestoreClient||Ny(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Ny(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new eu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new zv(e._authCredentials,e._appCheckCredentials,e._queue,r)}function Ay(e,t,n){var r=new bo;return e.asyncQueue.enqueue(De(T().mark((function i(){return T().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Wv(e,n);case 3:return i.next=5,Gv(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===ko.FAILED_PRECONDITION||e.code===ko.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Py(e){return function(e){return e.asyncQueue.enqueue(De(T().mark((function t(){var n,r;return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Jv(e);case 2:return n=t.sent,t.next=5,ey(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=go(e);return t.fu.delete(0),Td(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Cy(e=fy(e,Ey)))}function Ry(e){return function(e){return e.asyncQueue.enqueue(De(T().mark((function t(){var n,r;return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Jv(e);case 2:return n=t.sent,t.next=5,ey(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=De(T().mark((function e(t){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=go(t)).fu.add(0),e.next=4,Cd(n);case 4:n.wu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Cy(e=fy(e,Ey)))}function Dy(e,t){var n=Cy(e=fy(e,Ey)),r=new Ty;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new jv(e,t)}(function(e,t){if(e instanceof Uint8Array)return Uv(e,t);if(e instanceof ArrayBuffer)return Uv(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,gd(t));e.asyncQueue.enqueueAndForget(De(T().mark((function t(){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Dv,t.next=3,ty(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Oy(e,t){return function(e,t){return e.asyncQueue.enqueue(De(T().mark((function n(){return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=go(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n._s.getNamedQuery(e,t)}))},n.next=3,Zv(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Cy(e=fy(e,Ey)),t).then((function(t){return t?new gy(e,null,t.query):null}))}function Ly(e){if(e._initialized||e._terminated)throw new wo(ko.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var My=function(){function e(){h(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new wo(ko.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wo(n)}return d(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Fy=function(){function e(t){h(this,e),this._byteString=t}return d(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Go.fromBase64String(t))}catch(t){throw new wo(ko.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Go.fromUint8Array(t))}}]),e}(),Uy=d((function e(t){h(this,e),this._methodName=t})),Vy=function(){function e(t,n){if(h(this,e),!isFinite(t)||t<-90||t>90)throw new wo(ko.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new wo(ko.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return d(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Do(this._lat,e._lat)||Do(this._long,e._long)}}]),e}(),jy=/^__.*__$/,qy=function(){function e(t,n,r){h(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return d(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Xs(e,this.data,this.fieldMask,t,this.fieldTransforms):new $s(e,this.data,t,this.fieldTransforms)}}]),e}(),By=function(){function e(t,n,r){h(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return d(e,[{key:"toMutation",value:function(e,t){return new Xs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function zy(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yo()}}var Wy=function(){function e(t,n,r,i,a,o){h(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ya(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return d(e,[{key:"path",get:function(){return this.settings.path}},{key:"Xa",get:function(){return this.settings.Xa}},{key:"Za",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"tc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Za({path:n,ec:!1});return r.nc(e),r}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Za({path:n,ec:!1});return r.Ya(),r}},{key:"ic",value:function(e){return this.Za({path:void 0,ec:!0})}},{key:"rc",value:function(e){return lm(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Ya",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.nc(this.path.get(e))}},{key:"nc",value:function(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(zy(this.Xa)&&jy.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}]),e}(),Ky=function(){function e(t,n,r){h(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||gd(t)}return d(e,[{key:"ac",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Wy({Xa:e,methodName:t,uc:n,path:Wo.emptyPath(),ec:!1,oc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function Gy(e){var t=e._freezeSettings(),n=gd(e._databaseId);return new Ky(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Hy(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ac(a.merge||a.mergeFields?2:0,t,n,i);om("Data must be an object, but it was:",o,r);var u,s,c=im(r,o);if(a.merge)u=new Ko(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=p(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=l.value,v=um(t,d,n);if(!o.contains(v))throw new wo(ko.INVALID_ARGUMENT,"Field '".concat(v,"' is specified in your field mask but missing from your input data."));hm(h,v)||h.push(v)}}catch(y){f.e(y)}finally{f.f()}u=new Ko(h),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new qy(new Eu(c),u,s)}var Qy=function(e){m(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return d(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Xa)throw 1===e.Xa?e.rc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.rc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Uy);function Yy(e,t,n){return new Wy({Xa:3,uc:t.settings.uc,methodName:e._methodName,ec:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var $y=function(e){m(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return d(n,[{key:"_toFieldTransform",value:function(e){return new js(e.path,new Rs)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Uy),Xy=function(e){m(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e)).cc=r,i}return d(n,[{key:"_toFieldTransform",value:function(e){var t=Yy(this,e,!0),n=this.cc.map((function(e){return rm(e,t)})),r=new Ds(n);return new js(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Uy),Jy=function(e){m(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e)).cc=r,i}return d(n,[{key:"_toFieldTransform",value:function(e){var t=Yy(this,e,!0),n=this.cc.map((function(e){return rm(e,t)})),r=new Ls(n);return new js(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Uy),Zy=function(e){m(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e)).hc=r,i}return d(n,[{key:"_toFieldTransform",value:function(e){var t=new Fs(e.M,Es(e.M,this.hc));return new js(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Uy);function em(e,t,n,r){var i=e.ac(1,t,n);om("Data must be an object, but it was:",i,r);var a=[],o=Eu.empty();Vo(r,(function(e,r){var u=cm(t,e,n);r=xe(r);var s=i.sc(u);if(r instanceof Qy)a.push(u);else{var c=rm(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Ko(a);return new By(o,u,i.fieldTransforms)}function tm(e,t,n,r,i,a){var o=e.ac(1,t,n),u=[um(t,r,n)],s=[i];if(a.length%2!=0)throw new wo(ko.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(um(t,a[c])),s.push(a[c+1]);for(var l=[],h=Eu.empty(),f=u.length-1;f>=0;--f)if(!hm(l,u[f])){var d=u[f],p=s[f];p=xe(p);var v=o.sc(d);if(p instanceof Qy)l.push(d);else{var y=rm(p,v);null!=y&&(l.push(d),h.set(d,y))}}var m=new Ko(l);return new By(h,m,o.fieldTransforms)}function nm(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return rm(n,e.ac(r?4:3,t))}function rm(e,t){if(am(e=xe(e)))return om("Unsupported field value:",t,e),im(e,t);if(e instanceof Uy)return function(e,t){if(!zy(t.Xa))throw t.rc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.rc("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ec&&4!==t.Xa)throw t.rc("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=p(e);try{for(a.s();!(n=a.n()).done;){var o=rm(n.value,t.ic(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=xe(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Es(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Mo.fromDate(e);return{timestampValue:Fc(t.M,n)}}if(e instanceof Mo){var r=new Mo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Fc(t.M,r)}}if(e instanceof Vy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Fy)return{bytesValue:Uc(t.M,e._byteString)};if(e instanceof my){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.rc("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:qc(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.rc("Unsupported field value: ".concat(hy(e)))}(e,t)}function im(e,t){var n={};return jo(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Vo(e,(function(e,r){var i=rm(r,t.tc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function am(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Mo||e instanceof Vy||e instanceof Fy||e instanceof my||e instanceof Uy)}function om(e,t,n){if(!am(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=hy(n);throw"an object"===r?t.rc(e+" a custom object"):t.rc(e+" "+r)}}function um(e,t,n){if((t=xe(t))instanceof My)return t._internalPath;if("string"==typeof t)return cm(e,t);throw lm("Field path arguments must be of type string or ",e,!1,void 0,n)}var sm=new RegExp("[~\\*/\\[\\]]");function cm(e,t,n){if(t.search(sm)>=0)throw lm("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return x(My,Pe(t.split(".")))._internalPath}catch(r){throw lm("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function lm(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new wo(ko.INVALID_ARGUMENT,u+e+s)}function hm(e,t){return e.some((function(e){return e.isEqual(t)}))}var fm=function(){function e(t,n,r,i,a){h(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return d(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new my(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new dm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(pm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),dm=function(e){m(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return d(n,[{key:"data",value:function(){return Kt(g(n.prototype),"data",this).call(this)}}]),n}(fm);function pm(e,t){return"string"==typeof t?cm(e,t):t instanceof My?t._internalPath:t._delegate._internalPath}var vm=function(){function e(t,n){h(this,e),this.hasPendingWrites=t,this.fromCache=n}return d(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),ym=function(e){m(n,e);var t=_(n);function n(e,r,i,a,o,u){var s;return h(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return d(n,[{key:"exists",value:function(){return Kt(g(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new mm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(pm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(fm),mm=function(e){m(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return d(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Kt(g(n.prototype),"data",this).call(this,e)}}]),n}(ym),gm=function(){function e(t,n,r,i){h(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new vm(i.hasPendingWrites,i.fromCache),this.query=r}return d(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new mm(n._firestore,n._userDataWriter,r.key,r,new vm(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new wo(ko.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new mm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new vm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new mm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new vm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:km(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function km(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yo()}}function wm(e,t){return e instanceof ym&&t instanceof ym?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof gm&&t instanceof gm&&e._firestore===t._firestore&&xy(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function bm(e){if(hs(e)&&0===e.explicitOrderBy.length)throw new wo(ko.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var _m=d((function e(){h(this,e)}));function xm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var Im=function(e){m(n,e);var t=_(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).lc=e,a.fc=r,a.dc=i,a.type="where",a}return d(n,[{key:"_apply",value:function(e){var t=Gy(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new wo(ko.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Lm(o,a);var s,c=[],l=p(o);try{for(l.s();!(s=l.n()).done;){var h=s.value;c.push(Om(r,e,h))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=Om(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Lm(o,a),u=nm(n,"where",o,"in"===a||"not-in"===a);var f=Hu.create(i,a,u);return function(e,t){if(t.S()){var n=ds(e);if(null!==n&&!n.isEqual(t.field))throw new wo(ko.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=fs(e);null!==r&&Mm(e,t.field,r)}var i=function(e,t){var n,r=p(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new wo(ko.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new wo(ko.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,f),f}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new gy(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new us(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(_m);var Sm=function(e){m(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this)).lc=e,i._c=r,i.type="orderBy",i}return d(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new wo(ko.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new wo(ko.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new rs(t,n);return function(e,t){if(null===fs(e)){var n=ds(e);null!==n&&Mm(e,n,t.field)}}(e,r),r}(e._query,this.lc,this._c);return new gy(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new us(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(_m);var Tm=function(e){m(n,e);var t=_(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).type=e,a.wc=r,a.mc=i,a}return d(n,[{key:"_apply",value:function(e){return new gy(e.firestore,e.converter,ms(e._query,this.wc,this.mc))}}]),n}(_m);var Em=function(e){m(n,e);var t=_(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).type=e,a.gc=r,a.yc=i,a}return d(n,[{key:"_apply",value:function(e){var t=Dm(e,this.type,this.gc,this.yc);return new gy(e.firestore,e.converter,function(e,t){return new us(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(_m);function Cm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Em("startAt",t,!0)}function Nm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Em("startAfter",t,!1)}var Am=function(e){m(n,e);var t=_(n);function n(e,r,i){var a;return h(this,n),(a=t.call(this)).type=e,a.gc=r,a.yc=i,a}return d(n,[{key:"_apply",value:function(e){var t=Dm(e,this.type,this.gc,this.yc);return new gy(e.firestore,e.converter,function(e,t){return new us(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(_m);function Pm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Am("endBefore",t,!1)}function Rm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Am("endAt",t,!0)}function Dm(e,t,n,r){if(n[0]=xe(n[0]),n[0]instanceof fm)return function(e,t,n,r,i){if(!r)throw new wo(ko.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=p(vs(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(vu(t,r.key));else{var c=r.data.field(s.field);if(Xo(c))throw new wo(ko.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new wo(ko.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){u.e(h)}finally{u.f()}return new ns(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Gy(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new wo(ko.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new wo(ko.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!ps(e)&&-1!==c.indexOf("/"))throw new wo(ko.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Bo.fromString(c));if(!au.isDocumentKey(l))throw new wo(ko.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new au(l);u.push(vu(t,h))}else{var f=nm(n,r,c);u.push(f)}}return new ns(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Om(e,t,n){if("string"==typeof(n=xe(n))){if(""===n)throw new wo(ko.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ps(t)&&-1!==n.indexOf("/"))throw new wo(ko.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Bo.fromString(n));if(!au.isDocumentKey(r))throw new wo(ko.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return vu(e,new au(r))}if(n instanceof my)return vu(e,n._key);throw new wo(ko.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(hy(n),"."))}function Lm(e,t){if(!Array.isArray(e)||0===e.length)throw new wo(ko.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new wo(ko.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Mm(e,t,n){if(!n.isEqual(t))throw new wo(ko.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Fm=function(){function e(){h(this,e)}return d(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(su(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yo(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($o(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw yo()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Vo(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Vy(Yo(e.latitude),Yo(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Jo(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Zo(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Qo(e);return new Mo(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Bo.fromString(e);mo(hl(n));var r=new tu(n.get(1),n.get(3)),i=new au(n.popFirst(5));return r.isEqual(t)||fo("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Um(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Vm=function(e){m(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this)).firestore=e,r}return d(n,[{key:"convertBytes",value:function(e){return new Fy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new my(this.firestore,null,t)}}]),n}(Fm),jm=function(){function e(t,n){h(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Gy(t)}return d(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=qm(e,this._firestore),i=Um(r.converter,t,n),a=Hy(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Bs.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=qm(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=xe(t))||t instanceof My?tm(this._dataReader,"WriteBatch.update",i._key,t,n,o):em(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Bs.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=qm(e,this._firestore);return this._mutations=this._mutations.concat(new rc(t._key,Bs.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new wo(ko.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function qm(e,t){if((e=xe(e)).firestore!==t)throw new wo(ko.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Bm=function(e){m(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this)).firestore=e,r}return d(n,[{key:"convertBytes",value:function(e){return new Fy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new my(this.firestore,null,t)}}]),n}(Fm);function zm(e){e=fy(e,my);var t=fy(e.firestore,Ey),n=Cy(t),r=new Bm(t);return function(e,t){var n=new bo;return e.asyncQueue.enqueueAndForget(De(T().mark((function r(){return T().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=De(T().mark((function e(t,n,r){var i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=go(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.ci.Ls(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new wo(ko.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=pp(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Zv(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new ym(t,r,e._key,n,new vm(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Wm(e){e=fy(e,gy);var t=fy(e.firestore,Ey),n=Cy(t),r=new Bm(t);return function(e,t){var n=new bo;return e.asyncQueue.enqueueAndForget(De(T().mark((function r(){return T().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=De(T().mark((function e(t,n,r){var i,a,o,u,s;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Mf(t,n,!0);case 3:i=e.sent,a=new Op(n,i.li),o=a.Gu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=pp(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Zv(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new gm(t,r,e,n)}))}function Km(e,t,n){e=fy(e,my);var r=fy(e.firestore,Ey),i=Um(e.converter,t,n);return Ym(r,[Hy(Gy(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Bs.none())])}function Gm(e,t,n){e=fy(e,my);for(var r=fy(e.firestore,Ey),i=Gy(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Ym(r,[("string"==typeof(t=xe(t))||t instanceof My?tm(i,"updateDoc",e._key,t,n,o):em(i,"updateDoc",e._key,t)).toMutation(e._key,Bs.exists(!0))])}function Hm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=xe(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||Sy(n[s])||(u=n[s],s++);var c,l,h,f={includeMetadataChanges:u.includeMetadataChanges};if(Sy(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof my)l=fy(e.firestore,Ey),h=cs(e._key.path),c={next:function(t){n[s]&&n[s]($m(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=fy(e,gy);l=fy(p.firestore,Ey),h=p._query;var v=new Bm(l);c={next:function(e){n[s]&&n[s](new gm(l,v,p,e))},error:n[s+1],complete:n[s+2]},bm(e._query)}return function(e,t,n,r){var i=new Vv(r),a=new Ep(t,i,n);return e.asyncQueue.enqueueAndForget(De(T().mark((function t(){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=wp,t.next=3,ny(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Ia(),e.asyncQueue.enqueueAndForget(De(T().mark((function t(){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=_p,t.next=3,ny(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Cy(l),h,f,c)}function Qm(e,t){return function(e,t){var n=new Vv(t);return e.asyncQueue.enqueueAndForget(De(T().mark((function t(){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){go(e).Eu.add(t),t.next()},t.next=3,ny(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Ia(),e.asyncQueue.enqueueAndForget(De(T().mark((function t(){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){go(e).Eu.delete(t)},t.next=3,ny(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Cy(e=fy(e,Ey)),Sy(t)?t:{next:t})}function Ym(e,t){return function(e,t){var n=new bo;return e.asyncQueue.enqueueAndForget(De(T().mark((function r(){return T().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Wp,r.next=3,ty(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Cy(e),t)}function $m(e,t,n){var r=n.docs.get(t._key),i=new Bm(e);return new ym(e,i,t._key,r,new vm(n.hasPendingWrites,n.fromCache),t.converter)}var Xm=function(e){m(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,r))._firestore=e,i}return d(n,[{key:"get",value:function(e){var t=this,r=qm(e,this._firestore),i=new Bm(this._firestore);return Kt(g(n.prototype),"get",this).call(this,e).then((function(e){return new ym(t._firestore,i,r._key,e._document,new vm(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){h(this,e),this._firestore=t,this._transaction=n,this._dataReader=Gy(t)}return d(e,[{key:"get",value:function(e){var t=this,n=qm(e,this._firestore),r=new Vm(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return yo();var i=e[0];if(i.isFoundDocument())return new fm(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new fm(t._firestore,r,n._key,null,n.converter);throw yo()}))}},{key:"set",value:function(e,t,n){var r=qm(e,this._firestore),i=Um(r.converter,t,n),a=Hy(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=qm(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=xe(t))||t instanceof My?tm(this._dataReader,"Transaction.update",i._key,t,n,o):em(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=qm(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Jm(e,t){return function(e,t){var n=new bo;return e.asyncQueue.enqueueAndForget(De(T().mark((function r(){var i;return T().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return $v(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new Bv(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(Cy(e=fy(e,Ey)),(function(n){return t(new Xm(e,n))}))}function Zm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Xy("arrayUnion",t)}function eg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Jy("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){so=e}(ft),at(new Oe("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new Ey(i,new So(e.getProvider("auth-internal")),new No(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),gt(oo,"3.4.8",e),gt(oo,"3.4.8","esm2017")}();function tg(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new wo("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function ng(){if("undefined"===typeof Uint8Array)throw new wo("unimplemented","Uint8Arrays are not available in this environment.")}function rg(){if("undefined"==typeof atob)throw new wo("unimplemented","Blobs are unavailable in Firestore in this environment.")}var ig=function(){function e(t){h(this,e),this._delegate=t}return d(e,[{key:"toBase64",value:function(){return rg(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return ng(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return rg(),new e(Fy.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return ng(),new e(Fy.fromUint8Array(t))}}]),e}();function ag(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=p(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var og=function(){function e(){h(this,e)}return d(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Ly(e=fy(e,Ey));var n=Cy(e),r=e._freezeSettings(),i=new Fv;return Ay(n,i,new Lv(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Ly(e=fy(e,Ey));var t=Cy(e),n=e._freezeSettings(),r=new Fv;return Ay(t,r,new Mv(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new wo(ko.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new bo;return e._queue.enqueueAndForgetEvenWhileRestricted(De(T().mark((function n(){return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=De(T().mark((function e(t){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Bl.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Bl.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(wf(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),ug=function(){function e(t,n,r){var i=this;h(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof tu||(this._appCompat=t)}return d(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||po("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};yy(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Py(this._delegate)}},{key:"disableNetwork",value:function(){return Ry(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&sy("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new bo;return e.asyncQueue.enqueueAndForget(De(T().mark((function n(){return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=tv,n.next=3,ty(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Cy(e=fy(e,Ey)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Qm(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new wo("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new bg(this,wy(this._delegate,e))}catch(t){throw dg(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new fg(this,by(this._delegate,e))}catch(t){throw dg(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new gg(this,function(e,t){if(e=fy(e,vy),uy("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new wo(ko.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new gy(e,null,function(e){return new us(Bo.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw dg(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return Jm(this._delegate,(function(n){return e(new cg(t,n))}))}},{key:"batch",value:function(){var e=this;return Cy(this._delegate),new lg(new jm(this._delegate,(function(t){return Ym(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Dy(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Oy(this._delegate,e).then((function(e){return e?new gg(t,e):null}))}}]),e}(),sg=function(e){m(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this)).firestore=e,r}return d(n,[{key:"convertBytes",value:function(e){return new ig(new Fy(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return fg.forKey(t,this.firestore,null)}}]),n}(Fm);var cg=function(){function e(t,n){h(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new sg(t)}return d(e,[{key:"get",value:function(e){var t=this,n=_g(e);return this._delegate.get(n).then((function(e){return new yg(t._firestore,new ym(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=_g(e);return n?(tg("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=_g(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=_g(e);return this._delegate.delete(t),this}}]),e}(),lg=function(){function e(t){h(this,e),this._delegate=t}return d(e,[{key:"set",value:function(e,t,n){var r=_g(e);return n?(tg("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=_g(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=_g(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),hg=function(){function e(t,n,r){h(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return d(e,[{key:"fromFirestore",value:function(e,t){var n=new mm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new mg(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new sg(t),n),i.set(n,a)),a}}]),e}();hg.INSTANCES=new WeakMap;var fg=function(){function e(t,n){h(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new sg(t)}return d(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new bg(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new bg(this.firestore,wy(this._delegate,e))}catch(t){throw dg(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=xe(e))instanceof my&&_y(this._delegate,e)}},{key:"set",value:function(e,t){t=tg("DocumentReference.set",t);try{return t?Km(this._delegate,e,t):Km(this._delegate,e)}catch(n){throw dg(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Gm(this._delegate,e):Gm.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw dg(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return Ym(fy(e.firestore,Ey),[new rc(e._key,Bs.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=pg(n),a=vg(n,(function(t){return new yg(e.firestore,new ym(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Hm(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?zm(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=fy(e,my);var t=fy(e.firestore,Ey);return iy(Cy(t),e._key,{source:"server"}).then((function(n){return $m(t,e,n)}))}(this._delegate):function(e){e=fy(e,my);var t=fy(e.firestore,Ey);return iy(Cy(t),e._key).then((function(n){return $m(t,e,n)}))}(this._delegate),t.then((function(e){return new yg(n.firestore,new ym(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(hg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new wo("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new my(n._delegate,r,new au(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new my(n._delegate,r,t))}}]),e}();function dg(e,t,n){return e.message=e.message.replace(t,n),e}function pg(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!ag(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function vg(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=ag(e[0])?e[0]:ag(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var yg=function(){function e(t,n){h(this,e),this._firestore=t,this._delegate=n}return d(e,[{key:"ref",get:function(){return new fg(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return wm(this._delegate,e._delegate)}}]),e}(),mg=function(e){m(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return d(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||yo()}(void 0!==t),t}}]),n}(yg),gg=function(){function e(t,n){h(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new sg(t)}return d(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,xm(this._delegate,function(e,t,n){var r=t,i=pm("where",e);return new Im(i,r,n)}(t,n,r)))}catch(i){throw dg(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,xm(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=pm("orderBy",e);return new Sm(n,t)}(t,n)))}catch(r){throw dg(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,xm(this._delegate,function(e){return dy("limit",e),new Tm("limit",e,"F")}(t)))}catch(n){throw dg(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,xm(this._delegate,function(e){return dy("limitToLast",e),new Tm("limitToLast",e,"L")}(t)))}catch(n){throw dg(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,xm(this._delegate,Cm.apply(void 0,arguments)))}catch(t){throw dg(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,xm(this._delegate,Nm.apply(void 0,arguments)))}catch(t){throw dg(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,xm(this._delegate,Pm.apply(void 0,arguments)))}catch(t){throw dg(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,xm(this._delegate,Rm.apply(void 0,arguments)))}catch(t){throw dg(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return xy(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Wm(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=fy(e,gy);var t=fy(e.firestore,Ey),n=Cy(t),r=new Bm(t);return ay(n,e._query,{source:"server"}).then((function(n){return new gm(t,r,e,n)}))}(this._delegate):function(e){e=fy(e,gy);var t=fy(e.firestore,Ey),n=Cy(t),r=new Bm(t);return bm(e._query),ay(n,e._query).then((function(n){return new gm(t,r,e,n)}))}(this._delegate),t.then((function(e){return new wg(n.firestore,new gm(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=pg(n),a=vg(n,(function(t){return new wg(e.firestore,new gm(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Hm(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(hg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),kg=function(){function e(t,n){h(this,e),this._firestore=t,this._delegate=n}return d(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new mg(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),wg=function(){function e(t,n){h(this,e),this._firestore=t,this._delegate=n}return d(e,[{key:"query",get:function(){return new gg(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new mg(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new kg(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new mg(n._firestore,r))}))}},{key:"isEqual",value:function(e){return wm(this._delegate,e._delegate)}}]),e}(),bg=function(e){m(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return d(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new fg(this.firestore,e):null}},{key:"doc",value:function(e){try{return new fg(this.firestore,void 0===e?by(this._delegate):by(this._delegate,e))}catch(t){throw dg(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=fy(e.firestore,Ey),r=by(e),i=Um(e.converter,t);return Ym(n,[Hy(Gy(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Bs.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new fg(t.firestore,e)}))}},{key:"isEqual",value:function(e){return _y(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(hg.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(gg);function _g(e){return fy(e,my)}var xg,Ig=function(){function e(){h(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=x(My,n)}return d(e,[{key:"isEqual",value:function(e){return(e=xe(e))instanceof My&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Wo.keyField().canonicalString())}}]),e}(),Sg=function(){function e(t){h(this,e),this._delegate=t}return d(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new $y("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Qy("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Zm.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=eg.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Zy("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Tg={Firestore:ug,GeoPoint:Vy,Timestamp:Mo,Blob:ig,Transaction:cg,WriteBatch:lg,DocumentReference:fg,DocumentSnapshot:yg,Query:gg,QueryDocumentSnapshot:mg,QuerySnapshot:wg,CollectionReference:bg,FieldPath:Ig,FieldValue:Sg,setLogLevel:function(e){!function(e){co.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new Oe("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Tg)))})(xg=Bt,(function(e,t){return new ug(e,t,new og)})),xg.registerVersion("@firebase/firestore-compat","0.1.17");function Eg(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Cg;Object.create;var Ng="facebook.com",Ag="github.com",Pg="google.com",Rg="password",Dg="twitter.com",Og="EMAIL_SIGNIN",Lg="PASSWORD_RESET",Mg="RECOVER_EMAIL",Fg="REVERT_SECOND_FACTOR_ADDITION",Ug="VERIFY_AND_CHANGE_EMAIL",Vg="VERIFY_EMAIL";function jg(){return l({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var qg=function(){var e;return l(e={},"admin-restricted-operation","This operation is restricted to administrators only."),l(e,"argument-error",""),l(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),l(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),l(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),l(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),l(e,"cordova-not-ready","Cordova framework is not ready."),l(e,"cors-unsupported","This browser is not supported."),l(e,"credential-already-in-use","This credential is already associated with a different user account."),l(e,"custom-token-mismatch","The custom token corresponds to a different audience."),l(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),l(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),l(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),l(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),l(e,"email-already-in-use","The email address is already in use by another account."),l(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),l(e,"expired-action-code","The action code has expired."),l(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),l(e,"internal-error","An internal AuthError has occurred."),l(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),l(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),l(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),l(e,"invalid-auth-event","An internal AuthError has occurred."),l(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),l(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),l(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),l(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),l(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),l(e,"invalid-email","The email address is badly formatted."),l(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),l(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),l(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),l(e,"invalid-credential","The supplied auth credential is malformed or has expired."),l(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),l(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),l(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),l(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),l(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),l(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),l(e,"wrong-password","The password is invalid or the user does not have a password."),l(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),l(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),l(e,"invalid-provider-id","The specified provider ID is invalid."),l(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),l(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),l(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),l(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),l(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),l(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),l(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),l(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),l(e,"missing-continue-uri","A continue URL must be provided in the request."),l(e,"missing-iframe-start","An internal AuthError has occurred."),l(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),l(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),l(e,"missing-multi-factor-info","No second factor identifier is provided."),l(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),l(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),l(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),l(e,"app-deleted","This instance of FirebaseApp has been deleted."),l(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),l(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),l(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),l(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),l(e,"no-auth-event","An internal AuthError has occurred."),l(e,"no-such-provider","User was not linked to an account with the given provider."),l(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),l(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),l(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),l(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),l(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),l(e,"provider-already-linked","User can only be linked to one identity for the given provider."),l(e,"quota-exceeded","The project's quota for this operation has been exceeded."),l(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),l(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),l(e,"rejected-credential","The request contains malformed or mismatching credentials."),l(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),l(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),l(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),l(e,"timeout","The operation has timed out."),l(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),l(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),l(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),l(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),l(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),l(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),l(e,"unverified-email","The operation requires a verified email."),l(e,"user-cancelled","The user did not grant your application the permissions it requested."),l(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),l(e,"user-disabled","The user account has been disabled by an administrator."),l(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),l(e,"user-signed-out",""),l(e,"weak-password","The password must be 6 characters long or more."),l(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),l(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Bg=jg,zg=new X("auth","Firebase",jg()),Wg=new Qe("@firebase/auth");function Kg(e){if(Wg.logLevel<=Ve.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Wg.error.apply(Wg,["Auth (".concat(ft,"): ").concat(e)].concat(n))}}function Gg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw $g.apply(void 0,[e].concat(n))}function Hg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $g.apply(void 0,[e].concat(n))}function Qg(e,t,n){var r=Object.assign(Object.assign({},Bg()),l({},t,n));return new X("auth","Firebase",r).create(t,{appName:e.name})}function Yg(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Gg(e,"argument-error"),Qg(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function $g(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Pe(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Pe(o)))}return zg.create.apply(zg,[e].concat(n))}function Xg(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw $g.apply(void 0,[t].concat(r))}}function Jg(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Kg(t),new Error(t)}function Zg(e,t){e||Jg(t)}var ek=new Map;function tk(e){Zg(e instanceof Function,"Expected a class definition");var t=ek.get(e);return t?(Zg(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ek.set(e,t),t)}function nk(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function rk(){return"http:"===ik()||"https:"===ik()}function ik(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var ak=function(){function e(t,n){h(this,e),this.shortDelay=t,this.longDelay=n,Zg(n>t,"Short delay should be less than long delay!"),this.isMobile=q()||W()}return d(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(rk()||z()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function ok(e,t){Zg(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var uk=function(){function e(){h(this,e)}return d(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Jg("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Jg("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Jg("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),sk=(l(Cg={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),l(Cg,"MISSING_CUSTOM_TOKEN","internal-error"),l(Cg,"INVALID_IDENTIFIER","invalid-email"),l(Cg,"MISSING_CONTINUE_URI","internal-error"),l(Cg,"INVALID_PASSWORD","wrong-password"),l(Cg,"MISSING_PASSWORD","internal-error"),l(Cg,"EMAIL_EXISTS","email-already-in-use"),l(Cg,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),l(Cg,"INVALID_IDP_RESPONSE","invalid-credential"),l(Cg,"INVALID_PENDING_TOKEN","invalid-credential"),l(Cg,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),l(Cg,"MISSING_REQ_TYPE","internal-error"),l(Cg,"EMAIL_NOT_FOUND","user-not-found"),l(Cg,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),l(Cg,"EXPIRED_OOB_CODE","expired-action-code"),l(Cg,"INVALID_OOB_CODE","invalid-action-code"),l(Cg,"MISSING_OOB_CODE","internal-error"),l(Cg,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),l(Cg,"INVALID_ID_TOKEN","invalid-user-token"),l(Cg,"TOKEN_EXPIRED","user-token-expired"),l(Cg,"USER_NOT_FOUND","user-token-expired"),l(Cg,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),l(Cg,"INVALID_CODE","invalid-verification-code"),l(Cg,"INVALID_SESSION_INFO","invalid-verification-id"),l(Cg,"INVALID_TEMPORARY_PROOF","invalid-credential"),l(Cg,"MISSING_SESSION_INFO","missing-verification-id"),l(Cg,"SESSION_EXPIRED","code-expired"),l(Cg,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),l(Cg,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),l(Cg,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),l(Cg,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),l(Cg,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),l(Cg,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),l(Cg,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),l(Cg,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),l(Cg,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),l(Cg,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),l(Cg,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Cg),ck=new ak(3e4,6e4);function lk(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function hk(e,t,n,r){return fk.apply(this,arguments)}function fk(){return fk=De(T().mark((function e(t,n,r,i){var a,o=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",dk(t,a,De(T().mark((function e(){var a,o,u,s;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=ce(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",uk.fetch()(mk(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),fk.apply(this,arguments)}function dk(e,t,n){return pk.apply(this,arguments)}function pk(){return pk=De(T().mark((function e(t,n,r){var i,a,o,u,s,l,h,f,d,p;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},sk),n),e.prev=2,a=new gk(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw kk(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,l=s.split(" : "),h=c(l,2),f=h[0],d=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw kk(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=25;break}throw kk(t,"email-already-in-use",u);case 25:if(p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=30;break}throw Qg(t,p,d);case 30:Gg(t,p);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof $)){e.next=37;break}throw e.t0;case 37:Gg(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])}))),pk.apply(this,arguments)}function vk(e,t,n,r){return yk.apply(this,arguments)}function yk(){return yk=De(T().mark((function e(t,n,r,i){var a,o,u=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,hk(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Gg(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),yk.apply(this,arguments)}function mk(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?ok(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var gk=function(){function e(t){var n=this;h(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Hg(n.auth,"network-request-failed"))}),ck.get())}))}return d(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function kk(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Hg(e,t,r);return i.customData._tokenResponse=n,i}function wk(e,t){return bk.apply(this,arguments)}function bk(){return bk=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hk(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),bk.apply(this,arguments)}function _k(e,t){return xk.apply(this,arguments)}function xk(){return xk=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hk(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),xk.apply(this,arguments)}function Ik(e,t){return Sk.apply(this,arguments)}function Sk(){return Sk=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hk(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Sk.apply(this,arguments)}function Tk(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Ek(){return Ek=De(T().mark((function e(t){var n,r,i,a,o,u,s=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=xe(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Xg((a=Nk(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Tk(Ck(a.auth_time)),issuedAtTime:Tk(Ck(a.iat)),expirationTime:Tk(Ck(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Ek.apply(this,arguments)}function Ck(e){return 1e3*Number(e)}function Nk(e){var t=c(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Kg("JWT malformed, contained fewer than 3 sections"),null;try{var a=M(r);return a?JSON.parse(a):(Kg("Failed to decode base64 JWT payload"),null)}catch(o){return Kg("Caught error parsing JWT payload as JSON",o),null}}function Ak(e,t){return Pk.apply(this,arguments)}function Pk(){return Pk=De(T().mark((function e(t,n){var r=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof $&&Rk(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Pk.apply(this,arguments)}function Rk(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Dk=function(){function e(t){h(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return d(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(De(T().mark((function t(){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ok=function(){function e(t,n){h(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return d(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Tk(this.lastLoginAt),this.creationTime=Tk(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Lk(e){return Mk.apply(this,arguments)}function Mk(){return Mk=De(T().mark((function e(t){var n,r,i,a,o,u,s,c,l,h,f;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Ak(t,Ik(r,{idToken:i}));case 6:Xg(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Vk(o.providerUserInfo):[],s=Uk(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Ok(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),Mk.apply(this,arguments)}function Fk(){return(Fk=De(T().mark((function e(t){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=xe(t),e.next=3,Lk(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uk(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Pe(n),Pe(t))}function Vk(e){return e.map((function(e){var t=e.providerId,n=Eg(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function jk(e,t){return qk.apply(this,arguments)}function qk(){return qk=De(T().mark((function e(t,n){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dk(t,{},De(T().mark((function e(){var r,i,a,o,u,s;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ce({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=mk(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",uk.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),qk.apply(this,arguments)}var Bk=function(){function e(){h(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return d(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Xg(e.idToken,"internal-error"),Xg("undefined"!==typeof e.idToken,"internal-error"),Xg("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Nk(e);return Xg(t,"internal-error"),Xg("undefined"!==typeof t.exp,"internal-error"),Xg("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=De(T().mark((function e(t){var n,r=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Xg(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=De(T().mark((function e(t,n){var r,i,a,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jk(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Jg("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Xg("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Xg("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Xg("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function zk(e,t){Xg("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Wk=function(){function e(t){h(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Eg(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Pe(a.providerData):[],this.metadata=new Ok(a.createdAt||void 0,a.lastLoginAt||void 0)}return d(e,[{key:"getIdToken",value:function(){var e=De(T().mark((function e(t){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ak(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Xg(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Ek.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Fk.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Xg(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Xg(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=De(T().mark((function e(t){var n,r,i=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Lk(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=De(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Ak(this,wk(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;Xg(k&&x,t,"internal-error");var I=Bk.fromJSON(this.name,x);Xg("string"===typeof k,t,"internal-error"),zk(h,t.name),zk(f,t.name),Xg("boolean"===typeof w,t,"internal-error"),Xg("boolean"===typeof b,t,"internal-error"),zk(d,t.name),zk(p,t.name),zk(v,t.name),zk(y,t.name),zk(m,t.name),zk(g,t.name);var S=new e({uid:k,auth:t,email:f,emailVerified:w,displayName:h,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(S.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(S._redirectEventId=y),S}},{key:"_fromIdTokenResponse",value:function(){var t=De(T().mark((function t(n,r){var i,a,o,u=arguments;return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Bk).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Lk(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Kk=function(){function e(){h(this,e),this.type="NONE",this.storage={}}return d(e,[{key:"_isAvailable",value:function(){var e=De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=De(T().mark((function e(t){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Kk.type="NONE";var Gk=Kk;function Hk(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Qk=function(){function e(t,n,r){h(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Hk(this.userKey,a.apiKey,o),this.fullPersistenceKey=Hk("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return d(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=De(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Wk._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=De(T().mark((function e(t){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=De(T().mark((function t(n,r){var i,a,o,u,s,c,l,h,f,d,v,y=arguments;return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=y.length>2&&void 0!==y[2]?y[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(tk(Gk),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||tk(Gk),u=Hk(i,n.config.apiKey,n.name),s=null,c=p(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(u);case 17:if(!(f=t.sent)){t.next=23;break}return d=Wk._fromJSON(n,f),h!==o&&(s=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(v=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&v.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=v[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Yk(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Zk(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if($k(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(tw(t))return"Blackberry";if(nw(t))return"Webos";if(Xk(t))return"Safari";if((t.includes("chrome/")||Jk(t))&&!t.includes("edge/"))return"Chrome";if(ew(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function $k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/firefox\//i.test(e)}function Xk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Jk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/crios\//i.test(e)}function Zk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/iemobile/i.test(e)}function ew(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/android/i.test(e)}function tw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/blackberry/i.test(e)}function nw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/webos/i.test(e)}function rw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/iphone|ipad|ipod/i.test(e)}function iw(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return rw(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function aw(){return K()&&10===document.documentMode}function ow(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return rw(e)||ew(e)||nw(e)||tw(e)||/windows phone/i.test(e)||Zk(e)}function uw(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Yk(j());break;case"Worker":t="".concat(Yk(j()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(ft,"/").concat(r)}var sw=function(){function e(t,n,r){h(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lw(this),this.idTokenSubscription=new lw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zg,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return d(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=tk(t)),this._initializationPromise=this.queue(De(T().mark((function r(){var i,a;return T().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Qk.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=De(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=De(T().mark((function e(t){var n,r,i,a,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return Xg(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=De(T().mark((function e(t){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Lk(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=De(T().mark((function e(t){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?xe(t):null)&&Xg(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=De(T().mark((function e(t){var n=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&Xg(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(De(T().mark((function n(){return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(tk(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new X("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=De(T().mark((function e(t,n){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=De(T().mark((function e(t){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Xg(n=t&&tk(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Qk.create(this,[tk(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=De(T().mark((function e(t){var n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=De(T().mark((function e(t){var n=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Xg(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Xg(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uw(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=De(T().mark((function e(){var t,n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function cw(e){return xe(e)}var lw=function(){function e(t){var n=this;h(this,e),this.auth=t,this.observer=null,this.addObserver=de((function(e){return n.observer=e}))}return d(e,[{key:"next",get:function(){return Xg(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function hw(e,t,n){var r=cw(e);Xg(r._canInitEmulator,r,"emulator-config-failed"),Xg(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=fw(t),o=function(e){var t=fw(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:dw(r.substr(a.length+1))}}var o=c(r.split(":"),2);return{host:o[0],port:dw(o[1])}}(t),u=o.host,s=o.port,l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function fw(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function dw(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var pw=function(){function e(t,n){h(this,e),this.providerId=t,this.signInMethod=n}return d(e,[{key:"toJSON",value:function(){return Jg("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Jg("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Jg("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Jg("not implemented")}}]),e}();function vw(e,t){return yw.apply(this,arguments)}function yw(){return yw=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hk(t,"POST","/v1/accounts:resetPassword",lk(t,n)));case 1:case"end":return e.stop()}}),e)}))),yw.apply(this,arguments)}function mw(e,t){return gw.apply(this,arguments)}function gw(){return gw=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hk(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),gw.apply(this,arguments)}function kw(e,t){return ww.apply(this,arguments)}function ww(){return ww=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hk(t,"POST","/v1/accounts:update",lk(t,n)));case 1:case"end":return e.stop()}}),e)}))),ww.apply(this,arguments)}function bw(e,t){return _w.apply(this,arguments)}function _w(){return _w=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vk(t,"POST","/v1/accounts:signInWithPassword",lk(t,n)));case 1:case"end":return e.stop()}}),e)}))),_w.apply(this,arguments)}function xw(e,t){return Iw.apply(this,arguments)}function Iw(){return Iw=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hk(t,"POST","/v1/accounts:sendOobCode",lk(t,n)));case 1:case"end":return e.stop()}}),e)}))),Iw.apply(this,arguments)}function Sw(e,t){return Tw.apply(this,arguments)}function Tw(){return Tw=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xw(t,n));case 1:case"end":return e.stop()}}),e)}))),Tw.apply(this,arguments)}function Ew(e,t){return Cw.apply(this,arguments)}function Cw(){return Cw=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xw(t,n));case 1:case"end":return e.stop()}}),e)}))),Cw.apply(this,arguments)}function Nw(e,t){return Aw.apply(this,arguments)}function Aw(){return Aw=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xw(t,n));case 1:case"end":return e.stop()}}),e)}))),Aw.apply(this,arguments)}function Pw(e,t){return Rw.apply(this,arguments)}function Rw(){return Rw=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xw(t,n));case 1:case"end":return e.stop()}}),e)}))),Rw.apply(this,arguments)}function Dw(e,t){return Ow.apply(this,arguments)}function Ow(){return Ow=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vk(t,"POST","/v1/accounts:signInWithEmailLink",lk(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ow.apply(this,arguments)}function Lw(e,t){return Mw.apply(this,arguments)}function Mw(){return Mw=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vk(t,"POST","/v1/accounts:signInWithEmailLink",lk(t,n)));case 1:case"end":return e.stop()}}),e)}))),Mw.apply(this,arguments)}var Fw=function(e){m(n,e);var t=_(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return h(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return d(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",bw(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Dw(t,{email:this._email,oobCode:this._password}));case 5:Gg(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",mw(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Lw(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Gg(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(pw);function Uw(e,t){return Vw.apply(this,arguments)}function Vw(){return Vw=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vk(t,"POST","/v1/accounts:signInWithIdp",lk(t,n)));case 1:case"end":return e.stop()}}),e)}))),Vw.apply(this,arguments)}var jw=function(e){m(n,e);var t=_(n);function n(){var e;return h(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return d(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Uw(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Uw(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Uw(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ce(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Gg("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Eg(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(pw);function qw(e,t){return Bw.apply(this,arguments)}function Bw(){return Bw=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hk(t,"POST","/v1/accounts:sendVerificationCode",lk(t,n)));case 1:case"end":return e.stop()}}),e)}))),Bw.apply(this,arguments)}function zw(){return zw=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vk(t,"POST","/v1/accounts:signInWithPhoneNumber",lk(t,n)));case 1:case"end":return e.stop()}}),e)}))),zw.apply(this,arguments)}function Ww(){return Ww=De(T().mark((function e(t,n){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vk(t,"POST","/v1/accounts:signInWithPhoneNumber",lk(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw kk(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Ww.apply(this,arguments)}var Kw=l({},"USER_NOT_FOUND","user-not-found");function Gw(){return Gw=De(T().mark((function e(t,n){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",vk(t,"POST","/v1/accounts:signInWithPhoneNumber",lk(t,r),Kw));case 2:case"end":return e.stop()}}),e)}))),Gw.apply(this,arguments)}var Hw=function(e){m(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this,"phone","phone")).params=e,r}return d(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return zw.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Ww.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Gw.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(pw);var Qw=function(){function e(t){var n,r,i,a,o,u;h(this,e);var s=le(he(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Xg(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return d(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=le(he(e)).link,n=t?le(he(t)).deep_link_id:null,r=le(he(e)).deep_link_id;return(r?le(he(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(cv){return null}}}]),e}();var Yw=function(){function e(){h(this,e),this.providerId=e.PROVIDER_ID}return d(e,null,[{key:"credential",value:function(e,t){return Fw._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Qw.parseLink(t);return Xg(n,"argument-error"),Fw._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Yw.PROVIDER_ID="password",Yw.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Yw.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var $w=function(){function e(t){h(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return d(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Xw=function(e){m(n,e);var t=_(n);function n(){var e;return h(this,n),(e=t.apply(this,arguments)).scopes=[],e}return d(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Pe(this.scopes)}}]),n}($w),Jw=function(e){m(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return d(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Xg(e.idToken||e.accessToken,"argument-error"),jw._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Xg("providerId"in t&&"signInMethod"in t,"argument-error"),jw._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Xw),Zw=function(e){m(n,e);var t=_(n);function n(){return h(this,n),t.call(this,"facebook.com")}return d(n,null,[{key:"credential",value:function(e){return jw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(cv){return null}}}]),n}(Xw);Zw.FACEBOOK_SIGN_IN_METHOD="facebook.com",Zw.PROVIDER_ID="facebook.com";var eb=function(e){m(n,e);var t=_(n);function n(){var e;return h(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return d(n,null,[{key:"credential",value:function(e,t){return jw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(cv){return null}}}]),n}(Xw);eb.GOOGLE_SIGN_IN_METHOD="google.com",eb.PROVIDER_ID="google.com";var tb=function(e){m(n,e);var t=_(n);function n(){return h(this,n),t.call(this,"github.com")}return d(n,null,[{key:"credential",value:function(e){return jw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(cv){return null}}}]),n}(Xw);tb.GITHUB_SIGN_IN_METHOD="github.com",tb.PROVIDER_ID="github.com";var nb=function(e){m(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return d(n,[{key:"_getIdTokenResponse",value:function(e){return Uw(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Uw(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Uw(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(pw),rb=function(e){m(n,e);var t=_(n);function n(e){return h(this,n),Xg(e.startsWith("saml."),"argument-error"),t.call(this,e)}return d(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=nb.fromJSON(e);return Xg(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return nb._create(r,n)}catch(i){return null}}}]),n}($w),ib=function(e){m(n,e);var t=_(n);function n(){return h(this,n),t.call(this,"twitter.com")}return d(n,null,[{key:"credential",value:function(e,t){return jw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(cv){return null}}}]),n}(Xw);function ab(e,t){return ob.apply(this,arguments)}function ob(){return ob=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vk(t,"POST","/v1/accounts:signUp",lk(t,n)));case 1:case"end":return e.stop()}}),e)}))),ob.apply(this,arguments)}ib.TWITTER_SIGN_IN_METHOD="twitter.com",ib.PROVIDER_ID="twitter.com";var ub=function(){function e(t){h(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return d(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=De(T().mark((function t(n,r,i){var a,o,u,s,c=arguments;return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Wk._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=sb(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=De(T().mark((function t(n,r,i){var a;return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=sb(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function sb(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function cb(){return cb=De(T().mark((function e(t){var n,r,i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cw(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new ub({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,ab(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,ub._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),cb.apply(this,arguments)}var lb=function(e){m(n,e);var t=_(n);function n(e,r,i,a){var o,u;return h(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(v(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return d(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}($);function hb(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw lb._fromErrorAndOperation(e,n,t,r);throw n}))}function fb(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function db(e,t){return pb.apply(this,arguments)}function pb(){return pb=De(T().mark((function e(t,n){var r,i,a,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xe(t),e.next=3,mb(!0,r,n);case 3:return e.t0=_k,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=fb(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),pb.apply(this,arguments)}function vb(e,t){return yb.apply(this,arguments)}function yb(){return yb=De(T().mark((function e(t,n){var r,i,a=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Ak,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",ub._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),yb.apply(this,arguments)}function mb(e,t,n){return gb.apply(this,arguments)}function gb(){return(gb=De(T().mark((function e(t,n,r){var i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lk(n);case 2:i=fb(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Xg(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kb(e,t){return wb.apply(this,arguments)}function wb(){return wb=De(T().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Ak(t,hb(i,a,n,t),r);case 6:return Xg((o=e.sent).idToken,i,"internal-error"),Xg(u=Nk(o.idToken),i,"internal-error"),s=u.sub,Xg(t.uid===s,i,"user-mismatch"),e.abrupt("return",ub._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Gg(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),wb.apply(this,arguments)}function bb(e,t){return _b.apply(this,arguments)}function _b(){return _b=De(T().mark((function e(t,n){var r,i,a,o,u=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,hb(t,i,n);case 4:return a=e.sent,e.next=7,ub._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),_b.apply(this,arguments)}function xb(e,t){return Ib.apply(this,arguments)}function Ib(){return Ib=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bb(cw(t),n));case 1:case"end":return e.stop()}}),e)}))),Ib.apply(this,arguments)}function Sb(e,t){return Tb.apply(this,arguments)}function Tb(){return(Tb=De(T().mark((function e(t,n){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xe(t),e.next=3,mb(!1,r,n.providerId);case 3:return e.abrupt("return",vb(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Eb(e,t){return Cb.apply(this,arguments)}function Cb(){return(Cb=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kb(xe(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nb(e,t){return Ab.apply(this,arguments)}function Ab(){return Ab=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vk(t,"POST","/v1/accounts:signInWithCustomToken",lk(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ab.apply(this,arguments)}function Pb(){return Pb=De(T().mark((function e(t,n){var r,i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cw(t),e.next=3,Nb(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,ub._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),Pb.apply(this,arguments)}var Rb=function(){function e(t,n){h(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return d(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Db._fromServerResponse(e,t):Gg(e,"internal-error")}}]),e}(),Db=function(e){m(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return d(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Rb);function Ob(e,t,n){var r;Xg((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Xg("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Xg(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Xg(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Lb(){return Lb=De(T().mark((function e(t,n,r){var i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xe(t),a={requestType:"PASSWORD_RESET",email:n},r&&Ob(i,a,r),e.next=5,Ew(i,a);case 5:case"end":return e.stop()}}),e)}))),Lb.apply(this,arguments)}function Mb(){return Mb=De(T().mark((function e(t,n,r){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vw(xe(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),Mb.apply(this,arguments)}function Fb(){return Fb=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kw(xe(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Fb.apply(this,arguments)}function Ub(e,t){return Vb.apply(this,arguments)}function Vb(){return Vb=De(T().mark((function e(t,n){var r,i,a,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xe(t),e.next=3,vw(r,{oobCode:n});case 3:i=e.sent,Xg(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Xg(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Xg(i.mfaInfo,r,"internal-error");case 13:Xg(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Rb._fromServerResponse(cw(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Vb.apply(this,arguments)}function jb(){return jb=De(T().mark((function e(t,n){var r,i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ub(xe(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),jb.apply(this,arguments)}function qb(e,t,n){return Bb.apply(this,arguments)}function Bb(){return Bb=De(T().mark((function e(t,n,r){var i,a,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cw(t),e.next=3,ab(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,ub._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),Bb.apply(this,arguments)}function zb(){return zb=De(T().mark((function e(t,n,r){var i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xe(t),a={requestType:"EMAIL_SIGNIN",email:n},Xg(r.handleCodeInApp,i,"argument-error"),r&&Ob(i,a,r),e.next=6,Nw(i,a);case 6:case"end":return e.stop()}}),e)}))),zb.apply(this,arguments)}function Wb(){return Wb=De(T().mark((function e(t,n,r){var i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xe(t),Xg((a=Yw.credentialWithLink(n,r||nk()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",xb(i,a));case 4:case"end":return e.stop()}}),e)}))),Wb.apply(this,arguments)}function Kb(e,t){return Gb.apply(this,arguments)}function Gb(){return Gb=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hk(t,"POST","/v1/accounts:createAuthUri",lk(t,n)));case 1:case"end":return e.stop()}}),e)}))),Gb.apply(this,arguments)}function Hb(){return Hb=De(T().mark((function e(t,n){var r,i,a,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=rk()?nk():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Kb(xe(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Hb.apply(this,arguments)}function Qb(){return(Qb=De(T().mark((function e(t,n){var r,i,a,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xe(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Ob(r.auth,a,n),e.next=8,Sw(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yb(){return(Yb=De(T().mark((function e(t,n,r){var i,a,o,u;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xe(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Ob(i.auth,o,r),e.next=8,Pw(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $b(e,t){return Xb.apply(this,arguments)}function Xb(){return Xb=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hk(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Xb.apply(this,arguments)}function Jb(){return(Jb=De(T().mark((function e(t,n){var r,i,a,o,u,s,c;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=xe(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Ak(a,$b(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zb(e,t,n){return e_.apply(this,arguments)}function e_(){return e_=De(T().mark((function e(t,n,r){var i,a,o,u;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Ak(t,mw(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),e_.apply(this,arguments)}var t_=d((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};h(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),n_=function(e){m(n,e);var t=_(n);function n(e,r,i,a){var o;return h(this,n),(o=t.call(this,e,r,i)).username=a,o}return d(n)}(t_),r_=function(e){m(n,e);var t=_(n);function n(e,r){return h(this,n),t.call(this,e,"facebook.com",r)}return d(n)}(t_),i_=function(e){m(n,e);var t=_(n);function n(e,r){return h(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return d(n)}(n_),a_=function(e){m(n,e);var t=_(n);function n(e,r){return h(this,n),t.call(this,e,"google.com",r)}return d(n)}(t_),o_=function(e){m(n,e);var t=_(n);function n(e,r,i){return h(this,n),t.call(this,e,"twitter.com",r,i)}return d(n)}(n_);function u_(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Nk(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new t_(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new r_(a,i);case"github.com":return new i_(a,i);case"google.com":return new a_(a,i);case"twitter.com":return new o_(a,i,e.screenName||null);case"custom":case"anonymous":return new t_(a,null);default:return new t_(a,r,i)}}(n)}var s_=function(){function e(t,n){h(this,e),this.type=t,this.credential=n}return d(e,[{key:"toJSON",value:function(){return{multiFactorSession:l({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),c_=function(){function e(t,n,r){h(this,e),this.session=t,this.hints=n,this.signInResolver=r}return d(e,[{key:"resolveSignIn",value:function(){var e=De(T().mark((function e(t){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=cw(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Rb._fromServerResponse(r,e)}));Xg(i.mfaPendingCredential,r,"internal-error");var o=s_._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=De(T().mark((function e(t){var a,u,s;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,ub._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Xg(n.user,r,"internal-error"),e.abrupt("return",ub._forOperation(n.user,n.operationType,u));case 17:Gg(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function l_(e,t){return hk(e,"POST","/v2/accounts/mfaEnrollment:start",lk(e,t))}function h_(e,t){return hk(e,"POST","/v2/accounts/mfaEnrollment:withdraw",lk(e,t))}var f_=function(){function e(t){var n=this;h(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Rb._fromServerResponse(t.auth,e)})))}))}return d(e,[{key:"getSession",value:function(){var e=De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s_,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=De(T().mark((function e(t,n){var r,i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Ak(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=De(T().mark((function e(t){var n,r,i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Ak(this.user,h_(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),d_=new WeakMap;var p_="__sak",v_=function(){function e(t,n){h(this,e),this.storageRetriever=t,this.type=n}return d(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(p_,"1"),this.storage.removeItem(p_),Promise.resolve(!0)):Promise.resolve(!1)}catch(cv){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var y_=function(e){m(n,e);var t=_(n);function n(){var e;return h(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=j();return Xk(e)||rw(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=ow(),e._shouldAllowMigration=!0,e}return d(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);aw()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=De(T().mark((function e(t,r){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kt(g(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=De(T().mark((function e(t){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kt(g(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Kt(g(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(v_);y_.type="LOCAL";var m_=y_,g_=function(e){m(n,e);var t=_(n);function n(){return h(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return d(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(v_);g_.type="SESSION";var k_=g_;function w_(e){return Promise.all(e.map(function(){var e=De(T().mark((function e(t){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var b_=function(){function e(t){h(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return d(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=De(T().mark((function e(t){var n,r,i,a,o,u,s,c;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,w_(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function __(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}b_.receivers=[];var x_=function(){function e(t){h(this,e),this.target=t,this.handlers=new Set}return d(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=De(T().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=__("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function I_(){return window}function S_(){return"undefined"!==typeof I_().WorkerGlobalScope&&"function"===typeof I_().importScripts}function T_(){return E_.apply(this,arguments)}function E_(){return(E_=De(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function C_(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var N_="firebaseLocalStorageDb",A_="firebaseLocalStorage",P_="fbase_key",R_=function(){function e(t){h(this,e),this.request=t}return d(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function D_(e,t){return e.transaction([A_],t?"readwrite":"readonly").objectStore(A_)}function O_(){var e=indexedDB.deleteDatabase(N_);return new R_(e).toPromise()}function L_(){var e=indexedDB.open(N_,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(A_,{keyPath:P_})}catch(r){n(r)}})),e.addEventListener("success",De(T().mark((function n(){var r;return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(A_)){n.next=12;break}return r.close(),n.next=5,O_();case 5:return n.t0=t,n.next=8,L_();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function M_(e,t,n){return F_.apply(this,arguments)}function F_(){return F_=De(T().mark((function e(t,n,r){var i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=D_(t,!0).put((l(i={},P_,n),l(i,"value",r),i)),e.abrupt("return",new R_(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),F_.apply(this,arguments)}function U_(e,t){return V_.apply(this,arguments)}function V_(){return V_=De(T().mark((function e(t,n){var r,i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=D_(t,!1).get(n),e.next=3,new R_(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),V_.apply(this,arguments)}function j_(e,t){var n=D_(e,!0).delete(t);return new R_(n).toPromise()}var q_=function(){function e(){h(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return d(e,[{key:"_openDb",value:function(){var e=De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,L_();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=De(T().mark((function e(t){var n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S_()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=De(T().mark((function e(){var t=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=b_._getInstance(S_()?self:null),this.receiver._subscribe("keyChanged",function(){var e=De(T().mark((function e(n,r){var i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=De(T().mark((function e(){var t,n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T_();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new x_(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&C_()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=De(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,L_();case 5:return t=e.sent,e.next=8,M_(t,p_,"1");case 8:return e.next=10,j_(t,p_);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=De(T().mark((function e(t,n){var r=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return M_(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=De(T().mark((function e(t){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return U_(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=De(T().mark((function e(t){var n=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return j_(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=De(T().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=D_(e,!1).getAll();return new R_(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=p(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(De(T().mark((function t(){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();q_.type="LOCAL";var B_=q_;function z_(e,t){return hk(e,"POST","/v2/accounts/mfaSignIn:start",lk(e,t))}function W_(e){return K_.apply(this,arguments)}function K_(){return K_=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hk(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),K_.apply(this,arguments)}function G_(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Hg("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function H_(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Q_=1e12,Y_=function(){function e(t){h(this,e),this.auth=t,this.counter=Q_,this._widgets=new Map}return d(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new $_(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Q_;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Q_;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=De(T().mark((function e(t){var n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Q_,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),$_=function(){function e(t,n,r){var i=this;h(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Xg(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return d(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var X_=H_("rcb"),J_=new ak(3e4,6e4),Z_="https://www.google.com/recaptcha/api.js?",ex=function(){function e(){h(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!I_().grecaptcha}return d(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Xg(tx(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(I_().grecaptcha):new Promise((function(r,i){var a=I_().setTimeout((function(){i(Hg(e,"network-request-failed"))}),J_.get());I_()[X_]=function(){I_().clearTimeout(a),delete I_()[X_];var o=I_().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Hg(e,"internal-error"))},G_("".concat(Z_,"?").concat(ce({onload:X_,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Hg(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!I_().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function tx(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var nx=function(){function e(){h(this,e)}return d(e,[{key:"load",value:function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Y_(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),rx="recaptcha",ix={theme:"light",type:"image"},ax=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},ix),r=arguments.length>2?arguments[2]:void 0;h(this,e),this.parameters=n,this.type=rx,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=cw(r),this.isInvisible="invisible"===this.parameters.size,Xg("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Xg(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nx:new ex,this.validateStartingState()}return d(e,[{key:"verify",value:function(){var e=De(T().mark((function e(){var t,n,r,i=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Xg(!this.parameters.sitekey,this.auth,"argument-error"),Xg(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Xg("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=I_()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Xg(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=De(T().mark((function e(){var t,n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=De(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xg(rk()&&!S_(),this.auth,"internal-error"),e.next=3,ox();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,W_(this.auth);case 8:Xg(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Xg(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function ox(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var ux=function(){function e(t,n){h(this,e),this.verificationId=t,this.onConfirmation=n}return d(e,[{key:"confirm",value:function(e){var t=Hw._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function sx(){return sx=De(T().mark((function e(t,n,r){var i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cw(t),e.next=3,fx(i,n,xe(r));case 3:return a=e.sent,e.abrupt("return",new ux(a,(function(e){return xb(i,e)})));case 5:case"end":return e.stop()}}),e)}))),sx.apply(this,arguments)}function cx(e,t,n){return lx.apply(this,arguments)}function lx(){return(lx=De(T().mark((function e(t,n,r){var i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xe(t),e.next=3,mb(!1,i,"phone");case 3:return e.next=5,fx(i.auth,n,xe(r));case 5:return a=e.sent,e.abrupt("return",new ux(a,(function(e){return Sb(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hx(){return(hx=De(T().mark((function e(t,n,r){var i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xe(t),e.next=3,fx(i.auth,n,xe(r));case 3:return a=e.sent,e.abrupt("return",new ux(a,(function(e){return Eb(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fx(e,t,n){return dx.apply(this,arguments)}function dx(){return dx=De(T().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Xg("string"===typeof a,t,"argument-error"),Xg(r.type===rx,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Xg("enroll"===u.type,t,"internal-error"),e.next=13,l_(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Xg("signin"===u.type,t,"internal-error"),Xg(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,z_(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,qw(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),dx.apply(this,arguments)}function px(){return(px=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vb(xe(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vx=function(){function e(t){h(this,e),this.providerId=e.PROVIDER_ID,this.auth=cw(t)}return d(e,[{key:"verifyPhoneNumber",value:function(e,t){return fx(this.auth,e,xe(t))}}],[{key:"credential",value:function(e,t){return Hw._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Hw._fromTokenResponse(n,r):null}}]),e}();function yx(e,t){return t?tk(t):(Xg(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}vx.PROVIDER_ID="phone",vx.PHONE_SIGN_IN_METHOD="phone";var mx=function(e){m(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this,"custom","custom")).params=e,r}return d(n,[{key:"_getIdTokenResponse",value:function(e){return Uw(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Uw(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Uw(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(pw);function gx(e){return bb(e.auth,new mx(e),e.bypassAuthState)}function kx(e){var t=e.auth,n=e.user;return Xg(n,t,"internal-error"),kb(n,new mx(e),e.bypassAuthState)}function wx(e){return bx.apply(this,arguments)}function bx(){return bx=De(T().mark((function e(t){var n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Xg(r=t.user,n,"internal-error"),e.abrupt("return",vb(r,new mx(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),bx.apply(this,arguments)}var _x=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];h(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return d(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=De(T().mark((function t(n,r){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=De(T().mark((function e(t){var n,r,i,a,o,u,s;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gx;case"linkViaPopup":case"linkViaRedirect":return wx;case"reauthViaPopup":case"reauthViaRedirect":return kx;default:Gg(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Zg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Zg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),xx=new ak(2e3,1e4);function Ix(e,t,n){return Sx.apply(this,arguments)}function Sx(){return Sx=De(T().mark((function e(t,n,r){var i,a,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cw(t),Yg(t,n,$w),a=yx(i,r),o=new Nx(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Sx.apply(this,arguments)}function Tx(){return(Tx=De(T().mark((function e(t,n,r){var i,a,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yg((i=xe(t)).auth,n,$w),a=yx(i.auth,r),o=new Nx(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ex(e,t,n){return Cx.apply(this,arguments)}function Cx(){return(Cx=De(T().mark((function e(t,n,r){var i,a,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yg((i=xe(t)).auth,n,$w),a=yx(i.auth,r),o=new Nx(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Nx=function(e){m(n,e);var t=_(n);function n(e,r,i,a,o){var u;return h(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=v(u),u}return d(n,[{key:"executeNotNull",value:function(){var e=De(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Xg(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=De(T().mark((function e(){var t,n=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zg(1===this.filter.length,"Popup operations only handle one event"),t=__(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Hg(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Hg(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Hg(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,xx.get())}()}}]),n}(_x);Nx.currentPopupAction=null;var Ax=new Map,Px=function(e){m(n,e);var t=_(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return h(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return d(n,[{key:"execute",value:function(){var e=De(T().mark((function e(){var t,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Ax.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Rx(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Kt(g(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Ax.set(this.auth._key(),t);case 21:return this.bypassAuthState||Ax.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=De(T().mark((function e(t){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Kt(g(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Kt(g(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(_x);function Rx(e,t){return Dx.apply(this,arguments)}function Dx(){return Dx=De(T().mark((function e(t,n){var r,i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fx(n),i=Mx(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Dx.apply(this,arguments)}function Ox(e,t){return Lx.apply(this,arguments)}function Lx(){return Lx=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mx(t)._set(Fx(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Lx.apply(this,arguments)}function Mx(e){return tk(e._redirectPersistence)}function Fx(e){return Hk("pendingRedirect",e.config.apiKey,e.name)}function Ux(e,t,n){return function(e,t,n){return Vx.apply(this,arguments)}(e,t,n)}function Vx(){return Vx=De(T().mark((function e(t,n,r){var i,a;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cw(t),Yg(t,n,$w),a=yx(i,r),e.next=5,Ox(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),Vx.apply(this,arguments)}function jx(e,t,n){return function(e,t,n){return qx.apply(this,arguments)}(e,t,n)}function qx(){return(qx=De(T().mark((function e(t,n,r){var i,a,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yg((i=xe(t)).auth,n,$w),a=yx(i.auth,r),e.next=5,Ox(a,i.auth);case 5:return e.next=7,Qx(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bx(e,t,n){return function(e,t,n){return zx.apply(this,arguments)}(e,t,n)}function zx(){return(zx=De(T().mark((function e(t,n,r){var i,a,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yg((i=xe(t)).auth,n,$w),a=yx(i.auth,r),e.next=5,mb(!1,i,n.providerId);case 5:return e.next=7,Ox(a,i.auth);case 7:return e.next=9,Qx(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wx(e,t){return Kx.apply(this,arguments)}function Kx(){return Kx=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cw(t)._initializationPromise;case 2:return e.abrupt("return",Gx(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Kx.apply(this,arguments)}function Gx(e,t){return Hx.apply(this,arguments)}function Hx(){return Hx=De(T().mark((function e(t,n){var r,i,a,o,u,s=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=cw(t),a=yx(i,n),o=new Px(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Hx.apply(this,arguments)}function Qx(e){return Yx.apply(this,arguments)}function Yx(){return(Yx=De(T().mark((function e(t){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=__("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $x=function(){function e(t){h(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return d(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jx(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Jx(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Hg(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xx(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Xx(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Xx(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Jx(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Zx(e){return eI.apply(this,arguments)}function eI(){return eI=De(T().mark((function e(t){var n,r=arguments;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",hk(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),eI.apply(this,arguments)}var tI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nI=/^https?/;function rI(){return rI=De(T().mark((function e(t){var n,r,i,a,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Zx(t);case 4:n=e.sent,r=n.authorizedDomains,i=p(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!iI(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Gg(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),rI.apply(this,arguments)}function iI(e){var t=nk(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!nI.test(r))return!1;if(tI.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var aI=new ak(3e4,6e4);function oI(){var e=I_().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Pe(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var uI=null;function sI(e){return uI=uI||function(e){return new Promise((function(t,n){var r,i,a;function o(){oI(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){oI(),n(Hg(e,"network-request-failed"))},timeout:aI.get()})}if(null===(i=null===(r=I_().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=I_().gapi)||void 0===a?void 0:a.load)){var u=H_("iframefcb");return I_()[u]=function(){gapi.load?o():n(Hg(e,"network-request-failed"))},G_("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw uI=null,e}))}(e),uI}var cI=new ak(5e3,15e3),lI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fI(e){var t=e.config;Xg(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?ok(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:ft},i=hI.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(ce(r).slice(1))}function dI(e){return pI.apply(this,arguments)}function pI(){return pI=De(T().mark((function e(t){var n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sI(t);case 2:return n=e.sent,Xg(r=I_().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:fI(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lI,dontclear:!0},(function(e){return new Promise(function(){var n=De(T().mark((function n(r,i){var a,o,u;return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){I_().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Hg(t,"network-request-failed"),o=I_().setTimeout((function(){i(a)}),cI.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),pI.apply(this,arguments)}var vI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yI="_blank",mI="http://localhost",gI=function(){function e(t){h(this,e),this.window=t,this.associatedEvent=null}return d(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function kI(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},vI),{width:r.toString(),height:i.toString(),top:a,left:o}),l=j().toLowerCase();n&&(u=Jk(l)?yI:n),$k(l)&&(t=t||mI,s.scrollbars="yes");var h=Object.entries(s).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(iw(l)&&"_self"!==u)return wI(t||"",u),new gI(null);var f=window.open(t||"",u,h);Xg(f,e,"popup-blocked");try{f.focus()}catch(d){}return new gI(f)}function wI(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var bI="__/auth/handler",_I="emulator/auth/handler";function xI(e,t,n,r,i,a){Xg(e.config.authDomain,e,"auth-domain-config-required"),Xg(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ft,eventId:i};if(t instanceof $w){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",ae(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var l=c(s[u],2),h=l[0],f=l[1];o[h]=f}}if(t instanceof Xw){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(bI);return ok(t,_I)}(e),"?").concat(ce(p).slice(1))}var II="webStorageSupport",SI=function(){function e(){h(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=k_,this._completeRedirectFn=Gx}return d(e,[{key:"_openPopup",value:function(){var e=De(T().mark((function e(t,n,r,i){var a,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zg(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=xI(t,n,r,nk(),i),e.abrupt("return",kI(t,o,__()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=De(T().mark((function e(t,n,r,i){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=xI(t,n,r,nk(),i),I_().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Zg(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=De(T().mark((function e(t){var n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dI(t);case 2:return n=e.sent,r=new $x(t),n.register("authEvent",(function(e){return Xg(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(II,{type:II},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Gg(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return rI.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return ow()||Xk()||rw()}}]),e}(),TI=SI,EI=function(){function e(t){h(this,e),this.factorId=t}return d(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Jg("unexpected MultiFactorSessionType")}}}]),e}(),CI=function(e){m(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this,"phone")).credential=e,r}return d(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return hk(e,"POST","/v2/accounts/mfaEnrollment:finalize",lk(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return hk(e,"POST","/v2/accounts/mfaSignIn:finalize",lk(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(EI),NI=function(){function e(){h(this,e)}return d(e,null,[{key:"assertion",value:function(e){return CI._fromCredential(e)}}]),e}();NI.FACTOR_ID="phone";var AI,PI="@firebase/auth",RI="0.19.12",DI=function(){function e(t){h(this,e),this.auth=t,this.internalListeners=new Map}return d(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=De(T().mark((function e(t){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Xg(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function OI(){return window}AI="Browser",at(new Oe("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Xg(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Xg(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:AI,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uw(AI)},i=new sw(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(tk);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),at(new Oe("auth-internal",(function(e){return function(e){return new DI(e)}(cw(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),gt(PI,RI,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(AI)),gt(PI,RI,"esm2017");function LI(e,t,n){return MI.apply(this,arguments)}function MI(){return MI=De(T().mark((function e(t,n,r){var i,a,o,u,s;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=OI(),o=a.BuildInfo,Zg(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,BI(n.sessionId);case 4:return u=e.sent,s={},rw()?s.ibi=o.packageName:ew()?s.apn=o.packageName:Gg(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",xI(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),MI.apply(this,arguments)}function FI(){return FI=De(T().mark((function e(t){var n,r,i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=OI(),r=n.BuildInfo,i={},rw()?i.iosBundleId=r.packageName:ew()?i.androidPackageName=r.packageName:Gg(t,"operation-not-supported-in-this-environment"),e.next=5,Zx(t,i);case 5:case"end":return e.stop()}}),e)}))),FI.apply(this,arguments)}function UI(e){var t=OI().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function VI(e,t,n){return jI.apply(this,arguments)}function jI(){return jI=De(T().mark((function e(t,n,r){var i,a,o;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=OI(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Hg(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),ew()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),jI.apply(this,arguments)}function qI(e){var t,n,r,i,a,o,u,s,c,l,h=OI();Xg("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Xg("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Xg("function"===typeof(null===(a=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Xg("function"===typeof(null===(s=null===(u=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Xg("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function BI(e){return zI.apply(this,arguments)}function zI(){return(zI=De(T().mark((function e(t){var n,r,i;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=WI(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function WI(e){if(Zg(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var KI=function(e){m(n,e);var t=_(n);function n(){var e;return h(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return d(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Kt(g(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}($x);function GI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:XI(),postBody:null,tenantId:e.tenantId,error:Hg(e,"no-auth-event")}}function HI(e,t){return JI()._set(ZI(e),t)}function QI(e){return YI.apply(this,arguments)}function YI(){return YI=De(T().mark((function e(t){var n;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JI()._get(ZI(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,JI()._remove(ZI(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),YI.apply(this,arguments)}function $I(e,t){var n,r,i=function(e){var t=eS(e),n=t.link?decodeURIComponent(t.link):void 0,r=eS(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return eS(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=eS(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Hg(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function XI(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function JI(){return tk(m_)}function ZI(e){return Hk("authEvent",e.config.apiKey,e.name)}function eS(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=a(t=n)||Ae(t)||u(t)||s();r[0];return le(r.slice(1).join("?"))}var tS=function(){function e(){h(this,e),this._redirectPersistence=k_,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Gx}return d(e,[{key:"_initialize",value:function(){var e=De(T().mark((function e(t){var n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new KI(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Gg(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=De(T().mark((function e(t,n,r,i){var a,o,u,s;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qI(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Ax.clear(),e.next=10,this._originValidation(t);case 10:return o=GI(t,r,i),e.next=13,HI(t,o);case 13:return e.next=15,LI(t,o,n);case 15:return u=e.sent,e.next=18,UI(u);case 18:return s=e.sent,e.abrupt("return",VI(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return FI.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=OI(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(De(T().mark((function n(){return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,QI(e);case 2:t.onEvent(rS());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=De(T().mark((function n(r){var i,a;return T().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,QI(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=$I(i,r.url)),t.onEvent(a||rS());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");OI().handleOpenURL=function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),nS=tS;function rS(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Hg("no-auth-event")}}function iS(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function aS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return!("file:"!==iS()&&"ionic:"!==iS()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function oS(){return K()&&11===(null===document||void 0===document?void 0:document.documentMode)}function uS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return/Edge\/\d+/.test(e)}function sS(){try{var e=self.localStorage,t=__();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j();return oS()||uS(e)}()||H()}catch(n){return cS()&&H()}return!1}function cS(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function lS(){return("http:"===iS()||"https:"===iS()||z()||aS())&&!(W()||B())&&sS()&&!cS()}function hS(){return aS()&&"undefined"!==typeof document}function fS(){return dS.apply(this,arguments)}function dS(){return(dS=De(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hS()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pS={LOCAL:"local",NONE:"none",SESSION:"session"},vS=Xg,yS="persistence";function mS(e,t){vS(Object.values(pS).includes(t),e,"invalid-persistence-type"),W()?vS(t!==pS.SESSION,e,"unsupported-persistence-type"):B()?vS(t===pS.NONE,e,"unsupported-persistence-type"):cS()?vS(t===pS.NONE||t===pS.LOCAL&&H(),e,"unsupported-persistence-type"):vS(t===pS.NONE||sS(),e,"unsupported-persistence-type")}function gS(e){return kS.apply(this,arguments)}function kS(){return kS=De(T().mark((function e(t){var n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=wS(),r=Hk(yS,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),kS.apply(this,arguments)}function wS(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var bS=Xg,_S=function(){function e(){h(this,e),this.browserResolver=tk(TI),this.cordovaResolver=tk(nS),this.underlyingResolver=null,this._redirectPersistence=k_,this._completeRedirectFn=Gx}return d(e,[{key:"_initialize",value:function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=De(T().mark((function e(t,n,r,i){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=De(T().mark((function e(t,n,r,i){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return hS()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return bS(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=De(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fS();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function xS(e){return e.unwrap()}function IS(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new NS(e,function(e,t){var n,r=xe(e),i=t;return Xg(t.customData.operationType,r,"argument-error"),Xg(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),c_._fromError(r,i)}(e,t));else if(r){var i=SS(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function SS(e){var t=(e instanceof $?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof $)&&"temporaryProof"in t&&"phoneNumber"in t)return vx.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Rg)return null;switch(r){case Pg:n=eb;break;case Ng:n=Zw;break;case Ag:n=tb;break;case Dg:n=ib;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?nb._create(r,u):jw._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Jw(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof $?n.credentialFromError(e):n.credentialFromResult(e)}function TS(e,t){return t.catch((function(t){throw t instanceof $&&IS(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,SS(t)),additionalUserInfo:u_(e),user:AS.getOrCreate(r)}}))}function ES(e,t){return CS.apply(this,arguments)}function CS(){return CS=De(T().mark((function e(t,n){var r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return TS(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),CS.apply(this,arguments)}var NS=function(){function e(t,n){h(this,e),this.resolver=n,this.auth=t.wrapped()}return d(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return TS(xS(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),AS=function(){function e(t){h(this,e),this._delegate=t,this.multiFactor=function(e){var t=xe(e);return d_.has(t)||d_.set(t,f_._fromUser(t)),d_.get(t)}(t)}return d(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",TS(this.auth,Sb(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ES(this.auth,cx(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",TS(this.auth,Ex(this._delegate,t,_S)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gS(cw(this.auth));case 2:return e.abrupt("return",Bx(this._delegate,t,_S));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",TS(this.auth,Eb(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return ES(this.auth,function(e,t,n){return hx.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return TS(this.auth,function(e,t,n){return Tx.apply(this,arguments)}(this._delegate,e,_S))}},{key:"reauthenticateWithRedirect",value:function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gS(cw(this.auth));case 2:return e.abrupt("return",jx(this._delegate,t,_S));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Qb.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,db(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Zb(xe(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Zb(xe(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return px.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Jb.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Yb.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();AS.USER_MAP=new WeakMap;var PS=Xg,RS=function(){function e(t,n){if(h(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;PS(r,"invalid-api-key",{appName:t.name}),PS(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?_S:void 0;this._delegate=n.initialize({options:{persistence:OS(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(qg),this.linkUnderlyingAuth()}return d(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?AS.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){hw(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Fb.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Ub(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Mb.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=De(T().mark((function e(t,n){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",TS(this._delegate,qb(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Hb.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Qw.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=De(T().mark((function e(){var t;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return PS(lS(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Wx(this._delegate,_S);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",TS(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){cw(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=DS(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=DS(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return zb.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Lb.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=De(T().mark((function e(t){var n,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mS(this._delegate,t),e.t0=t,e.next=e.t0===pS.SESSION?4:e.t0===pS.LOCAL?6:e.t0===pS.NONE?11:13;break;case 4:return n=k_,e.abrupt("break",14);case 6:return e.next=8,tk(B_)._isAvailable();case 8:return r=e.sent,n=r?B_:m_,e.abrupt("break",14);case 11:return n=Gk,e.abrupt("break",14);case 13:return e.abrupt("return",Gg("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return TS(this._delegate,function(e){return cb.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return TS(this._delegate,xb(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return TS(this._delegate,function(e,t){return Pb.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return TS(this._delegate,function(e,t,n){return xb(xe(e),Yw.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return TS(this._delegate,function(e,t,n){return Wb.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return ES(this._delegate,function(e,t,n){return sx.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return PS(lS(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",TS(this._delegate,Ix(this._delegate,t,_S)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=De(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return PS(lS(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,gS(this._delegate);case 3:return e.abrupt("return",Ux(this._delegate,t,_S));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return jb.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function DS(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&AS.getOrCreate(e))},error:t,complete:n}}function OS(e,t){var n=function(e,t){var n=wS();if(!n)return[];var r=Hk(yS,e,t);switch(n.getItem(r)){case pS.NONE:return[Gk];case pS.LOCAL:return[B_,k_];case pS.SESSION:return[k_];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(B_)||n.push(B_),"undefined"!==typeof window)for(var r=0,i=[m_,k_];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Gk)||n.push(Gk),n}RS.Persistence=pS;var LS=function(){function e(){h(this,e),this.providerId="phone",this._delegate=new vx(xS(Bt.auth()))}return d(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return vx.credential(e,t)}}]),e}();LS.PHONE_SIGN_IN_METHOD=vx.PHONE_SIGN_IN_METHOD,LS.PROVIDER_ID=vx.PROVIDER_ID;var MS,FS=Xg,US=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bt.app();h(this,e),FS(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new ax(t,n,i.auth()),this.type=this._delegate.type}return d(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new Oe("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new RS(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Og,PASSWORD_RESET:Lg,RECOVER_EMAIL:Mg,REVERT_SECOND_FACTOR_ADDITION:Fg,VERIFY_AND_CHANGE_EMAIL:Ug,VERIFY_EMAIL:Vg}},EmailAuthProvider:Yw,FacebookAuthProvider:Zw,GithubAuthProvider:tb,GoogleAuthProvider:eb,OAuthProvider:Jw,SAMLAuthProvider:rb,PhoneAuthProvider:LS,PhoneMultiFactorGenerator:NI,RecaptchaVerifier:US,TwitterAuthProvider:ib,Auth:RS,AuthCredential:pw,Error:$}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.2.12")}(Bt);var VS="@firebase/installations",jS="0.5.8",qS=1e4,BS="w:".concat(jS),zS="FIS_v2",WS=36e5,KS=(l(MS={},"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),l(MS,"not-registered","Firebase Installation is not registered."),l(MS,"installation-not-found","Firebase Installation not found."),l(MS,"request-failed",'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),l(MS,"app-offline","Could not process request. Application offline."),l(MS,"delete-pending-registration","Can't delete installation while there is a pending registration request."),MS),GS=new X("installations","Installations",KS);function HS(e){return e instanceof $&&e.code.includes("request-failed")}function QS(e){var t=e.projectId;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function YS(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function $S(e,t){return XS.apply(this,arguments)}function XS(){return(XS=De(S.mark((function e(t,n){var r,i;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:return r=e.sent,i=r.error,e.abrupt("return",GS.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function JS(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function ZS(e,t){var n=t.refreshToken,r=JS(e);return r.append("Authorization",function(e){return"".concat(zS," ").concat(e)}(n)),r}function eT(e){return tT.apply(this,arguments)}function tT(){return tT=De(S.mark((function e(t){var n;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(!((n=e.sent).status>=500&&n.status<600)){e.next=5;break}return e.abrupt("return",t());case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),tT.apply(this,arguments)}function nT(e,t){return rT.apply(this,arguments)}function rT(){return(rT=De(S.mark((function e(t,n){var r,i,a,o,u,s,c,l,h,f,d,p;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=n.fid,o=QS(r),u=JS(r),!(s=i.getImmediate({optional:!0}))){e.next=10;break}return e.next=8,s.getHeartbeatsHeader();case 8:(c=e.sent)&&u.append("x-firebase-client",c);case 10:return l={fid:a,authVersion:zS,appId:r.appId,sdkVersion:BS},h={method:"POST",headers:u,body:JSON.stringify(l)},e.next=14,eT((function(){return fetch(o,h)}));case 14:if(!(f=e.sent).ok){e.next=23;break}return e.next=18,f.json();case 18:return d=e.sent,p={fid:d.fid||a,registrationStatus:2,refreshToken:d.refreshToken,authToken:YS(d.authToken)},e.abrupt("return",p);case 23:return e.next=25,$S("Create Installation",f);case 25:throw e.sent;case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iT(e){return new Promise((function(t){setTimeout(t,e)}))}var aT=/^[cdef][\w-]{21}$/;function oT(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,Pe(t))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return aT.test(t)?t:""}catch(cv){return""}}function uT(e){return"".concat(e.appName,"!").concat(e.appId)}var sT=new Map;function cT(e,t){var n=uT(e);lT(n,t),function(e,t){var n=fT();n&&n.postMessage({key:e,fid:t});dT()}(n,t)}function lT(e,t){var n=sT.get(e);if(n){var r,i=p(n);try{for(i.s();!(r=i.n()).done;){(0,r.value)(t)}}catch(a){i.e(a)}finally{i.f()}}}var hT=null;function fT(){return!hT&&"BroadcastChannel"in self&&((hT=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){lT(e.data.key,e.data.fid)}),hT}function dT(){0===sT.size&&hT&&(hT.close(),hT=null)}var pT="firebase-installations-store",vT=null;function yT(){return vT||(vT=Ne("firebase-installations-database",1,(function(e,t){if(0===t)e.createObjectStore(pT)}))),vT}function mT(e,t){return gT.apply(this,arguments)}function gT(){return gT=De(S.mark((function e(t,n){var r,i,a,o,u;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=uT(t),e.next=3,yT();case 3:return i=e.sent,a=i.transaction(pT,"readwrite"),o=a.objectStore(pT),e.next=8,o.get(r);case 8:return u=e.sent,e.next=11,o.put(n,r);case 11:return e.next=13,a.complete;case 13:return u&&u.fid===n.fid||cT(t,n.fid),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)}))),gT.apply(this,arguments)}function kT(e){return wT.apply(this,arguments)}function wT(){return wT=De(S.mark((function e(t){var n,r,i;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=uT(t),e.next=3,yT();case 3:return r=e.sent,i=r.transaction(pT,"readwrite"),e.next=7,i.objectStore(pT).delete(n);case 7:return e.next=9,i.complete;case 9:case"end":return e.stop()}}),e)}))),wT.apply(this,arguments)}function bT(e,t){return _T.apply(this,arguments)}function _T(){return _T=De(S.mark((function e(t,n){var r,i,a,o,u,s;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=uT(t),e.next=3,yT();case 3:return i=e.sent,a=i.transaction(pT,"readwrite"),o=a.objectStore(pT),e.next=8,o.get(r);case 8:if(u=e.sent,void 0!==(s=n(u))){e.next=15;break}return e.next=13,o.delete(r);case 13:e.next=17;break;case 15:return e.next=17,o.put(s,r);case 17:return e.next=19,a.complete;case 19:return!s||u&&u.fid===s.fid||cT(t,s.fid),e.abrupt("return",s);case 21:case"end":return e.stop()}}),e)}))),_T.apply(this,arguments)}function xT(e){return IT.apply(this,arguments)}function IT(){return(IT=De(S.mark((function e(t){var n,r;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bT(t.appConfig,(function(e){var r=ST(e),i=TT(t,r);return n=i.registrationPromise,i.installationEntry}));case 2:if(""!==(r=e.sent).fid){e.next=8;break}return e.next=6,n;case 6:return e.t0=e.sent,e.abrupt("return",{installationEntry:e.t0});case 8:return e.abrupt("return",{installationEntry:r,registrationPromise:n});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ST(e){return PT(e||{fid:oT(),registrationStatus:0})}function TT(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(GS.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return ET.apply(this,arguments)}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:CT(e)}:{installationEntry:t}}function ET(){return(ET=De(S.mark((function e(t,n){var r;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nT(t,n);case 3:return r=e.sent,e.abrupt("return",mT(t.appConfig,r));case 7:if(e.prev=7,e.t0=e.catch(0),!HS(e.t0)||409!==e.t0.customData.serverCode){e.next=14;break}return e.next=12,kT(t.appConfig);case 12:e.next=16;break;case 14:return e.next=16,mT(t.appConfig,{fid:n.fid,registrationStatus:0});case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function CT(e){return NT.apply(this,arguments)}function NT(){return(NT=De(S.mark((function e(t){var n,r,i,a;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,AT(t.appConfig);case 2:n=e.sent;case 3:if(1!==n.registrationStatus){e.next=11;break}return e.next=6,iT(100);case 6:return e.next=8,AT(t.appConfig);case 8:n=e.sent,e.next=3;break;case 11:if(0!==n.registrationStatus){e.next=22;break}return e.next=14,xT(t);case 14:if(r=e.sent,i=r.installationEntry,!(a=r.registrationPromise)){e.next=21;break}return e.abrupt("return",a);case 21:return e.abrupt("return",i);case 22:return e.abrupt("return",n);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function AT(e){return bT(e,(function(e){if(!e)throw GS.create("installation-not-found");return PT(e)}))}function PT(e){return 1===(t=e).registrationStatus&&t.registrationTime+qS<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function RT(e,t){return DT.apply(this,arguments)}function DT(){return(DT=De(S.mark((function e(t,n){var r,i,a,o,u,s,c,l,h,f,d;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=OT(r,n),o=ZS(r,n),!(u=i.getImmediate({optional:!0}))){e.next=9;break}return e.next=7,u.getHeartbeatsHeader();case 7:(s=e.sent)&&o.append("x-firebase-client",s);case 9:return c={installation:{sdkVersion:BS,appId:r.appId}},l={method:"POST",headers:o,body:JSON.stringify(c)},e.next=13,eT((function(){return fetch(a,l)}));case 13:if(!(h=e.sent).ok){e.next=22;break}return e.next=17,h.json();case 17:return f=e.sent,d=YS(f),e.abrupt("return",d);case 22:return e.next=24,$S("Generate Auth Token",h);case 24:throw e.sent;case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function OT(e,t){var n=t.fid;return"".concat(QS(e),"/").concat(n,"/authTokens:generate")}function LT(e){return MT.apply(this,arguments)}function MT(){return MT=De(S.mark((function e(t){var n,r,i,a,o=arguments;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],e.next=3,bT(t.appConfig,(function(e){if(!BT(e))throw GS.create("not-registered");var i=e.authToken;if(!n&&zT(i))return e;if(1===i.requestStatus)return r=FT(t,n),e;if(!navigator.onLine)throw GS.create("app-offline");var a=WT(e);return r=jT(t,a),a}));case 3:if(i=e.sent,!r){e.next=10;break}return e.next=7,r;case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=i.authToken;case 11:return a=e.t0,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),MT.apply(this,arguments)}function FT(e,t){return UT.apply(this,arguments)}function UT(){return(UT=De(S.mark((function e(t,n){var r,i;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,VT(t.appConfig);case 2:r=e.sent;case 3:if(1!==r.authToken.requestStatus){e.next=11;break}return e.next=6,iT(100);case 6:return e.next=8,VT(t.appConfig);case 8:r=e.sent,e.next=3;break;case 11:if(0!==(i=r.authToken).requestStatus){e.next=16;break}return e.abrupt("return",LT(t,n));case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function VT(e){return bT(e,(function(e){if(!BT(e))throw GS.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+qS<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e}))}function jT(e,t){return qT.apply(this,arguments)}function qT(){return(qT=De(S.mark((function e(t,n){var r,i,a;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,RT(t,n);case 3:return r=e.sent,i=Object.assign(Object.assign({},n),{authToken:r}),e.next=7,mT(t.appConfig,i);case 7:return e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(0),!HS(e.t0)||401!==e.t0.customData.serverCode&&404!==e.t0.customData.serverCode){e.next=17;break}return e.next=15,kT(t.appConfig);case 15:e.next=20;break;case 17:return a=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),e.next=20,mT(t.appConfig,a);case 20:throw e.t0;case 21:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function BT(e){return void 0!==e&&2===e.registrationStatus}function zT(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+WS}(e)}function WT(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function KT(){return(KT=De(S.mark((function e(t){var n,r,i,a;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,xT(n);case 3:return r=e.sent,i=r.installationEntry,(a=r.registrationPromise)?a.catch(console.error):LT(n).catch(console.error),e.abrupt("return",i.fid);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function GT(){return GT=De(S.mark((function e(t){var n,r,i,a=arguments;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],r=t,e.next=4,HT(r);case 4:return e.next=6,LT(r,n);case 6:return i=e.sent,e.abrupt("return",i.token);case 8:case"end":return e.stop()}}),e)}))),GT.apply(this,arguments)}function HT(e){return QT.apply(this,arguments)}function QT(){return(QT=De(S.mark((function e(t){var n,r;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xT(t);case 2:if(n=e.sent,!(r=n.registrationPromise)){e.next=7;break}return e.next=7,r;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YT(e){return GS.create("missing-app-config-values",{valueName:e})}var $T,XT="installations",JT=function(e){var t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw YT("App Configuration");if(!e.name)throw YT("App Name");for(var t=0,n=["projectId","apiKey","appId"];t<n.length;t++){var r=n[t];if(!e.options[r])throw YT(r)}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:ot(t,"heartbeat"),_delete:function(){return Promise.resolve()}}},ZT=function(e){var t=ot(e.getProvider("app").getImmediate(),XT).getImmediate(),n={getId:function(){return function(e){return KT.apply(this,arguments)}(t)},getToken:function(e){return function(e){return GT.apply(this,arguments)}(t,e)}};return n};at(new Oe(XT,JT,"PUBLIC")),at(new Oe("installations-internal",ZT,"PRIVATE")),gt(VS,jS),gt(VS,jS,"esm2017");var eE="analytics",tE=6e4,nE="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",rE="https://www.googletagmanager.com/gtag/js",iE=new Qe("@firebase/analytics");function aE(e){return Promise.all(e.map((function(e){return e.catch((function(e){return e}))})))}function oE(e,t){var n=document.createElement("script");n.src="".concat(rE,"?l=").concat(e,"&id=").concat(t),n.async=!0,document.head.appendChild(n)}function uE(e,t,n,r,i,a){return sE.apply(this,arguments)}function sE(){return sE=De(S.mark((function e(t,n,r,i,a,o){var u,s,c;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=i[a],e.prev=1,!u){e.next=7;break}return e.next=5,n[u];case 5:e.next=14;break;case 7:return e.next=9,aE(r);case 9:if(s=e.sent,c=s.find((function(e){return e.measurementId===a})),!c){e.next=14;break}return e.next=14,n[c.appId];case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),iE.error(e.t0);case 19:t("config",a,o);case 20:case"end":return e.stop()}}),e,null,[[1,16]])}))),sE.apply(this,arguments)}function cE(e,t,n,r,i){return lE.apply(this,arguments)}function lE(){return lE=De(S.mark((function e(t,n,r,i,a){var o,u,s,c,l,h;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=[],!a||!a.send_to){e.next=26;break}return u=a.send_to,Array.isArray(u)||(u=[u]),e.next=7,aE(r);case 7:s=e.sent,c=p(u),e.prev=9,h=function(){var e=l.value,t=s.find((function(t){return t.measurementId===e})),r=t&&n[t.appId];if(!r)return o=[],"break";o.push(r)},c.s();case 12:if((l=c.n()).done){e.next=18;break}if("break"!==h()){e.next=16;break}return e.abrupt("break",18);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),c.e(e.t0);case 23:return e.prev=23,c.f(),e.finish(23);case 26:return 0===o.length&&(o=Object.values(n)),e.next=29,Promise.all(o);case 29:t("event",i,a||{}),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(0),iE.error(e.t1);case 35:case"end":return e.stop()}}),e,null,[[0,32],[9,20,23,26]])}))),lE.apply(this,arguments)}function hE(e,t,n,r,i){var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(a=window[i]),window[i]=function(e,t,n,r){function i(){return(i=De(S.mark((function i(a,o,u){return S.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,"event"!==a){i.next=6;break}return i.next=4,cE(e,t,n,o,u);case 4:i.next=12;break;case 6:if("config"!==a){i.next=11;break}return i.next=9,uE(e,t,n,r,o,u);case 9:i.next=12;break;case 11:e("set",o);case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(0),iE.error(i.t0);case 17:case"end":return i.stop()}}),i,null,[[0,14]])})))).apply(this,arguments)}return function(e,t,n){return i.apply(this,arguments)}}(a,e,t,n),{gtagCore:a,wrappedGtag:window[i]}}function fE(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(rE))return r}return null}var dE=(l($T={},"already-exists","A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId."),l($T,"already-initialized","initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance."),l($T,"already-initialized-settings","Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect."),l($T,"interop-component-reg-failed","Firebase Analytics Interop Component failed to instantiate: {$reason}"),l($T,"invalid-analytics-context","Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),l($T,"indexeddb-unavailable","IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),l($T,"fetch-throttle","The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}."),l($T,"config-fetch-failed","Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}"),l($T,"no-api-key",'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.'),l($T,"no-app-id",'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'),$T),pE=new X("analytics","Analytics",dE),vE=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;h(this,e),this.throttleMetadata=t,this.intervalMillis=n}return d(e,[{key:"getThrottleMetadata",value:function(e){return this.throttleMetadata[e]}},{key:"setThrottleMetadata",value:function(e,t){this.throttleMetadata[e]=t}},{key:"deleteThrottleMetadata",value:function(e){delete this.throttleMetadata[e]}}]),e}(),yE=new vE;function mE(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function gE(e){return kE.apply(this,arguments)}function kE(){return kE=De(S.mark((function e(t){var n,r,i,a,o,u,s,c;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.appId,i=t.apiKey,a={method:"GET",headers:mE(i)},o=nE.replace("{app-id}",r),e.next=5,fetch(o,a);case 5:if(200===(u=e.sent).status||304===u.status){e.next=18;break}return s="",e.prev=8,e.next=11,u.json();case 11:c=e.sent,(null===(n=c.error)||void 0===n?void 0:n.message)&&(s=c.error.message),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(8);case 17:throw pE.create("config-fetch-failed",{httpStatus:u.status,responseMessage:s});case 18:return e.abrupt("return",u.json());case 19:case"end":return e.stop()}}),e,null,[[8,15]])}))),kE.apply(this,arguments)}function wE(e){return bE.apply(this,arguments)}function bE(){return bE=De(S.mark((function e(t){var n,r,i,a,o,u,s,c,l=arguments;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:yE,r=l.length>2?l[2]:void 0,i=t.options,a=i.appId,o=i.apiKey,u=i.measurementId,a){e.next=5;break}throw pE.create("no-app-id");case 5:if(o){e.next=9;break}if(!u){e.next=8;break}return e.abrupt("return",{measurementId:u,appId:a});case 8:throw pE.create("no-api-key");case 9:return s=n.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new TE,setTimeout(De(S.mark((function e(){return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.abort();case 1:case"end":return e.stop()}}),e)}))),void 0!==r?r:tE),e.abrupt("return",_E({appId:a,apiKey:o,measurementId:u},s,c,n));case 13:case"end":return e.stop()}}),e)}))),bE.apply(this,arguments)}function _E(e,t,n){return xE.apply(this,arguments)}function xE(){return xE=De(S.mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f=arguments;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.throttleEndTimeMillis,a=n.backoffCount,o=f.length>3&&void 0!==f[3]?f[3]:yE,u=t.appId,s=t.measurementId,e.prev=3,e.next=6,IE(r,i);case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(3),!s){e.next=13;break}return iE.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(s)+' provided in the "measurementId" field in the local Firebase config. ['.concat(e.t0.message,"]")),e.abrupt("return",{appId:u,measurementId:s});case 13:throw e.t0;case 14:return e.prev=14,e.next=17,gE(t);case 17:return c=e.sent,o.deleteThrottleMetadata(u),e.abrupt("return",c);case 22:if(e.prev=22,e.t1=e.catch(14),SE(e.t1)){e.next=32;break}if(o.deleteThrottleMetadata(u),!s){e.next=31;break}return iE.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(s)+' provided in the "measurementId" field in the local Firebase config. ['.concat(e.t1.message,"]")),e.abrupt("return",{appId:u,measurementId:s});case 31:throw e.t1;case 32:return l=503===Number(e.t1.customData.httpStatus)?_e(a,o.intervalMillis,30):_e(a,o.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:a+1},o.setThrottleMetadata(u,h),iE.debug("Calling attemptFetch again in ".concat(l," millis")),e.abrupt("return",_E(t,h,r,o));case 37:case"end":return e.stop()}}),e,null,[[3,8],[14,22]])}))),xE.apply(this,arguments)}function IE(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener((function(){clearTimeout(a),r(pE.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function SE(e){if(!(e instanceof $)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var TE=function(){function e(){h(this,e),this.listeners=[]}return d(e,[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach((function(e){return e()}))}}]),e}();function EE(){return CE.apply(this,arguments)}function CE(){return(CE=De(S.mark((function e(){return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H()){e.next=5;break}return iE.warn(pE.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),e.abrupt("return",!1);case 5:return e.prev=5,e.next=8,Q();case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),iE.warn(pE.create("indexeddb-unavailable",{errorInfo:e.t0}).message),e.abrupt("return",!1);case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,null,[[5,10]])})))).apply(this,arguments)}function NE(){return NE=De(S.mark((function e(t,n,r,i,a,o,u){var s,l,h,f,d,p,v,y;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(l=wE(t)).then((function(e){r[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&iE.warn("The measurement ID in the local Firebase config (".concat(t.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(e.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return iE.error(e)})),n.push(l),h=EE().then((function(e){return e?i.getId():void 0})),e.next=6,Promise.all([l,h]);case 6:return f=e.sent,d=c(f,2),p=d[0],v=d[1],fE()||oE(o,p.measurementId),a("js",new Date),(y=null!==(s=null===u||void 0===u?void 0:u.config)&&void 0!==s?s:{}).origin="firebase",y.update=!0,null!=v&&(y.firebase_id=v),a("config",p.measurementId,y),e.abrupt("return",p.measurementId);case 18:case"end":return e.stop()}}),e)}))),NE.apply(this,arguments)}var AE,PE,RE=function(){function e(t){h(this,e),this.app=t}return d(e,[{key:"_delete",value:function(){return delete DE[this.app.options.appId],Promise.resolve()}}]),e}(),DE={},OE=[],LE={},ME="dataLayer",FE="gtag",UE=!1;function VE(e){if(UE)throw pE.create("already-initialized");e.dataLayerName&&(ME=e.dataLayerName),e.gtagName&&(FE=e.gtagName)}function jE(e,t,n){!function(){var e=[];if(z()&&e.push("This is a browser extension environment."),Y()||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"(".concat(t+1,") ").concat(e)})).join(" "),n=pE.create("invalid-analytics-context",{errorInfo:t});iE.warn(n.message)}}();var r=e.options.appId;if(!r)throw pE.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw pE.create("no-api-key");iE.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=DE[r])throw pE.create("already-exists",{id:r});if(!UE){!function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(ME);var i=hE(DE,OE,LE,ME,FE),a=i.wrappedGtag,o=i.gtagCore;PE=a,AE=o,UE=!0}return DE[r]=function(e,t,n,r,i,a,o){return NE.apply(this,arguments)}(e,OE,LE,t,AE,ME,n),new RE(e)}function qE(){return(qE=De(S.mark((function e(t,n,r,i,a){var o,u;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!a.global){e.next=5;break}return t("event",r,i),e.abrupt("return");case 5:return e.next=7,n;case 7:o=e.sent,u=Object.assign(Object.assign({},i),{send_to:o}),t("event",r,u);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function BE(){return(BE=De(S.mark((function e(t,n,r,i){var a;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||!i.global){e.next=5;break}return t("set",{screen_name:r}),e.abrupt("return",Promise.resolve());case 5:return e.next=7,n;case 7:a=e.sent,t("config",a,{update:!0,screen_name:r});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zE(){return zE=De(S.mark((function e(t,n,r,i){var a;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||!i.global){e.next=5;break}return t("set",{user_id:r}),e.abrupt("return",Promise.resolve());case 5:return e.next=7,n;case 7:a=e.sent,t("config",a,{update:!0,user_id:r});case 9:case"end":return e.stop()}}),e)}))),zE.apply(this,arguments)}function WE(){return WE=De(S.mark((function e(t,n,r,i){var a,o,u,s,c;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||!i.global){e.next=7;break}for(a={},o=0,u=Object.keys(r);o<u.length;o++)s=u[o],a["user_properties.".concat(s)]=r[s];return t("set",a),e.abrupt("return",Promise.resolve());case 7:return e.next=9,n;case 9:c=e.sent,t("config",c,{update:!0,user_properties:r});case 11:case"end":return e.stop()}}),e)}))),WE.apply(this,arguments)}function KE(){return(KE=De(S.mark((function e(t,n){var r;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:r=e.sent,window["ga-disable-".concat(r)]=!n;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function GE(){return HE.apply(this,arguments)}function HE(){return(HE=De(S.mark((function e(){var t;return S.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!z()){e.next=2;break}return e.abrupt("return",!1);case 2:if(Y()){e.next=4;break}return e.abrupt("return",!1);case 4:if(H()){e.next=6;break}return e.abrupt("return",!1);case 6:return e.prev=6,e.next=9,Q();case 9:return t=e.sent,e.abrupt("return",t);case 13:return e.prev=13,e.t0=e.catch(6),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})))).apply(this,arguments)}function QE(e,t,n){e=xe(e),function(e,t,n,r){return BE.apply(this,arguments)}(PE,DE[e.app.options.appId],t,n).catch((function(e){return iE.error(e)}))}function YE(e,t,n){e=xe(e),function(e,t,n,r){return zE.apply(this,arguments)}(PE,DE[e.app.options.appId],t,n).catch((function(e){return iE.error(e)}))}function $E(e,t,n){e=xe(e),function(e,t,n,r){return WE.apply(this,arguments)}(PE,DE[e.app.options.appId],t,n).catch((function(e){return iE.error(e)}))}function XE(e,t){e=xe(e),function(e,t){return KE.apply(this,arguments)}(DE[e.app.options.appId],t).catch((function(e){return iE.error(e)}))}function JE(e,t,n,r){e=xe(e),function(e,t,n,r,i){return qE.apply(this,arguments)}(PE,DE[e.app.options.appId],t,n,r).catch((function(e){return iE.error(e)}))}var ZE="@firebase/analytics",eC="0.7.8";at(new Oe(eE,(function(e,t){var n=t.options;return jE(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),at(new Oe("analytics-internal",(function(e){try{var t=e.getProvider(eE).getImmediate();return{logEvent:function(e,n,r){return JE(t,e,n,r)}}}catch(n){throw pE.create("interop-component-reg-failed",{reason:n})}}),"PRIVATE")),gt(ZE,eC),gt(ZE,eC,"esm2017");var tC,nC=function(){function e(t,n){h(this,e),this.app=t,this._delegate=n}return d(e,[{key:"logEvent",value:function(e,t,n){JE(this._delegate,e,t,n)}},{key:"setCurrentScreen",value:function(e,t){QE(this._delegate,e,t)}},{key:"setUserId",value:function(e,t){YE(this._delegate,e,t)}},{key:"setUserProperties",value:function(e,t){$E(this._delegate,e,t)}},{key:"setAnalyticsCollectionEnabled",value:function(e){XE(this._delegate,e)}}]),e}();!function(e){e.ADD_SHIPPING_INFO="add_shipping_info",e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SELECT_ITEM="select_item",e.SELECT_PROMOTION="select_promotion",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_CART="view_cart",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"}(tC||(tC={}));var rC=function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("analytics").getImmediate();return new nC(t,n)};!function(){var e={Analytics:nC,settings:VE,isSupported:GE,EventName:tC};Bt.INTERNAL.registerComponent(new Oe("analytics-compat",rC,"PUBLIC").setServiceProps(e).setMultipleInstances(!0))}(),Bt.registerVersion("@firebase/analytics-compat","0.1.9");var iC="@firebase/database",aC="0.12.8",oC="";function uC(e){oC=e}var sC=function(){function e(t){h(this,e),this.domStorage_=t,this.prefix_="firebase:"}return d(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),te(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ee(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),cC=function(){function e(){h(this,e),this.cache_={},this.isInMemoryStorage=!0}return d(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return re(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),lC=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new sC(t)}}catch(n){}return new cC},hC=lC("localStorage"),fC=lC("sessionStorage"),dC=new Qe("@firebase/database"),pC=function(){var e=1;return function(){return e++}}(),vC=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,A(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new fe;n.update(t);var r=n.digest();return D.encodeByteArray(r)},yC=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?te(r):r,t+=" "}return t},mC=null,gC=!0,kC=function(e,t){A(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(dC.logLevel=Ve.VERBOSE,mC=dC.log.bind(dC),t&&fC.set("logging_enabled",!0)):"function"===typeof e?mC=e:(mC=null,fC.remove("logging_enabled"))},wC=function(){if(!0===gC&&(gC=!1,null===mC&&!0===fC.get("logging_enabled")&&kC(!0)),mC){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=yC.apply(null,t);mC(r)}},bC=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];wC.apply(void 0,[e].concat(n))}},_C=function(){var e="FIREBASE INTERNAL ERROR: "+yC.apply(void 0,arguments);dC.error(e)},xC=function(){var e="FIREBASE FATAL ERROR: ".concat(yC.apply(void 0,arguments));throw dC.error(e),new Error(e)},IC=function(){var e="FIREBASE WARNING: "+yC.apply(void 0,arguments);dC.warn(e)},SC=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},TC="[MIN_NAME]",EC="[MAX_NAME]",CC=function(e,t){if(e===t)return 0;if(e===TC||t===EC)return-1;if(t===TC||e===EC)return 1;var n=UC(e),r=UC(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},NC=function(e,t){return e===t?0:e<t?-1:1},AC=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+te(t))},PC=function e(t){if("object"!==typeof t||null===t)return te(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=te(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},RC=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function DC(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var OC=function(e){A(!SC(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var LC=new RegExp("^-?(0*)\\d{1,10}$"),MC=-2147483648,FC=2147483647,UC=function(e){if(LC.test(e)){var t=Number(e);if(t>=MC&&t<=FC)return t}return null},VC=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw IC("Exception was thrown by user callback.",e),t}),Math.floor(0))}},jC=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},qC=function(){function e(t,n){var r=this;h(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return d(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){IC('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),BC=function(){function e(t,n,r){var i=this;h(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return d(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(wC("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',IC(e)}}]),e}(),zC=function(){function e(t){h(this,e),this.accessToken=t}return d(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();zC.OWNER="owner";var WC="5",KC=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,GC="websocket",HC="long_polling",QC=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];h(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=hC.get("host:"+t)||this._host}return d(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&hC.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function YC(e,t,n){var r;if(A("string"===typeof t,"typeof type must == string"),A("object"===typeof n,"typeof params must == object"),t===GC)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==HC)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return DC(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var $C=function(){function e(){h(this,e),this.counters_={}}return d(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;re(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return F(void 0,this.counters_)}}]),e}(),XC={},JC={};function ZC(e){var t=e.toString();return XC[t]||(XC[t]=new $C),XC[t]}var eN=function(){function e(t){h(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return d(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&VC((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),tN="start",nN="close",rN=function(){function e(t,n,r,i,a,o,u){var s=this;h(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bC(t),this.stats_=ZC(n),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),YC(n,HC,e)}}return d(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new eN(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(G()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new iN((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===tN)n.id=a,n.password=o;else{if(i!==nN)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=WC,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&KC.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=te(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=O(t),r=RC(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!G()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=te(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!G()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),iN=function(){function e(t,n,r,i){if(h(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,G())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=pC(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){wC("frame writing exception"),u.stack&&wC(u.stack),wC(u)}}}return d(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;G()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){wC("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||wC("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),aN=null;"undefined"!==typeof MozWebSocket?aN=MozWebSocket:"undefined"!==typeof WebSocket&&(aN=WebSocket);var oN=function(){function e(t,n,r,i,a,o,u){h(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bC(this.connId),this.stats_=ZC(n),this.connURL=e.connectionURL_(n,o,u,i),this.nodeAdmin=n.nodeAdmin}return d(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,hC.set("previous_websocket_failure",!0);try{if(G()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/".concat(WC,"/").concat(oC,"/").concat(process.platform,"/").concat(r),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(i.proxy={origin:o}),this.mySock=new aN(this.connURL,[],i)}else{var u={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new aN(this.connURL,[],u)}}catch(c){this.log_("Error instantiating WebSocket.");var s=c.message||c.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){hC.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=ee(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(A(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=te(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=RC(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r){var i={};return i.v=WC,!G()&&"undefined"!==typeof location&&location.hostname&&KC.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i.ac=r),YC(e,GC,i)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==aN&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return hC.isInMemoryStorage||!0===hC.get("previous_websocket_failure")}}]),e}();oN.responsesRequiredToBeHealthy=2,oN.healthyTimeout=3e4;var uN=function(){function e(t){h(this,e),this.initTransports_(t)}return d(e,[{key:"initTransports_",value:function(t){var n=oN&&oN.isAvailable(),r=n&&!oN.previouslyFailed();if(t.webSocketOnly&&(n||IC("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[oN];else{var i,a=this.transports_=[],o=p(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[rN,oN]}}]),e}(),sN=function(){function e(t,n,r,i,a,o,u,s,c,l){h(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bC("c:"+this.id+":"),this.transportManager_=new uN(n),this.log_("Connection created"),this.start_()}return d(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=jC((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=AC("t",e),n=AC("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=AC("t",e),n=AC("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=AC("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?_C("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_C("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),WC!==n&&IC("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),jC((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):jC((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(hC.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),cN=function(){function e(){h(this,e)}return d(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),lN=function(){function e(t){h(this,e),this.allowedEvents_=t,this.listeners_={},A(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return d(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=Pe(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){A(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),hN=function(e){m(n,e);var t=_(n);function n(){var e;return h(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||q()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return d(n,[{key:"getInitialEvent",value:function(e){return A("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(lN),fN=function(){function e(t,n){if(h(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return d(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function dN(){return new fN("")}function pN(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function vN(e){return e.pieces_.length-e.pieceNum_}function yN(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new fN(e.pieces_,t)}function mN(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function gN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function kN(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new fN(t,0)}function wN(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof fN)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new fN(n,0)}function bN(e){return e.pieceNum_>=e.pieces_.length}function _N(e,t){var n=pN(e),r=pN(t);if(null===n)return t;if(n===r)return _N(yN(e),yN(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function xN(e,t){for(var n=gN(e,0),r=gN(t,0),i=0;i<n.length&&i<r.length;i++){var a=CC(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function IN(e,t){if(vN(e)!==vN(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function SN(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(vN(e)>vN(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var TN=d((function e(t,n){h(this,e),this.errorPrefix_=n,this.parts_=gN(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=we(this.parts_[r]);EN(this)}));function EN(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+CN(e))}function CN(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var NN=function(e){m(n,e);var t=_(n);function n(){var e,r,i;return h(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return d(n,[{key:"getInitialEvent",value:function(e){return A("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(lN),AN=1e3,PN=function(e){m(n,e);var t=_(n);function n(e,r,i,a,o,u,s,c){var l;if(h(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=bC("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=AN,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!G())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return NN.getInstance().on("visible",l.onVisible_,v(l)),-1===e.host.indexOf("fblocal")&&hN.getInstance().on("online",l.onOnline_,v(l)),l}return d(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(te(i)),A(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){var t=this;this.initConnection_();var n=new U,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[a];void 0!==e&&i===e&&(delete t.outstandingGets_[a],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),A(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),A(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=ne(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=ne(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),A(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+te(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):_C("Unrecognized action received from server: "+te(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;A(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=AN,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=AN,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=AN),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=De(T().mark((function e(){var t,r,i,a,o,u,s,l,h,f,d,p,v,y,m=this;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,s=null,l=function(){s?s.close():(u=!0,i())},h=function(e){A(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:l,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:d=e.sent,p=c(d,2),v=p[0],y=p[1],u?wC("getToken() completed but was canceled"):(wC("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=y&&y.token,s=new sN(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){IC(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&IC(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){wC("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){wC("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ae(this.interruptReasons_)&&(this.reconnectDelay_=AN,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return PC(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new fN(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){wC("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){wC("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=p(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=p(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";G()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+oC.replace(/\./g,"-")]=1,q()?e["framework.cordova"]=1:W()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=hN.getInstance().currentlyOnline();return ae(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&re(e,"w")){var n=ie(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();IC("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(cN);PN.nextPersistentConnectionId_=0,PN.nextConnectionId_=0;var RN,DN=function(){function e(t,n){h(this,e),this.name=t,this.node=n}return d(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),ON=function(){function e(){h(this,e)}return d(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new DN(TC,e),r=new DN(TC,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return DN.MIN}}]),e}(),LN=function(e){m(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return d(n,[{key:"compare",value:function(e,t){return CC(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw P("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return DN.MIN}},{key:"maxPost",value:function(){return new DN(EC,RN)}},{key:"makePost",value:function(e,t){return A("string"===typeof e,"KeyIndex indexValue must always be a string."),new DN(e,RN)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return RN},set:function(e){RN=e}}]),n}(ON),MN=new LN,FN=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;h(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return d(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),UN=function(){function e(t,n,r,i,a){h(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:qN.EMPTY_NODE,this.right=null!=a?a:qN.EMPTY_NODE}return d(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return qN.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return qN.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();UN.RED=!0,UN.BLACK=!1;var VN,jN=function(){function e(){h(this,e)}return d(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new UN(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),qN=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;h(this,e),this.comparator_=t,this.root_=n}return d(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,UN.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,UN.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new FN(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new FN(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new FN(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new FN(this.root_,null,this.comparator_,!0,e)}}]),e}();function BN(e,t){return CC(e.name,t.name)}function zN(e,t){return CC(e,t)}qN.EMPTY_NODE=new jN;var WN,KN,GN,HN=function(e){return"number"===typeof e?"number:"+OC(e):"string:"+e},QN=function(e){if(e.isLeafNode()){var t=e.val();A("string"===typeof t||"number"===typeof t||"object"===typeof t&&re(t,".sv"),"Priority must be a string or number.")}else A(e===VN||e.isEmpty(),"priority of unexpected type.");A(e===VN||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},YN=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;h(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,A(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),QN(this.priorityNode_)}return d(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return bN(t)?this:".priority"===pN(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=pN(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(A(".priority"!==r||1===vN(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(yN(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+HN(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?OC(this.value_):this.value_,this.lazyHash_=vC(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(A(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return A(i>=0,"Unknown leaf type: "+n),A(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return WN},set:function(e){WN=e}}]),e}();YN.VALUE_TYPE_ORDER=["object","boolean","number","string"];var $N,XN,JN=function(e){m(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return d(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?CC(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return DN.MIN}},{key:"maxPost",value:function(){return new DN(EC,new YN("[PRIORITY-POST]",GN))}},{key:"makePost",value:function(e,t){var n=KN(e);return new DN(t,new YN("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(ON),ZN=new JN,eA=Math.log(2),tA=function(){function e(t){h(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/eA,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return d(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),nA=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new UN(o,a.node,UN.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new UN(o,a.node,UN.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],h=n?n(l):l;s(new UN(h,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?u(h,UN.BLACK):(u(h,UN.BLACK),u(h,UN.RED))}return a}(new tA(e.length));return new qN(r||t,a)},rA={},iA=function(){function e(t,n){h(this,e),this.indexes_=t,this.indexSet_=n}return d(e,[{key:"get",value:function(e){var t=ie(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof qN?t:null}},{key:"hasIndex",value:function(e){return re(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){A(t!==MN,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(DN.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?nA(i,t.getCompare()):rA;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this,i=oe(this.indexes_,(function(e,i){var a=ie(r.indexSet_,i);if(A(a,"Missing index implementation for "+i),e===rA){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(DN.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),nA(o,a.getCompare())}return rA}var c=n.get(t.name),l=e;return c&&(l=l.remove(new DN(t.name,c))),l.insert(t,t.node)}));return new e(i,this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(oe(this.indexes_,(function(e){if(e===rA)return e;var r=n.get(t.name);return r?e.remove(new DN(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return A(rA&&ZN,"ChildrenNode.ts has not been loaded"),$N=$N||new e({".priority":rA},{".priority":ZN})}}]),e}(),aA=function(){function e(t,n,r){h(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&QN(this.priorityNode_),this.children_.isEmpty()&&A(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return d(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||XN}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?XN:t}},{key:"getChild",value:function(e){var t=pN(e);return null===t?this:this.getImmediateChild(t).getChild(yN(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(A(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new DN(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?XN:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=pN(e);if(null===n)return t;A(".priority"!==pN(e)||1===vN(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(yN(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(ZN,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+HN(this.getPriority().val())+":"),this.forEachChild(ZN,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":vC(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new DN(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new DN(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new DN(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,DN.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,DN.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===oA?-1:0}},{key:"withIndex",value:function(t){if(t===MN||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===MN||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(ZN),r=t.getIterator(ZN),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===MN?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return XN||(XN=new e(new qN(zN),null,iA.Default))}}]),e}();aA.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var oA=new(function(e){m(n,e);var t=_(n);function n(){return h(this,n),t.call(this,new qN(zN),aA.EMPTY_NODE,iA.Default)}return d(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return aA.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(aA));Object.defineProperties(DN,{MIN:{value:new DN(TC,aA.EMPTY_NODE)},MAX:{value:new DN(EC,oA)}}),LN.__EMPTY_NODE=aA.EMPTY_NODE,YN.__childrenNodeConstructor=aA,VN=oA,function(e){GN=e}(oA);function uA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return aA.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),A(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new YN(n,uA(t))}if(e instanceof Array){var r=aA.EMPTY_NODE;return DC(e,(function(t,n){if(re(e,t)&&"."!==t.substring(0,1)){var i=uA(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(uA(t))}var i=[],a=!1,o=e;if(DC(o,(function(e,t){if("."!==e.substring(0,1)){var n=uA(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new DN(e,n)))}})),0===i.length)return aA.EMPTY_NODE;var u=nA(i,BN,(function(e){return e.name}),zN);if(a){var s=nA(i,ZN.getCompare());return new aA(u,uA(t),new iA({".priority":s},{".priority":ZN}))}return new aA(u,uA(t),iA.Default)}!function(e){KN=e}(uA);var sA=function(e){m(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this)).indexPath_=e,A(!bN(e)&&".priority"!==pN(e),"Can't create PathIndex with empty path or .priority key"),r}return d(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?CC(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=uA(e),r=aA.EMPTY_NODE.updateChild(this.indexPath_,n);return new DN(t,r)}},{key:"maxPost",value:function(){var e=aA.EMPTY_NODE.updateChild(this.indexPath_,oA);return new DN(EC,e)}},{key:"toString",value:function(){return gN(this.indexPath_,0).join("/")}}]),n}(ON),cA=function(e){m(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return d(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?CC(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return DN.MIN}},{key:"maxPost",value:function(){return DN.MAX}},{key:"makePost",value:function(e,t){var n=uA(e);return new DN(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(ON),lA=new cA,hA="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",fA=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=hA.charAt(n%64),n=Math.floor(n/64);A(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=hA.charAt(t[r]);return A(20===o.length,"nextPushId: Length should be 20."),o}}(),dA=function(e){if("2147483647"===e)return"-";var t=UC(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return EC;var a=n[i],o=hA.charAt(hA.indexOf(a)+1);return n[i]=o,n.slice(0,i+1).join("")},pA=function(e){if("-2147483648"===e)return TC;var t=UC(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=hA.charAt(hA.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function vA(e){return{type:"value",snapshotNode:e}}function yA(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function mA(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function gA(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var kA=function(){function e(t){h(this,e),this.index_=t}return d(e,[{key:"updateChild",value:function(e,t,n,r,i,a){A(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(mA(t,o)):A(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(yA(t,n)):a.trackChildChange(gA(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(ZN,(function(e,r){t.hasChild(e)||n.trackChildChange(mA(e,r))})),t.isLeafNode()||t.forEachChild(ZN,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(gA(t,r,i))}else n.trackChildChange(yA(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?aA.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),wA=function(){function e(t){h(this,e),this.indexedFilter_=new kA(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return d(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new DN(t,n))||(n=aA.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=aA.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(aA.EMPTY_NODE);var i=this;return t.forEachChild(ZN,(function(e,t){i.matches(new DN(e,t))||(r=r.updateImmediateChild(e,aA.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),bA=function(){function e(t){h(this,e),this.rangedFilter_=new wA(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return d(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new DN(t,n))||(n=aA.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=aA.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=aA.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var u,s,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(aA.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),s=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(e,t){return h(t,e)}}else l=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),s=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var f=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(u,p)<=0&&(d=!0),d&&f<this.limit_&&c(p,s)<=0?f++:r=r.updateImmediateChild(p.name,aA.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var u=e;A(u.numChildren()===this.limit_,"");var s=new DN(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(u.hasChild(t)){for(var h=u.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,s);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(gA(t,n,h)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(mA(t,h));var p=u.updateImmediateChild(t,aA.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(yA(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&a(c,s)>=0?(null!=i&&(i.trackChildChange(mA(c.name,c.node)),i.trackChildChange(yA(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,aA.EMPTY_NODE)):e}}]),e}(),_A=function(){function e(){h(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ZN}return d(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return A(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return A(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:TC}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return A(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return A(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:EC}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return A(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===ZN}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function xA(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function IA(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function SA(e,t){var n=e.copy();return n.index_=t,n}function TA(e){var t,n={};return e.isDefault()||(e.index_===ZN?t="$priority":e.index_===lA?t="$value":e.index_===MN?t="$key":(A(e.index_ instanceof sA,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=te(t),e.startSet_&&(n.startAt=te(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+te(e.indexStartName_))),e.endSet_&&(n.endAt=te(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+te(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function EA(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==ZN&&(t.i=e.index_.toString()),t}var CA=function(e){m(n,e);var t=_(n);function n(e,r,i,a){var o;return h(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=bC("p:rest:"),o.listens_={},o}return d(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=TA(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),ie(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=TA(e._queryParams),r=e._path.toString(),i=new U;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=c(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+ce(n);t.log_("Sending REST request for "+s);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+s+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=ee(l.responseText)}catch(n){IC("Failed to parse JSON response for "+s+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&IC("Got unsuccessful REST response for "+s+" Status: "+l.status),r(l.status);r=null}},l.open("GET",s,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(A(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(cN),NA=function(){function e(){h(this,e),this.rootNode_=aA.EMPTY_NODE}return d(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function AA(){return{value:null,children:new Map}}function PA(e,t,n){if(bN(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=pN(t);e.children.has(r)||e.children.set(r,AA()),PA(e.children.get(r),t=yN(t),n)}}function RA(e,t){if(bN(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(ZN,(function(t,n){PA(e,new fN(t),n)})),RA(e,t)}if(e.children.size>0){var r=pN(t);if(t=yN(t),e.children.has(r))RA(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function DA(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){DA(r,new fN(t.toString()+"/"+e),n)}))}var OA,LA=function(){function e(t){h(this,e),this.collection_=t,this.last_=null}return d(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&DC(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),MA=function(){function e(t,n){h(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new LA(t);var r=1e4+2e4*Math.random();jC(this.reportStats_.bind(this),Math.floor(r))}return d(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;DC(t,(function(t,i){i>0&&re(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),jC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function FA(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(OA||(OA={}));var UA,VA=function(){function e(t,n,r){h(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=OA.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return d(e,[{key:"operationForChild",value:function(t){if(bN(this.path)){if(null!=this.affectedTree.value)return A(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new fN(t));return new e(dN(),n,this.revert)}return A(pN(this.path)===t,"operationForChild called for unrelated child."),new e(yN(this.path),this.affectedTree,this.revert)}}]),e}(),jA=function(){function e(t,n){h(this,e),this.source=t,this.path=n,this.type=OA.LISTEN_COMPLETE}return d(e,[{key:"operationForChild",value:function(t){return bN(this.path)?new e(this.source,dN()):new e(this.source,yN(this.path))}}]),e}(),qA=function(){function e(t,n,r){h(this,e),this.source=t,this.path=n,this.snap=r,this.type=OA.OVERWRITE}return d(e,[{key:"operationForChild",value:function(t){return bN(this.path)?new e(this.source,dN(),this.snap.getImmediateChild(t)):new e(this.source,yN(this.path),this.snap)}}]),e}(),BA=function(){function e(t,n,r){h(this,e),this.source=t,this.path=n,this.children=r,this.type=OA.MERGE}return d(e,[{key:"operationForChild",value:function(t){if(bN(this.path)){var n=this.children.subtree(new fN(t));return n.isEmpty()?null:n.value?new qA(this.source,dN(),n.value):new e(this.source,dN(),n)}return A(pN(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,yN(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),zA=function(){function e(t,n,r){h(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return d(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(bN(e))return this.isFullyInitialized()&&!this.filtered_;var t=pN(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),WA=d((function e(t){h(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function KA(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw P("Should only compare child_ events.");var r=new DN(t.childName,t.snapshotNode),i=new DN(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function GA(e,t){return{eventCache:e,serverCache:t}}function HA(e,t,n,r){return GA(new zA(t,n,r),e.serverCache)}function QA(e,t,n,r){return GA(e.eventCache,new zA(t,n,r))}function YA(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function $A(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var XA=function(){return UA||(UA=new qN(NC)),UA},JA=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:XA();h(this,e),this.value=t,this.children=n}return d(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:dN(),value:this.value};if(bN(e))return null;var n=pN(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(yN(e),t);return null!=i?{path:wN(new fN(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(bN(t))return this;var n=pN(t),r=this.children.get(n);return null!==r?r.subtree(yN(t)):new e(null)}},{key:"set",value:function(t,n){if(bN(t))return new e(n,this.children);var r=pN(t),i=(this.children.get(r)||new e(null)).set(yN(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(bN(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=pN(t),r=this.children.get(n);if(r){var i,a=r.remove(yN(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(bN(e))return this.value;var t=pN(e),n=this.children.get(t);return n?n.get(yN(e)):null}},{key:"setTree",value:function(t,n){if(bN(t))return n;var r,i=pN(t),a=(this.children.get(i)||new e(null)).setTree(yN(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(dN(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(wN(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,dN(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(bN(e))return null;var i=pN(e),a=this.children.get(i);return a?a.findOnPath_(yN(e),wN(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,dN(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(bN(t))return this;this.value&&r(n,this.value);var i=pN(t),a=this.children.get(i);return a?a.foreachOnPath_(yN(t),wN(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(dN(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(wN(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return DC(t,(function(e,t){n=n.set(new fN(e),t)})),n}}]),e}(),ZA=function(){function e(t){h(this,e),this.writeTree_=t}return d(e,null,[{key:"empty",value:function(){return new e(new JA(null))}}]),e}();function eP(e,t,n){if(bN(t))return new ZA(new JA(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=_N(i,t);return a=a.updateChild(o,n),new ZA(e.writeTree_.set(i,a))}var u=new JA(n),s=e.writeTree_.setTree(t,u);return new ZA(s)}function tP(e,t,n){var r=e;return DC(n,(function(e,n){r=eP(r,wN(t,e),n)})),r}function nP(e,t){if(bN(t))return ZA.empty();var n=e.writeTree_.setTree(t,new JA(null));return new ZA(n)}function rP(e,t){return null!=iP(e,t)}function iP(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(_N(n.path,t)):null}function aP(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ZN,(function(e,n){t.push(new DN(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new DN(e,n.value))})),t}function oP(e,t){if(bN(t))return e;var n=iP(e,t);return new ZA(null!=n?new JA(n):e.writeTree_.subtree(t))}function uP(e){return e.writeTree_.isEmpty()}function sP(e,t){return cP(dN(),e.writeTree_,t)}function cP(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(A(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=cP(wN(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(wN(e,".priority"),r)),n}function lP(e,t){return IP(t,e)}function hP(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function fP(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));A(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&dP(u,r.path)?i=!1:SN(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=vP(e.allWrites,pP,dN()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=nP(e.visibleWrites,r.path):DC(r.children,(function(t){e.visibleWrites=nP(e.visibleWrites,wN(r.path,t))}));return!0}return!1}function dP(e,t){if(e.snap)return SN(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&SN(wN(e.path,n),t))return!0;return!1}function pP(e){return e.visible}function vP(e,t,n){for(var r=ZA.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)SN(n,o)?r=eP(r,u=_N(n,o),a.snap):SN(o,n)&&(u=_N(o,n),r=eP(r,dN(),a.snap.getChild(u)));else{if(!a.children)throw P("WriteRecord should have .snap or .children");if(SN(n,o))r=tP(r,u=_N(n,o),a.children);else if(SN(o,n))if(bN(u=_N(o,n)))r=tP(r,dN(),a.children);else{var s=ie(a.children,pN(u));if(s){var c=s.getChild(yN(u));r=eP(r,dN(),c)}}}}}return r}function yP(e,t,n,r,i){if(r||i){var a=oP(e.visibleWrites,t);if(!i&&uP(a))return n;if(i||null!=n||rP(a,dN())){return sP(vP(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(SN(e.path,t)||SN(t,e.path))}),t),n||aA.EMPTY_NODE)}return null}var o=iP(e.visibleWrites,t);if(null!=o)return o;var u=oP(e.visibleWrites,t);return uP(u)?n:null!=n||rP(u,dN())?sP(u,n||aA.EMPTY_NODE):null}function mP(e,t,n,r){return yP(e.writeTree,e.treePath,t,n,r)}function gP(e,t){return function(e,t,n){var r=aA.EMPTY_NODE,i=iP(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(ZN,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=oP(e.visibleWrites,t);return n.forEachChild(ZN,(function(e,t){var n=sP(oP(a,new fN(e)),t);r=r.updateImmediateChild(e,n)})),aP(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return aP(oP(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function kP(e,t,n,r){return function(e,t,n,r,i){A(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=wN(t,n);if(rP(e.visibleWrites,a))return null;var o=oP(e.visibleWrites,a);return uP(o)?i.getChild(n):sP(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function wP(e,t){return function(e,t){return iP(e.visibleWrites,t)}(e.writeTree,wN(e.treePath,t))}function bP(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=oP(e.visibleWrites,t),c=iP(s,dN());if(null!=c)u=c;else{if(null==n)return[];u=sP(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function _P(e,t,n){return function(e,t,n,r){var i=wN(t,n),a=iP(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?sP(oP(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function xP(e,t){return IP(wN(e.treePath,t),e.writeTree)}function IP(e,t){return{treePath:e,writeTree:t}}var SP=function(){function e(){h(this,e),this.changeMap=new Map}return d(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;A("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),A(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,gA(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,mA(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,yA(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw P("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,gA(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),TP=new(function(){function e(){h(this,e)}return d(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),EP=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;h(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return d(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new zA(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _P(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:$A(this.viewCache_),i=bP(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function CP(e,t,n,r,i){var a,o,u=new SP;if(n.type===OA.OVERWRITE){var s=n;s.source.fromUser?a=PP(e,t,s.path,s.snap,r,i,u):(A(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!bN(s.path),a=AP(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===OA.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=wN(n,r);RP(t,pN(c))&&(u=PP(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=wN(n,r);RP(t,pN(c))||(u=PP(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(A(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=OP(e,t,c.path,c.children,r,i,o,u))}else if(n.type===OA.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=wP(r,n))return t;var u,s=new EP(r,t,i),c=t.eventCache.getNode();if(bN(n)||".priority"===pN(n)){var l;if(t.serverCache.isFullyInitialized())l=mP(r,$A(t));else{var h=t.serverCache.getNode();A(h instanceof aA,"serverChildren would be complete if leaf node"),l=gP(r,h)}l=l,u=e.filter.updateFullNode(c,l,a)}else{var f=pN(n),d=_P(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(u=null!=d?e.filter.updateChild(c,f,d,yN(n),s,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,aA.EMPTY_NODE,yN(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=mP(r,$A(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=wP(r,dN()),HA(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=wP(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(bN(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return AP(e,t,n,s.getNode().getChild(n),i,a,u,o);if(bN(n)){var c=new JA(null);return s.getNode().forEachChild(MN,(function(e,t){c=c.set(new fN(e),t)})),OP(e,t,n,c,i,a,u,o)}return t}var l=new JA(null);return r.foreach((function(e,t){var r=wN(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),OP(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==OA.LISTEN_COMPLETE)throw P("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=QA(t,a.getNode(),a.isFullyInitialized()||bN(n),a.isFiltered());return NP(e,o,n,r,TP,i)}(e,t,n.path,r,u)}var h=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=YA(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(vA(YA(t)))}}(t,a,h),{viewCache:a,changes:h}}function NP(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=wP(r,n))return t;if(bN(n))if(A(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=$A(t),l=gP(r,c instanceof aA?c:aA.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=mP(r,$A(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=pN(n);if(".priority"===f){A(1===vN(n),"Can't have a priority with additional path components");var d=s.getNode(),p=kP(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,y=yN(n);if(s.isCompleteForChild(f)){u=t.serverCache.getNode();var m=kP(r,n,s.getNode(),u);v=null!=m?s.getNode().getImmediateChild(f).updateChild(y,m):s.getNode().getImmediateChild(f)}else v=_P(r,f,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),f,v,y,i,a):s.getNode()}}return HA(t,o,s.isFullyInitialized()||bN(n),e.filter.filtersNodes())}function AP(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(bN(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),h,null)}else{var f=pN(n);if(!c.isCompleteForPath(n)&&vN(n)>1)return t;var d=yN(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);s=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,TP,null)}var v=QA(t,s,c.isFullyInitialized()||bN(n),l.filtersNodes());return NP(e,v,n,i,new EP(i,v,a),u)}function PP(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new EP(i,t,a);if(bN(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=HA(t,s,!0,e.filter.filtersNodes());else{var h=pN(n);if(".priority"===h)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=HA(t,s,c.isFullyInitialized(),c.isFiltered());else{var f,d=yN(n),p=c.getNode().getImmediateChild(h);if(bN(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===mN(d)&&v.getChild(kN(d)).isEmpty()?v:v.updateChild(d,r):aA.EMPTY_NODE}if(p.equals(f))u=t;else u=HA(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function RP(e,t){return e.eventCache.isCompleteForChild(t)}function DP(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function OP(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=bN(n)?r:new JA(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=DP(0,t.serverCache.getNode().getImmediateChild(n),r);c=AP(e,c,new fN(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!s){var h=DP(0,t.serverCache.getNode().getImmediateChild(n),r);c=AP(e,c,new fN(n),h,i,a,o,u)}})),c}var LP,MP=function(){function e(t,n){h(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new kA(i.getIndex()),o=(r=i).loadsAllData()?new kA(r.getIndex()):r.hasLimit()?new bA(r):new wA(r);this.processor_=function(e){return{filter:e}}(o);var u=n.serverCache,s=n.eventCache,c=a.updateFullNode(aA.EMPTY_NODE,u.getNode(),null),l=o.updateFullNode(aA.EMPTY_NODE,s.getNode(),null),f=new zA(c,u.isFullyInitialized(),a.filtersNodes()),d=new zA(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=GA(d,f),this.eventGenerator_=new WA(this.query_)}return d(e,[{key:"query",get:function(){return this.query_}}]),e}();function FP(e,t){var n=$A(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!bN(t)&&!n.getImmediateChild(pN(t)).isEmpty())?n.getChild(t):null}function UP(e){return 0===e.eventRegistrations_.length}function VP(e,t,n){var r=[];if(n){A(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var u=e.eventRegistrations_[o];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function jP(e,t,n,r){t.type===OA.MERGE&&null!==t.source.queryId&&(A($A(e.viewCache_),"We should always have a full cache before handling merges"),A(YA(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=CP(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,A(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),A(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),A(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,qP(e,u.changes,u.viewCache.eventCache.getNode(),null)}function qP(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),KA(e,i,"child_removed",t,r,n),KA(e,i,"child_added",t,r,n),KA(e,i,"child_moved",a,r,n),KA(e,i,"child_changed",t,r,n),KA(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var BP,zP=d((function e(){h(this,e),this.views=new Map}));function WP(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return A(null!=a,"SyncTree gave us an op for an invalid query."),jP(a,t,n,r)}var o,u=[],s=p(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(jP(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function KP(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var u=mP(n,i?r:null),s=!1;u?s=!0:r instanceof aA?(u=gP(n,r),s=!1):(u=aA.EMPTY_NODE,s=!1);var c=GA(new zA(u,s,!1),new zA(r,i,!1));return new MP(t,c)}return o}function GP(e,t,n,r,i,a){var o=KP(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ZN,(function(e,t){r.push(yA(e,t))})),n.isFullyInitialized()&&r.push(vA(n.getNode())),qP(e,r,n.getNode(),t)}(o,n)}function HP(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],u=JP(e);if("default"===i){var s,l=p(e.views.entries());try{for(l.s();!(s=l.n()).done;){var h=c(s.value,2),f=h[0],d=h[1];o=o.concat(VP(d,n,r)),UP(d)&&(e.views.delete(f),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(y){l.e(y)}finally{l.f()}}else{var v=e.views.get(i);v&&(o=o.concat(VP(v,n,r)),UP(v)&&(e.views.delete(i),v.query._queryParams.loadsAllData()||a.push(v.query)))}return u&&!JP(e)&&a.push(new(A(LP,"Reference.ts has not been loaded"),LP)(t._repo,t._path)),{removed:a,events:o}}function QP(e){var t,n=[],r=p(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function YP(e,t){var n,r=null,i=p(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||FP(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function $P(e,t){if(t._queryParams.loadsAllData())return ZP(e);var n=t._queryIdentifier;return e.views.get(n)}function XP(e,t){return null!=$P(e,t)}function JP(e){return null!=ZP(e)}function ZP(e){var t,n=p(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var eR=1,tR=d((function e(t){h(this,e),this.listenProvider_=t,this.syncPointTree_=new JA(null),this.pendingWriteTree_={visibleWrites:ZA.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function nR(e,t,n,r,i){return function(e,t,n,r,i){A(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=eP(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?lR(e,new qA({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function rR(e,t,n,r){!function(e,t,n,r){A(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=tP(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=JA.fromObject(n);return lR(e,new BA({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function iR(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=hP(e.pendingWriteTree_,t),i=fP(e.pendingWriteTree_,t);if(i){var a=new JA(null);return null!=r.snap?a=a.set(dN(),!0):DC(r.children,(function(e){a=a.set(new fN(e),!0)})),lR(e,new VA(r.path,a,n))}return[]}function aR(e,t,n){return lR(e,new qA({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function oR(e,t,n,r){var i=t._path,a=e.syncPointTree_.get(i),o=[];if(a&&("default"===t._queryIdentifier||XP(a,t))){var u=HP(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var s=u.removed;o=u.events;var c=-1!==s.findIndex((function(e){return e._queryParams.loadsAllData()})),l=e.syncPointTree_.findOnPath(i,(function(e,t){return JP(t)}));if(c&&!l){var h=e.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=function(e){return e.fold((function(e,t,n){if(t&&JP(t))return[ZP(t)];var r=[];return t&&(r=QP(t)),DC(n,(function(e,t){r=r.concat(t)})),r}))}(h),d=0;d<f.length;++d){var p=f[d],v=p.query,y=dR(e,p);e.listenProvider_.startListening(kR(v),pR(e,v),y.hashFn,y.onComplete)}}if(!l&&s.length>0&&!r)if(c){e.listenProvider_.stopListening(kR(t),null)}else s.forEach((function(t){var n=e.queryToTagMap.get(vR(t));e.listenProvider_.stopListening(kR(t),n)}));!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=vR(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,s)}return o}function uR(e,t,n){var r=t._path,i=null,a=!1;e.syncPointTree_.foreachOnPath(r,(function(e,t){var n=_N(e,r);i=i||YP(t,n),a=a||JP(t)}));var o,u=e.syncPointTree_.get(r);(u?(a=a||JP(u),i=i||YP(u,dN())):(u=new zP,e.syncPointTree_=e.syncPointTree_.set(r,u)),null!=i)?o=!0:(o=!1,i=aA.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=YP(t,dN());n&&(i=i.updateImmediateChild(e,n))})));var s=XP(u,t);if(!s&&!t._queryParams.loadsAllData()){var c=vR(t);A(!e.queryToTagMap.has(c),"View does not exist, but we have a tag");var l=eR++;e.queryToTagMap.set(c,l),e.tagToQueryMap.set(l,c)}var h=GP(u,t,n,lP(e.pendingWriteTree_,r),i,o);if(!s&&!a){var f=$P(u,t);h=h.concat(function(e,t,n){var r=t._path,i=pR(e,t),a=dR(e,n),o=e.listenProvider_.startListening(kR(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)A(!JP(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var s=u.fold((function(e,t,n){if(!bN(e)&&t&&JP(t))return[ZP(t).query];var r=[];return t&&(r=r.concat(QP(t).map((function(e){return e.query})))),DC(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<s.length;++c){var l=s[c];e.listenProvider_.stopListening(kR(l),pR(e,l))}return o}(e,t,f))}return h}function sR(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=YP(n,_N(e,t));if(r)return r}));return yP(r,t,i,n,!0)}function cR(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=_N(e,n);r=r||YP(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||YP(i,dN()):(i=new zP,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new zA(r,!0,!1):null;return function(e){return YA(e.viewCache_)}(KP(i,t,lP(e.pendingWriteTree_,t._path),a?o.getNode():aA.EMPTY_NODE,a))}function lR(e,t){return hR(t,e.syncPointTree_,null,lP(e.pendingWriteTree_,dN()))}function hR(e,t,n,r){if(bN(e.path))return fR(e,t,n,r);var i=t.get(dN());null==n&&null!=i&&(n=YP(i,dN()));var a=[],o=pN(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=xP(r,o);a=a.concat(hR(u,s,c,l))}return i&&(a=a.concat(WP(i,e,r,n))),a}function fR(e,t,n,r){var i=t.get(dN());null==n&&null!=i&&(n=YP(i,dN()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=xP(r,t),s=e.operationForChild(t);s&&(a=a.concat(fR(s,i,o,u)))})),i&&(a=a.concat(WP(i,e,r,n))),a}function dR(e,t){var n=t.query,r=pR(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||aA.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=yR(e,n);if(r){var i=mR(r),a=i.path,o=i.queryId,u=_N(a,t);return gR(e,a,new jA(FA(o),u))}return[]}(e,n._path,r):function(e,t){return lR(e,new jA({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return oR(e,n,null,i)}}}function pR(e,t){var n=vR(t);return e.queryToTagMap.get(n)}function vR(e){return e._path.toString()+"$"+e._queryIdentifier}function yR(e,t){return e.tagToQueryMap.get(t)}function mR(e){var t=e.indexOf("$");return A(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new fN(e.substr(0,t))}}function gR(e,t,n){var r=e.syncPointTree_.get(t);return A(r,"Missing sync point for query tag that we're tracking"),WP(r,n,lP(e.pendingWriteTree_,t),null)}function kR(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(A(BP,"Reference.ts has not been loaded"),BP)(e._repo,e._path):e}var wR=function(){function e(t){h(this,e),this.node_=t}return d(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),bR=function(){function e(t,n){h(this,e),this.syncTree_=t,this.path_=n}return d(e,[{key:"getImmediateChild",value:function(t){var n=wN(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return sR(this.syncTree_,this.path_)}}]),e}(),_R=function(e,t,n){return e&&"object"===typeof e?(A(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?xR(e[".sv"],t,n):"object"===typeof e[".sv"]?IR(e[".sv"],t):void A(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},xR=function(e,t,n){if("timestamp"===e)return n.timestamp;A(!1,"Unexpected server value: "+e)},IR=function(e,t,n){e.hasOwnProperty("increment")||A(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&A(!1,"Unexpected increment value: "+r);var i=t.node();if(A(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},SR=function(e,t,n,r){return ER(t,new bR(n,e),r)},TR=function(e,t,n){return ER(e,new wR(t),n)};function ER(e,t,n){var r,i=e.getPriority().val(),a=_R(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=_R(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new YN(u,uA(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new YN(a))),s.forEachChild(ZN,(function(e,i){var a=ER(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var CR=d((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};h(this,e),this.name=t,this.parent=n,this.node=r}));function NR(e,t){for(var n=t instanceof fN?t:new fN(t),r=e,i=pN(n);null!==i;){var a=ie(r.node.children,i)||{children:{},childCount:0};r=new CR(i,r,a),i=pN(n=yN(n))}return r}function AR(e){return e.node.value}function PR(e,t){e.node.value=t,MR(e)}function RR(e){return e.node.childCount>0}function DR(e,t){DC(e.node.children,(function(n,r){t(new CR(n,e,r))}))}function OR(e,t,n,r){n&&!r&&t(e),DR(e,(function(e){OR(e,t,!0,r)})),n&&r&&t(e)}function LR(e){return new fN(null===e.parent?e.name:LR(e.parent)+"/"+e.name)}function MR(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===AR(e)&&!RR(e)}(n),i=re(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,MR(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,MR(e))}(e.parent,e.name,e)}var FR=/[\[\].#$\/\u0000-\u001F\u007F]/,UR=/[\[\].#$\u0000-\u001F\u007F]/,VR=10485760,jR=function(e){return"string"===typeof e&&0!==e.length&&!FR.test(e)},qR=function(e){return"string"===typeof e&&0!==e.length&&!UR.test(e)},BR=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!SC(e)||e&&"object"===typeof e&&re(e,".sv")},zR=function(e,t,n,r){r&&void 0===t||WR(me(e,"value"),t,n)},WR=function e(t,n,r){var i=r instanceof fN?new TN(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+CN(i));if("function"===typeof n)throw new Error(t+"contains a function "+CN(i)+" with contents = "+n.toString());if(SC(n))throw new Error(t+"contains "+n.toString()+" "+CN(i));if("string"===typeof n&&n.length>VR/3&&we(n)>VR)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+CN(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(DC(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!jR(n)))throw new Error(t+" contains an invalid key ("+n+") "+CN(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,s;s=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(s),u.byteLength_+=we(s),EN(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=we(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+CN(i)+" in addition to actual children.")}},KR=function(e,t,n,r){if(!r||void 0!==t){var i=me(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];DC(t,(function(e,t){var r=new fN(e);if(WR(i,t,wN(n,r)),".priority"===mN(r)&&!BR(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=gN(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!jR(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(xN);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&SN(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},GR=function(e,t,n){if(!n||void 0!==t){if(SC(t))throw new Error(me(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!BR(t))throw new Error(me(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},HR=function(e,t,n,r){if((!r||void 0!==n)&&!jR(n))throw new Error(me(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},QR=function(e,t,n,r){if((!r||void 0!==n)&&!qR(n))throw new Error(me(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},YR=function(e,t){if(".info"===pN(t))throw new Error(e+" failed = Can't modify data under /.info/")},$R=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!jR(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),qR(e)}(n))throw new Error(me(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},XR=d((function e(){h(this,e),this.eventLists_=[],this.recursionDepth_=0}));function JR(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||IN(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function ZR(e,t,n){JR(e,n),tD(e,(function(e){return IN(e,t)}))}function eD(e,t,n){JR(e,n),tD(e,(function(e){return SN(e,t)||SN(t,e)}))}function tD(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(nD(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function nD(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();mC&&wC("event: "+n.toString()),VC(r)}}}var rD="repo_interrupt",iD=function(){function e(t,n,r,i){h(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new XR,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=AA(),this.transactionQueueTree_=new CR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return d(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function aD(e,t,n){if(e.stats_=ZC(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new CA(e.repoInfo_,(function(t,n,r,i){sD(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return cD(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{te(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new PN(e.repoInfo_,t,(function(t,n,r,i){sD(e,t,n,r,i)}),(function(t){cD(e,t)}),(function(t){!function(e,t){DC(t,(function(t,n){lD(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return JC[n]||(JC[n]=t()),JC[n]}(e.repoInfo_,(function(){return new MA(e.stats_,e.server_)})),e.infoData_=new NA,e.infoSyncTree_=new tR({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=aR(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),lD(e,"connected",!1),e.serverSyncTree_=new tR({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);eD(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function oD(e){var t=e.infoData_.getNode(new fN(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function uD(e){return function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e}({timestamp:oD(e)})}function sD(e,t,n,r,i){e.dataUpdateCount++;var a=new fN(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=oe(n,(function(e){return uA(e)}));o=function(e,t,n,r){var i=yR(e,r);if(i){var a=mR(i),o=a.path,u=a.queryId,s=_N(o,t),c=JA.fromObject(n);return gR(e,o,new BA(FA(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=uA(n);o=function(e,t,n,r){var i=yR(e,r);if(null!=i){var a=mR(i),o=a.path,u=a.queryId,s=_N(o,t);return gR(e,o,new qA(FA(u),s,n))}return[]}(e.serverSyncTree_,a,s,i)}else if(r){var c=oe(n,(function(e){return uA(e)}));o=function(e,t,n){var r=JA.fromObject(n);return lR(e,new BA({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=uA(n);o=aR(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=_D(e,a)),eD(e.eventQueue_,h,o)}function cD(e,t){lD(e,"connected",t),!1===t&&function(e){mD(e,"onDisconnectEvents");var t=uD(e),n=AA();DA(e.onDisconnect_,dN(),(function(r,i){var a=SR(r,i,e.serverSyncTree_,t);PA(n,r,a)}));var r=[];DA(n,dN(),(function(t,n){r=r.concat(aR(e.serverSyncTree_,t,n));var i=ED(e,t);_D(e,i)})),e.onDisconnect_=AA(),eD(e.eventQueue_,dN(),r)}(e)}function lD(e,t,n){var r=new fN("/.info/"+t),i=uA(n);e.infoData_.updateSnapshot(r,i);var a=aR(e.infoSyncTree_,r,i);eD(e.eventQueue_,r,a)}function hD(e){return e.nextWriteId_++}function fD(e,t,n,r,i){mD(e,"set",{path:t.toString(),value:n,priority:r});var a=uD(e),o=uA(n,r),u=sR(e.serverSyncTree_,t),s=TR(o,u,a),c=hD(e),l=nR(e.serverSyncTree_,t,s,c,!0);JR(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||IC("set at "+t+" failed: "+n);var o=iR(e.serverSyncTree_,c,!a);eD(e.eventQueue_,t,o),gD(e,i,n,r)}));var h=ED(e,t);_D(e,h),eD(e.eventQueue_,h,[])}function dD(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&RA(e.onDisconnect_,t),gD(e,n,r,i)}))}function pD(e,t,n,r){var i=uA(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&PA(e.onDisconnect_,t,i),gD(e,r,n,a)}))}function vD(e,t,n){var r;r=".info"===pN(t._path)?oR(e.infoSyncTree_,t,n):oR(e.serverSyncTree_,t,n),ZR(e.eventQueue_,t._path,r)}function yD(e){e.persistentConnection_&&e.persistentConnection_.interrupt(rD)}function mD(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];wC.apply(void 0,[t].concat(r))}function gD(e,t,n,r){t&&VC((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function kD(e,t,n){return sR(e.serverSyncTree_,t,n)||aA.EMPTY_NODE}function wD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||TD(e,t),AR(t)){var n=ID(e,t);A(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&bD(e,LR(t),n)}else RR(t)&&DR(t,(function(t){wD(e,t)}))}function bD(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=kD(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];A(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=_N(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){mD(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(iR(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);TD(e,NR(e.transactionQueueTree_,t)),wD(e,e.transactionQueueTree_),eD(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)VC(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{IC("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}_D(e,t)}}),o)}function _D(e,t){var n=xD(e,t),r=LR(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s=t[a],c=_N(n,s.path),l=!1,h=void 0;if(A(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)l=!0,h=s.abortReason,i=i.concat(iR(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)l=!0,h="maxretry",i=i.concat(iR(e.serverSyncTree_,s.currentWriteId,!0));else{var f=kD(e,s.path,o);s.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){WR("transaction failed: Data returned ",d,s.path);var p=uA(d);"object"===typeof d&&null!=d&&re(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=s.currentWriteId,y=uD(e),m=TR(p,f,y);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=m,s.currentWriteId=hD(e),o.splice(o.indexOf(v),1),i=(i=i.concat(nR(e.serverSyncTree_,s.path,m,s.currentWriteId,s.applyLocally))).concat(iR(e.serverSyncTree_,v,!0))}else l=!0,h="nodata",i=i.concat(iR(e.serverSyncTree_,s.currentWriteId,!0))}eD(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===h?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(h),!1,null)}))))},s=0;s<t.length;s++)u(s);TD(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)VC(r[c]);wD(e,e.transactionQueueTree_)}(e,ID(e,n),r),r}function xD(e,t){var n,r=e.transactionQueueTree_;for(n=pN(t);null!==n&&void 0===AR(r);)r=NR(r,n),n=pN(t=yN(t));return r}function ID(e,t){var n=[];return SD(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function SD(e,t,n){var r=AR(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);DR(t,(function(t){SD(e,t,n)}))}function TD(e,t){var n=AR(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,PR(t,n.length>0?n:void 0)}DR(t,(function(t){TD(e,t)}))}function ED(e,t){var n=LR(xD(e,t)),r=NR(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){CD(e,t)})),CD(e,r),OR(r,(function(t){CD(e,t)})),n}function CD(e,t){var n=AR(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(A(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(A(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(iR(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?PR(t,void 0):n.length=a+1,eD(e.eventQueue_,LR(t),i);for(var u=0;u<r.length;u++)VC(r[u])}}var ND=function(e,t){var n=AD(e),r=n.namespace;"firebase.com"===n.domain&&xC(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||xC("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&IC("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new QC(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new fN(n.pathString)}},AD=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=p(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):IC("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var v=t.indexOf(".");r=t.substring(0,v).toLowerCase(),n=t.substring(v+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},PD=function(){function e(t,n,r,i){h(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return d(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+te(this.snapshot.exportVal())}}]),e}(),RD=function(){function e(t,n,r){h(this,e),this.eventRegistration=t,this.error=n,this.path=r}return d(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),DD=function(){function e(t,n){h(this,e),this.snapshotCallback=t,this.cancelCallback=n}return d(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return A(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),OD=function(){function e(t,n){h(this,e),this._repo=t,this._path=n}return d(e,[{key:"cancel",value:function(){var e=new U;return dD(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){YR("OnDisconnect.remove",this._path);var e=new U;return pD(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){YR("OnDisconnect.set",this._path),zR("OnDisconnect.set",e,this._path,!1);var t=new U;return pD(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){YR("OnDisconnect.setWithPriority",this._path),zR("OnDisconnect.setWithPriority",e,this._path,!1),GR("OnDisconnect.setWithPriority",t,!1);var n=new U;return function(e,t,n,r,i){var a=uA(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&PA(e.onDisconnect_,t,a),gD(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){YR("OnDisconnect.update",this._path),KR("OnDisconnect.update",e,this._path,!1);var t=new U;return function(e,t,n,r){if(ae(n))return wC("onDisconnect().update() called with empty data.  Don't do anything."),void gD(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&DC(n,(function(n,r){var i=uA(r);PA(e.onDisconnect_,wN(t,n),i)})),gD(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),LD=function(){function e(t,n,r,i){h(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return d(e,[{key:"key",get:function(){return bN(this._path)?null:mN(this._path)}},{key:"ref",get:function(){return new VD(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=EA(this._queryParams),t=PC(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return EA(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=xe(t))instanceof e))return!1;var n=this._repo===t._repo,r=IN(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function MD(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function FD(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===MN){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==TC)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==EC)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===ZN){if(null!=t&&!BR(t)||null!=n&&!BR(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(A(e.getIndex()instanceof sA||e.getIndex()===lA,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function UD(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var VD=function(e){m(n,e);var t=_(n);function n(e,r){return h(this,n),t.call(this,e,r,new _A,!1)}return d(n,[{key:"parent",get:function(){var e=kN(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(LD),jD=function(){function e(t,n,r){h(this,e),this._node=t,this.ref=n,this._index=r}return d(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new fN(t),r=zD(this.ref,t);return new e(this._node.getChild(n),r,ZN)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,zD(n.ref,r),ZN))}))}},{key:"hasChild",value:function(e){var t=new fN(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function qD(e,t){return(e=xe(e))._checkNotDeleted("ref"),void 0!==t?zD(e._root,t):e._root}function BD(e,t){(e=xe(e))._checkNotDeleted("refFromURL");var n=ND(t,e._repo.repoInfo_.nodeAdmin);$R("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||xC("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),qD(e,n.path.toString())}function zD(e,t){var n,r,i,a;return null===pN((e=xe(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),QR(n,r,i,a)):QR("child","path",t,!1),new VD(e._repo,wN(e._path,t))}function WD(e,t){e=xe(e),YR("push",e._path),zR("push",t,e._path,!0);var n,r=oD(e._repo),i=fA(r),a=zD(e,i),o=zD(e,i);return n=null!=t?GD(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function KD(e){return YR("remove",e._path),GD(e,null)}function GD(e,t){e=xe(e),YR("set",e._path),zR("set",t,e._path,!1);var n=new U;return fD(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function HD(e,t){e=xe(e),YR("setPriority",e._path),GR("setPriority",t,!1);var n=new U;return fD(e._repo,wN(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function QD(e,t,n){if(YR("setWithPriority",e._path),zR("setWithPriority",t,e._path,!1),GR("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new U;return fD(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function YD(e,t){KR("update",t,e._path,!1);var n=new U;return function(e,t,n,r){mD(e,"update",{path:t.toString(),value:n});var i=!0,a=uD(e),o={};if(DC(n,(function(n,r){i=!1,o[n]=SR(wN(t,n),uA(r),e.serverSyncTree_,a)})),i)wC("update() called with empty data.  Don't do anything."),gD(0,r,"ok",void 0);else{var u=hD(e),s=rR(e.serverSyncTree_,t,o,u);JR(e.eventQueue_,s),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||IC("update at "+t+" failed: "+n);var o=iR(e.serverSyncTree_,u,!a),s=o.length>0?_D(e,t):t;eD(e.eventQueue_,s,o),gD(0,r,n,i)})),DC(n,(function(n){var r=ED(e,wN(t,n));_D(e,r)})),eD(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function $D(e){return function(e,t){var n=cR(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=uA(n).withIndex(t._queryParams.getIndex()),i=aR(e.serverSyncTree_,t._path,r);return ZR(e.eventQueue_,t._path,i),Promise.resolve(r)}),(function(n){return mD(e,"get for query "+te(t)+" failed: "+n),Promise.reject(new Error(n))}))}((e=xe(e))._repo,e).then((function(t){return new jD(t,new VD(e._repo,e._path),e._queryParams.getIndex())}))}var XD=function(){function e(t){h(this,e),this.callbackContext=t}return d(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new PD("value",this,new jD(e.snapshotNode,new VD(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new RD(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),JD=function(){function e(t,n){h(this,e),this.eventType=t,this.callbackContext=n}return d(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new RD(this,e,t):null}},{key:"createEvent",value:function(e,t){A(null!=e.childName,"Child events should have a childName.");var n=zD(new VD(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new PD(e.type,this,new jD(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function ZD(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,u=function(t,n){vD(e._repo,e,c),o(t,n)};u.userCallback=n.userCallback,u.context=n.context,n=u}var s=new DD(n,a||void 0),c="value"===t?new XD(s):new JD(t,s);return function(e,t,n){var r;r=".info"===pN(t._path)?uR(e.infoSyncTree_,t,n):uR(e.serverSyncTree_,t,n),ZR(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return vD(e._repo,e,c)}}function eO(e,t,n,r){return ZD(e,"value",t,n,r)}function tO(e,t,n,r){return ZD(e,"child_added",t,n,r)}function nO(e,t,n,r){return ZD(e,"child_changed",t,n,r)}function rO(e,t,n,r){return ZD(e,"child_moved",t,n,r)}function iO(e,t,n,r){return ZD(e,"child_removed",t,n,r)}function aO(e,t,n){var r=null,i=n?new DD(n):null;"value"===t?r=new XD(i):t&&(r=new JD(t,i)),vD(e._repo,e,r)}var oO=d((function e(){h(this,e)})),uO=function(e){m(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this))._value=e,i._key=r,i}return d(n,[{key:"_apply",value:function(e){zR("endAt",this._value,e._path,!0);var t=IA(e._queryParams,this._value,this._key);if(UD(t),FD(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new LD(e._repo,e._path,t,e._orderByCalled)}}]),n}(oO);function sO(e,t){return HR("endAt","key",t,!0),new uO(e,t)}var cO=function(e){m(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this))._value=e,i._key=r,i}return d(n,[{key:"_apply",value:function(e){zR("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===MN?("string"===typeof t&&(t=pA(t)),r=IA(e,t,n)):r=IA(e,t,null==n?TC:pA(n)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(UD(t),FD(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new LD(e._repo,e._path,t,e._orderByCalled)}}]),n}(oO);function lO(e,t){return HR("endBefore","key",t,!0),new cO(e,t)}var hO=function(e){m(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this))._value=e,i._key=r,i}return d(n,[{key:"_apply",value:function(e){zR("startAt",this._value,e._path,!0);var t=xA(e._queryParams,this._value,this._key);if(UD(t),FD(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new LD(e._repo,e._path,t,e._orderByCalled)}}]),n}(oO);function fO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return HR("startAt","key",t,!0),new hO(e,t)}var dO=function(e){m(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this))._value=e,i._key=r,i}return d(n,[{key:"_apply",value:function(e){zR("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===MN?("string"===typeof t&&(t=dA(t)),r=xA(e,t,n)):r=xA(e,t,null==n?EC:dA(n)),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(UD(t),FD(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new LD(e._repo,e._path,t,e._orderByCalled)}}]),n}(oO);function pO(e,t){return HR("startAfter","key",t,!0),new dO(e,t)}var vO=function(e){m(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this))._limit=e,r}return d(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new LD(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(oO);function yO(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new vO(e)}var mO=function(e){m(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this))._limit=e,r}return d(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new LD(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(oO);function gO(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new mO(e)}var kO=function(e){m(n,e);var t=_(n);function n(e){var r;return h(this,n),(r=t.call(this))._path=e,r}return d(n,[{key:"_apply",value:function(e){MD(e,"orderByChild");var t=new fN(this._path);if(bN(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new sA(t),r=SA(e._queryParams,n);return FD(r),new LD(e._repo,e._path,r,!0)}}]),n}(oO);function wO(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return QR("orderByChild","path",e,!1),new kO(e)}var bO=function(e){m(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return d(n,[{key:"_apply",value:function(e){MD(e,"orderByKey");var t=SA(e._queryParams,MN);return FD(t),new LD(e._repo,e._path,t,!0)}}]),n}(oO);function _O(){return new bO}var xO=function(e){m(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return d(n,[{key:"_apply",value:function(e){MD(e,"orderByPriority");var t=SA(e._queryParams,ZN);return FD(t),new LD(e._repo,e._path,t,!0)}}]),n}(oO);function IO(){return new xO}var SO=function(e){m(n,e);var t=_(n);function n(){return h(this,n),t.apply(this,arguments)}return d(n,[{key:"_apply",value:function(e){MD(e,"orderByValue");var t=SA(e._queryParams,lA);return FD(t),new LD(e._repo,e._path,t,!0)}}]),n}(oO);function TO(){return new SO}var EO=function(e){m(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this))._value=e,i._key=r,i}return d(n,[{key:"_apply",value:function(e){if(zR("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new uO(this._value,this._key)._apply(new hO(this._value,this._key)._apply(e))}}]),n}(oO);function CO(e,t){return HR("equalTo","key",t,!0),new EO(e,t)}function NO(e){for(var t=xe(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];t=u._apply(t)}return t}!function(e){A(!LP,"__referenceConstructor has already been defined"),LP=e}(VD),function(e){A(!BP,"__referenceConstructor has already been defined"),BP=e}(VD);var AO={},PO=!1;function RO(e,t,n,r){e.repoInfo_=new QC("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function DO(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||xC("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),wC("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=ND(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=ND(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new zC(zC.OWNER):new BC(e.name,e.options,t);$R("Invalid Firebase Database URL",u),bN(u.path)||xC("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=AO[t.name];i||(i={},AO[t.name]=i);var a=i[e.toURLString()];a&&xC("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new iD(e,PO,n,r),i[e.toURLString()]=a,a}(s,e,l,new qC(e.name,n));return new OO(h,e)}var OO=function(){function e(t,n){h(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return d(e,[{key:"_repo",get:function(){return this._instanceStarted||(aD(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new VD(this._repo,dN())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=AO[t];n&&n[e.key]===e||xC("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),yD(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&xC("Cannot call "+e+" on a deleted database.")}}]),e}();function LO(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=xe(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&xC("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&xC('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new zC(zC.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:V(r.mockUserToken,e.app.options.projectId);a=new zC(o)}RO(i,t,n,a)}function MO(e){(e=xe(e))._checkNotDeleted("goOffline"),yD(e._repo)}function FO(e){var t;(e=xe(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(rD)}function UO(e,t){kC(e,t)}var VO={".sv":"timestamp"};var jO=function(){function e(t,n){h(this,e),this.committed=t,this.snapshot=n}return d(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function qO(e,t,n){var r;if(e=xe(e),YR("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new U,o=eO(e,(function(){}));return function(e,t,n,r,i,a){mD(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:pC(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=kD(e,t,void 0);o.currentInputSnapshot=u;var s=o.update(u.val());if(void 0===s)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{WR("transaction failed: Data returned ",s,o.path),o.status=0;var c,l=NR(e.transactionQueueTree_,t),h=AR(l)||[];h.push(o),PR(l,h),"object"===typeof s&&null!==s&&re(s,".priority")?(c=ie(s,".priority"),A(BR(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(sR(e.serverSyncTree_,t)||aA.EMPTY_NODE).getPriority().val();var f=uD(e),d=uA(s,c),p=TR(d,u,f);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=hD(e);var v=nR(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);eD(e.eventQueue_,t,v),wD(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new jD(r,new VD(e._repo,e._path),ZN),a.resolve(new jO(n,i)))}),o,i),a.promise}PN.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},PN.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){uC(ft),at(new Oe("database",(function(e,t){var n=t.instanceIdentifier;return DO(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),gt(iC,aC,e),gt(iC,aC,"esm2017")}();var BO=new Qe("@firebase/database-compat"),zO=function(e){var t="FIREBASE WARNING: "+e;BO.warn(t)},WO=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(me(e,t)+"must be a boolean.")},KO=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(me(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},GO=function(){function e(t){h(this,e),this._delegate=t}return d(e,[{key:"cancel",value:function(e){ye("OnDisconnect.cancel",0,1,arguments.length),ge("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){ye("OnDisconnect.remove",0,1,arguments.length),ge("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){ye("OnDisconnect.set",1,2,arguments.length),ge("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){ye("OnDisconnect.setWithPriority",2,3,arguments.length),ge("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(ye("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,zO("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ge("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),HO=function(){function e(t,n){h(this,e),this.committed=t,this.snapshot=n}return d(e,[{key:"toJSON",value:function(){return ye("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),QO=function(){function e(t,n){h(this,e),this._database=t,this._delegate=n}return d(e,[{key:"val",value:function(){return ye("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return ye("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return ye("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return ye("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return ye("DataSnapshot.child",0,1,arguments.length),t=String(t),QR("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return ye("DataSnapshot.hasChild",1,1,arguments.length),QR("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return ye("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return ye("DataSnapshot.forEach",1,1,arguments.length),ge("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return ye("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return ye("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return ye("DataSnapshot.ref",0,0,arguments.length),new $O(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),YO=function(){function e(t,n){h(this,e),this.database=t,this._delegate=n}return d(e,[{key:"on",value:function(t,n,r,i){var a,o=this;ye("Query.on",2,4,arguments.length),ge("Query.on","callback",n,!1);var u=e.getCancelAndContextArgs_("Query.on",r,i),s=function(e,t){n.call(u.context,new QO(o.database,e),t)};s.userCallback=n,s.context=u.context;var c=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(t){case"value":return eO(this._delegate,s,c),n;case"child_added":return tO(this._delegate,s,c),n;case"child_removed":return iO(this._delegate,s,c),n;case"child_changed":return nO(this._delegate,s,c),n;case"child_moved":return rO(this._delegate,s,c),n;default:throw new Error(me("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(ye("Query.off",0,3,arguments.length),KO("Query.off",e,!0),ge("Query.off","callback",t,!0),ke("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,aO(this._delegate,e,r)}else aO(this._delegate,e)}},{key:"get",value:function(){var e=this;return $D(this._delegate).then((function(t){return new QO(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;ye("Query.once",1,4,arguments.length),ge("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),u=new U,s=function(e,t){var r=new QO(a.database,e);n&&n.call(o.context,r,t),u.resolve(r)};s.userCallback=n,s.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),u.reject(e)};switch(t){case"value":eO(this._delegate,s,c,{onlyOnce:!0});break;case"child_added":tO(this._delegate,s,c,{onlyOnce:!0});break;case"child_removed":iO(this._delegate,s,c,{onlyOnce:!0});break;case"child_changed":nO(this._delegate,s,c,{onlyOnce:!0});break;case"child_moved":rO(this._delegate,s,c,{onlyOnce:!0});break;default:throw new Error(me("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}},{key:"limitToFirst",value:function(t){return ye("Query.limitToFirst",1,1,arguments.length),new e(this.database,NO(this._delegate,yO(t)))}},{key:"limitToLast",value:function(t){return ye("Query.limitToLast",1,1,arguments.length),new e(this.database,NO(this._delegate,gO(t)))}},{key:"orderByChild",value:function(t){return ye("Query.orderByChild",1,1,arguments.length),new e(this.database,NO(this._delegate,wO(t)))}},{key:"orderByKey",value:function(){return ye("Query.orderByKey",0,0,arguments.length),new e(this.database,NO(this._delegate,_O()))}},{key:"orderByPriority",value:function(){return ye("Query.orderByPriority",0,0,arguments.length),new e(this.database,NO(this._delegate,IO()))}},{key:"orderByValue",value:function(){return ye("Query.orderByValue",0,0,arguments.length),new e(this.database,NO(this._delegate,TO()))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ye("Query.startAt",0,2,arguments.length),new e(this.database,NO(this._delegate,fO(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ye("Query.startAfter",0,2,arguments.length),new e(this.database,NO(this._delegate,pO(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ye("Query.endAt",0,2,arguments.length),new e(this.database,NO(this._delegate,sO(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return ye("Query.endBefore",0,2,arguments.length),new e(this.database,NO(this._delegate,lO(t,n)))}},{key:"equalTo",value:function(t,n){return ye("Query.equalTo",1,2,arguments.length),new e(this.database,NO(this._delegate,CO(t,n)))}},{key:"toString",value:function(){return ye("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return ye("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(ye("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new $O(this.database,new VD(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,ge(e,"cancel",r.cancel,!0),r.context=n,ke(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(me(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),$O=function(e){m(n,e);var t=_(n);function n(e,r){var i;return h(this,n),(i=t.call(this,e,new LD(r._repo,r._path,new _A,!1))).database=e,i._delegate=r,i}return d(n,[{key:"getKey",value:function(){return ye("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return ye("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,zD(this._delegate,e))}},{key:"getParent",value:function(){ye("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return ye("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){ye("Reference.set",1,2,arguments.length),ge("Reference.set","onComplete",t,!0);var n=GD(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(ye("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,zO("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}YR("Reference.update",this._delegate._path),ge("Reference.update","onComplete",t,!0);var i=YD(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){ye("Reference.setWithPriority",2,3,arguments.length),ge("Reference.setWithPriority","onComplete",n,!0);var r=QD(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){ye("Reference.remove",0,1,arguments.length),ge("Reference.remove","onComplete",e,!0);var t=KD(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"transaction",value:function(e,t,n){var r=this;ye("Reference.transaction",1,3,arguments.length),ge("Reference.transaction","transactionUpdate",e,!1),ge("Reference.transaction","onComplete",t,!0),WO("Reference.transaction","applyLocally",n,!0);var i=qO(this._delegate,e,{applyLocally:n}).then((function(e){return new HO(e.committed,new QO(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){ye("Reference.setPriority",1,2,arguments.length),ge("Reference.setPriority","onComplete",t,!0);var n=HD(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;ye("Reference.push",0,2,arguments.length),ge("Reference.push","onComplete",t,!0);var i=WD(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return YR("Reference.onDisconnect",this._delegate._path),new GO(new OD(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(YO),XO=function(){function e(t,n){var r=this;h(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()}}}return d(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};LO(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(ye("database.ref",0,1,arguments.length),e instanceof $O){var t=BD(this._delegate,e.toString());return new $O(this,t)}var n=qD(this._delegate,e);return new $O(this,n)}},{key:"refFromURL",value:function(e){var t="database.refFromURL";ye(t,1,1,arguments.length);var n=BD(this._delegate,e);return new $O(this,n)}},{key:"goOffline",value:function(){return ye("database.goOffline",0,0,arguments.length),MO(this._delegate)}},{key:"goOnline",value:function(){return ye("database.goOnline",0,0,arguments.length),FO(this._delegate)}}]),e}();XO.ServerValue={TIMESTAMP:VO,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var JO=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,u=void 0!==o&&o;uC(r);var s=new Me("auth-internal",new je("database-standalone"));return s.setComponent(new Oe("auth-internal",(function(){return i}),"PRIVATE")),{instance:new XO(DO(t,s,void 0,n,u),t),namespace:a}}}),ZO=XO.ServerValue;!function(e){e.INTERNAL.registerComponent(new Oe("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new XO(i,r)}),"PUBLIC").setServiceProps({Reference:$O,Query:YO,Database:XO,DataSnapshot:QO,enableLogging:UO,INTERNAL:JO,ServerValue:ZO}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.1.8")}(Bt);var eL=n(184),tL=function(e){return(0,eL.jsx)("h2",{id:"headerTitle",children:e.title})},nL=function(){var e=c((0,t.useState)(),2),n=e[0],r=e[1],i=c((0,t.useState)(),2),a=i[0],o=i[1],u=c((0,t.useState)(),2),s=u[0],l=u[1];return(0,eL.jsxs)("div",{id:"loginform",children:[(0,eL.jsx)(tL,{title:"Sign up"}),(0,eL.jsxs)("div",{children:[(0,eL.jsxs)("div",{class:"row",children:[(0,eL.jsx)("label",{children:"Username"}),(0,eL.jsx)("input",{type:"text",placeholder:"Enter your Username",value:n,onChange:function(e){r(e.target.value)}})]}),(0,eL.jsxs)("div",{class:"row",children:[(0,eL.jsx)("label",{children:"Email"}),(0,eL.jsx)("input",{type:"email",placeholder:"Enter your Email",value:a,onChange:function(e){o(e.target.value)}})]}),(0,eL.jsxs)("div",{class:"row",children:[(0,eL.jsx)("label",{children:"Password"}),(0,eL.jsx)("input",{type:"password",placeholder:"Enter your password",value:s,onChange:function(e){l(e.target.value)}})]}),(0,eL.jsx)("div",{id:"button",class:"row",children:(0,eL.jsx)("button",{onClick:function(){zt.auth().createUserWithEmailAndPassword(a,s).then((function(e){var t=zt.auth().currentUser.uid;zt.database().ref("userlist/userdata"+t).set({name:n,id:t,mail:a}).then((function(){if(o(""),l(""),r(""),Notification&&"granted"===Notification.permission)new Notification("Sign Up Success")})),console.log("change")})).catch((function(e){console.log(e.message),alert("fail")}))},children:"Sign up"})})]})]})},rL=function(e){return(0,eL.jsx)("h2",{id:"headerTitle",children:e.title})},iL=function(){var e=c((0,t.useState)(),2),n=e[0],r=e[1],i=c((0,t.useState)(),2),a=i[0],o=i[1];var u=new zt.auth.GoogleAuthProvider;return(0,eL.jsxs)("div",{id:"loginform",children:[(0,eL.jsx)(rL,{title:"Login"}),(0,eL.jsxs)("div",{children:[(0,eL.jsxs)("div",{class:"row",children:[(0,eL.jsx)("label",{children:"Email"}),(0,eL.jsx)("input",{type:"email",placeholder:"Enter your Email",value:n,onChange:function(e){r(e.target.value)}})]}),(0,eL.jsxs)("div",{class:"row",children:[(0,eL.jsx)("label",{children:"Password"}),(0,eL.jsx)("input",{type:"password",placeholder:"Enter your password",value:a,onChange:function(e){o(e.target.value)}})]}),(0,eL.jsx)("div",{id:"button",class:"row",children:(0,eL.jsx)("button",{onClick:function(){console.log("do log in"),console.log(n+a),zt.auth().signInWithEmailAndPassword(n,a).then((function(e){r(""),o(""),console.log("change");new Notification("Log in Success")})).catch((function(e){console.log(e.message),alert("fail")}))},id:"button",class:"row",children:"Log in"})})]}),(0,eL.jsxs)("div",{id:"alternativeLogin",children:[(0,eL.jsx)("label",{children:"Or sign in with:"}),(0,eL.jsx)("div",{id:"iconGroup",children:(0,eL.jsx)("button",{id:"googleIcon",onClick:function(){console.log("signInWithPopup"),zt.auth().signInWithPopup(u).then((function(e){e.credential.accessToken,e.user})).then((function(){var e=zt.auth().currentUser,t=e.uid;zt.database().ref("userlist/userdata"+t).update({name:e.displayName,id:t,mail:e.email}).catch((function(e){console.log("error: "+e.message)})),console.log("google log in")})).catch((function(e){console.log("error: "+e.message)}))}})})]})]})},aL=function(){var e=c((0,t.useState)("welcome"),2),n=(e[0],e[1],c((0,t.useState)((0,eL.jsx)(nL,{})),2)),r=n[0],i=n[1];return(0,eL.jsxs)("div",{children:[(0,eL.jsx)("div",{class:"bg"}),(0,eL.jsx)("div",{class:"bg bg2"}),(0,eL.jsx)("div",{class:"bg bg3"}),(0,eL.jsx)("div",{class:"wrapper",children:(0,eL.jsxs)("div",{class:"link_wrapper",children:[(0,eL.jsx)("a",{href:"#",onClick:function(){console.log("change_mode2"),i((0,eL.jsx)(iL,{}))},children:"Log in"}),(0,eL.jsx)("div",{class:"icon",children:(0,eL.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 268.832 268.832",children:(0,eL.jsx)("path",{d:"M265.17 125.577l-80-80c-4.88-4.88-12.796-4.88-17.677 0-4.882 4.882-4.882 12.796 0 17.678l58.66 58.66H12.5c-6.903 0-12.5 5.598-12.5 12.5 0 6.903 5.597 12.5 12.5 12.5h213.654l-58.66 58.662c-4.88 4.882-4.88 12.796 0 17.678 2.44 2.44 5.64 3.66 8.84 3.66s6.398-1.22 8.84-3.66l79.997-80c4.883-4.882 4.883-12.796 0-17.678z"})})})]})}),(0,eL.jsx)("div",{class:"wrapper2",children:(0,eL.jsxs)("div",{class:"link_wrapper",children:[(0,eL.jsx)("a",{href:"#",onClick:function(){console.log("change_mode"),i((0,eL.jsx)(nL,{}))},children:"Sign Up"}),(0,eL.jsx)("div",{class:"icon",children:(0,eL.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 268.832 268.832",children:(0,eL.jsx)("path",{d:"M265.17 125.577l-80-80c-4.88-4.88-12.796-4.88-17.677 0-4.882 4.882-4.882 12.796 0 17.678l58.66 58.66H12.5c-6.903 0-12.5 5.598-12.5 12.5 0 6.903 5.597 12.5 12.5 12.5h213.654l-58.66 58.662c-4.88 4.882-4.88 12.796 0 17.678 2.44 2.44 5.64 3.66 8.84 3.66s6.398-1.22 8.84-3.66l79.997-80c4.883-4.882 4.883-12.796 0-17.678z"})})})]})}),(0,eL.jsx)("br",{}),r]})},oL=zt.database(),uL=(zt.firestore(),zt.auth()),sL=function(e){var n=c((0,t.useState)(""),2),r=n[0],i=n[1],a=c((0,t.useState)([]),2),o=a[0],u=a[1],s=e.keynum;return(0,t.useEffect)((function(){console.log("props change"),oL.ref("chatlist/"+s).on("value",(function(e){u([]),console.log("clean");for(var t=function(){var e=r[n];u((function(t){return[].concat(Pe(t),[e])})),console.log(o)},n=0,r=Object.values(e.val());n<r.length;n++)t()}))}),[e]),(0,t.useEffect)((function(){var e=uL.currentUser,t=e.uid;e.photoURL;oL.ref("userlist/userdata"+t+"/room").on("child_added",(function(e){console.log(e.child("roomname").val()),console.log(e.child("check").val());var n=e.child("key").val(),r=e.child("roomname").val();if(1==e.child("check").val()){new Notification("Success enter "+r);zt.database().ref("userlist/userdata"+t+"/room/"+n).update({check:!1})}}))}),[e]),(0,eL.jsxs)("div",{class:"ran",children:[(0,eL.jsx)("div",{id:"out",children:(0,eL.jsx)("div",{id:"main2",children:o.map((function(e,t){var n=uL.currentUser.uid;console.log(e.photo);var r=e.photo;e.key;return e.id!=n?(0,eL.jsxs)("div",{id:"text1",children:[(0,eL.jsx)("img",{src:r||"https://sandstormit.com/wp-content/uploads/2021/06/incognito-2231825_960_720-1.png"}),e.name," :",(0,eL.jsx)("div",{id:"text2",children:e.text})]},t):(0,eL.jsxs)("div",{id:"text3",children:[(0,eL.jsx)("img",{src:r||"https://sandstormit.com/wp-content/uploads/2021/06/incognito-2231825_960_720-1.png"}),e.name," :",(0,eL.jsxs)("div",{id:"text4",children:[(0,eL.jsx)("button",{onClick:function(){oL.ref("chatlist/"+s+"/"+e.key).remove()},id:"button6",children:"\ud83d\uddd1\ufe0f"}),e.text]})]},t)}))})}),(0,eL.jsxs)("form",{children:[(0,eL.jsx)("div",{id:"but",children:s}),(0,eL.jsx)("input",{value:r,onChange:function(e){return function(e){i(e.target.value)}(e)},placeholder:"type here"}),(0,eL.jsx)("button",{onClick:function(e){return function(e){e.preventDefault();var t,n,a=uL.currentUser,o=a.uid,u=a.photoURL;""!=r?oL.ref("userlist/userdata"+o).once("value",(function(e){t=e.child("name").val()})).then((function(){n=oL.ref("chatlist/"+s).push({text:r,id:o,name:t,photo:u}).key})).then((function(){i(""),console.log(n),oL.ref("chatlist/"+s+"/"+n).update({key:n})})):alert("Input Empty Message")}(e)},value:"Send",children:"Send"})]})]})};function cL(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function lL(){return lL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lL.apply(this,arguments)}function hL(e){var t,n,r="";if("string"===typeof e||"number"===typeof e)r+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=hL(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function fL(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=hL(e))&&(r&&(r+=" "),r+=t);return r}var dL={xs:0,sm:600,md:900,lg:1200,xl:1536},pL={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(dL[e],"px)")}};function vL(e,t,n){var r=e.theme||{};if(Array.isArray(t)){var i=r.breakpoints||pL;return t.reduce((function(e,r,a){return e[i.up(i.keys[a])]=n(t[a]),e}),{})}if("object"===typeof t){var a=r.breakpoints||pL;return Object.keys(t).reduce((function(e,r){if(-1!==Object.keys(a.values||dL).indexOf(r)){e[a.up(r)]=n(t[r],r)}else{var i=r;e[i]=t[i]}return e}),{})}return n(t)}function yL(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null==t||null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{});return n||{}}function mL(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function gL(e){var t,n=e.values,r=e.breakpoints,i=e.base||function(e,t){if("object"!==typeof e)return{};var n={},r=Object.keys(t);return Array.isArray(e)?r.forEach((function(t,r){r<e.length&&(n[t]=!0)})):r.forEach((function(t){null!=e[t]&&(n[t]=!0)})),n}(n,r),a=Object.keys(i);return 0===a.length?n:a.reduce((function(e,r,i){return Array.isArray(n)?(e[r]=null!=n[i]?n[i]:n[t],t=i):(e[r]=null!=n[r]?n[r]:n[t]||n,t=r),e}),{})}function kL(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function wL(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?lL({},e):e;return kL(e)&&kL(t)&&Object.keys(t).forEach((function(i){"__proto__"!==i&&(kL(t[i])&&i in e&&kL(e[i])?r[i]=wL(e[i],t[i],n):r[i]=t[i])})),r}function bL(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function _L(e){if("string"!==typeof e)throw new Error(bL(7));return e.charAt(0).toUpperCase()+e.slice(1)}function xL(e,t){if(!t||"string"!==typeof t)return null;if(e&&e.vars){var n="vars.".concat(t).split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e);if(null!=n)return n}return t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e)}function IL(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:xL(e,n)||i,t&&(r=t(r)),r}var SL=function(e){var t=e.prop,n=e.cssProperty,r=void 0===n?e.prop:n,i=e.themeKey,a=e.transform,o=function(e){if(null==e[t])return null;var n=e[t],o=xL(e.theme,i)||{};return vL(e,n,(function(e){var n=IL(o,a,e);return e===n&&"string"===typeof e&&(n=IL(o,a,"".concat(t).concat("default"===e?"":_L(e)),e)),!1===r?n:l({},r,n)}))};return o.propTypes={},o.filterProps=[t],o};var TL=function(e,t){return t?wL(e,t,{clone:!1}):e};var EL=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),i=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?TL(t,r[n](e)):t}),{})};return i.propTypes={},i.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),i};var CL={m:"margin",p:"padding"},NL={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},AL={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},PL=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!AL[e])return[e];e=AL[e]}var t=c(e.split(""),2),n=t[0],r=t[1],i=CL[n],a=NL[r]||"";return Array.isArray(a)?a.map((function(e){return i+e})):[i+a]})),RL=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],DL=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],OL=[].concat(RL,DL);function LL(e,t,n,r){var i=xL(e,t)||n;return"number"===typeof i?function(e){return"string"===typeof e?e:i*e}:Array.isArray(i)?function(e){return"string"===typeof e?e:i[e]}:"function"===typeof i?i:function(){}}function ML(e){return LL(e,"spacing",8)}function FL(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function UL(e,t,n,r){if(-1===t.indexOf(n))return null;var i=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=FL(t,n),e}),{})}}(PL(n),r);return vL(e,e[n],i)}function VL(e,t){var n=ML(e.theme);return Object.keys(e).map((function(r){return UL(e,t,r,n)})).reduce(TL,{})}function jL(e){return VL(e,RL)}function qL(e){return VL(e,DL)}function BL(e){return VL(e,OL)}jL.propTypes={},jL.filterProps=RL,qL.propTypes={},qL.filterProps=DL,BL.propTypes={},BL.filterProps=OL;var zL=BL;function WL(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var KL=SL({prop:"border",themeKey:"borders",transform:WL}),GL=SL({prop:"borderTop",themeKey:"borders",transform:WL}),HL=SL({prop:"borderRight",themeKey:"borders",transform:WL}),QL=SL({prop:"borderBottom",themeKey:"borders",transform:WL}),YL=SL({prop:"borderLeft",themeKey:"borders",transform:WL}),$L=SL({prop:"borderColor",themeKey:"palette"}),XL=SL({prop:"borderTopColor",themeKey:"palette"}),JL=SL({prop:"borderRightColor",themeKey:"palette"}),ZL=SL({prop:"borderBottomColor",themeKey:"palette"}),eM=SL({prop:"borderLeftColor",themeKey:"palette"}),tM=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=LL(e.theme,"shape.borderRadius",4);return vL(e,e.borderRadius,(function(e){return{borderRadius:FL(t,e)}}))}return null};tM.propTypes={},tM.filterProps=["borderRadius"];var nM=EL(KL,GL,HL,QL,YL,$L,XL,JL,ZL,eM,tM),rM=EL(SL({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),SL({prop:"display"}),SL({prop:"overflow"}),SL({prop:"textOverflow"}),SL({prop:"visibility"}),SL({prop:"whiteSpace"})),iM=EL(SL({prop:"flexBasis"}),SL({prop:"flexDirection"}),SL({prop:"flexWrap"}),SL({prop:"justifyContent"}),SL({prop:"alignItems"}),SL({prop:"alignContent"}),SL({prop:"order"}),SL({prop:"flex"}),SL({prop:"flexGrow"}),SL({prop:"flexShrink"}),SL({prop:"alignSelf"}),SL({prop:"justifyItems"}),SL({prop:"justifySelf"})),aM=function(e){if(void 0!==e.gap&&null!==e.gap){var t=LL(e.theme,"spacing",8);return vL(e,e.gap,(function(e){return{gap:FL(t,e)}}))}return null};aM.propTypes={},aM.filterProps=["gap"];var oM=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=LL(e.theme,"spacing",8);return vL(e,e.columnGap,(function(e){return{columnGap:FL(t,e)}}))}return null};oM.propTypes={},oM.filterProps=["columnGap"];var uM=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=LL(e.theme,"spacing",8);return vL(e,e.rowGap,(function(e){return{rowGap:FL(t,e)}}))}return null};uM.propTypes={},uM.filterProps=["rowGap"];var sM=EL(aM,oM,uM,SL({prop:"gridColumn"}),SL({prop:"gridRow"}),SL({prop:"gridAutoFlow"}),SL({prop:"gridAutoColumns"}),SL({prop:"gridAutoRows"}),SL({prop:"gridTemplateColumns"}),SL({prop:"gridTemplateRows"}),SL({prop:"gridTemplateAreas"}),SL({prop:"gridArea"})),cM=EL(SL({prop:"position"}),SL({prop:"zIndex",themeKey:"zIndex"}),SL({prop:"top"}),SL({prop:"right"}),SL({prop:"bottom"}),SL({prop:"left"})),lM=EL(SL({prop:"color",themeKey:"palette"}),SL({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),SL({prop:"backgroundColor",themeKey:"palette"})),hM=SL({prop:"boxShadow",themeKey:"shadows"});function fM(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var dM=SL({prop:"width",transform:fM}),pM=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return vL(e,e.maxWidth,(function(t){var n,r,i;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[t])||dL[t]||fM(t)}}))}return null};pM.filterProps=["maxWidth"];var vM=SL({prop:"minWidth",transform:fM}),yM=SL({prop:"height",transform:fM}),mM=SL({prop:"maxHeight",transform:fM}),gM=SL({prop:"minHeight",transform:fM}),kM=(SL({prop:"size",cssProperty:"width",transform:fM}),SL({prop:"size",cssProperty:"height",transform:fM}),EL(dM,pM,vM,yM,mM,gM,SL({prop:"boxSizing"}))),wM=SL({prop:"fontFamily",themeKey:"typography"}),bM=SL({prop:"fontSize",themeKey:"typography"}),_M=SL({prop:"fontStyle",themeKey:"typography"}),xM=SL({prop:"fontWeight",themeKey:"typography"}),IM=SL({prop:"letterSpacing"}),SM=SL({prop:"textTransform"}),TM=SL({prop:"lineHeight"}),EM=SL({prop:"textAlign"}),CM=EL(SL({prop:"typography",cssProperty:!1,themeKey:"typography"}),wM,bM,_M,xM,IM,TM,EM,SM),NM={borders:nM.filterProps,display:rM.filterProps,flexbox:iM.filterProps,grid:sM.filterProps,positions:cM.filterProps,palette:lM.filterProps,shadows:hM.filterProps,sizing:kM.filterProps,spacing:zL.filterProps,typography:CM.filterProps},AM={borders:nM,display:rM,flexbox:iM,grid:sM,positions:cM,palette:lM,shadows:hM,sizing:kM,spacing:zL,typography:CM},PM=Object.keys(NM).reduce((function(e,t){return NM[t].forEach((function(n){e[n]=AM[t]})),e}),{});var RM=["sx"];function DM(e){var t,n=e.sx,r=function(e){var t={systemProps:{},otherProps:{}};return Object.keys(e).forEach((function(n){PM[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]})),t}(cL(e,RM)),i=r.systemProps,a=r.otherProps;return t=Array.isArray(n)?[i].concat(Pe(n)):"function"===typeof n?function(){var e=n.apply(void 0,arguments);return kL(e)?lL({},i,e):i}:lL({},i,n),lL({},a,{sx:t})}var OM=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},LM=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,MM=OM((function(e){return LM.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));var FM=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),UM=Math.abs,VM=String.fromCharCode,jM=Object.assign;function qM(e){return e.trim()}function BM(e,t,n){return e.replace(t,n)}function zM(e,t){return e.indexOf(t)}function WM(e,t){return 0|e.charCodeAt(t)}function KM(e,t,n){return e.slice(t,n)}function GM(e){return e.length}function HM(e){return e.length}function QM(e,t){return t.push(e),e}var YM=1,$M=1,XM=0,JM=0,ZM=0,eF="";function tF(e,t,n,r,i,a,o){return{value:e,root:t,parent:n,type:r,props:i,children:a,line:YM,column:$M,length:o,return:""}}function nF(e,t){return jM(tF("",null,null,"",null,null,0),e,{length:-e.length},t)}function rF(){return ZM=JM>0?WM(eF,--JM):0,$M--,10===ZM&&($M=1,YM--),ZM}function iF(){return ZM=JM<XM?WM(eF,JM++):0,$M++,10===ZM&&($M=1,YM++),ZM}function aF(){return WM(eF,JM)}function oF(){return JM}function uF(e,t){return KM(eF,e,t)}function sF(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function cF(e){return YM=$M=1,XM=GM(eF=e),JM=0,[]}function lF(e){return eF="",e}function hF(e){return qM(uF(JM-1,pF(91===e?e+2:40===e?e+1:e)))}function fF(e){for(;(ZM=aF())&&ZM<33;)iF();return sF(e)>2||sF(ZM)>3?"":" "}function dF(e,t){for(;--t&&iF()&&!(ZM<48||ZM>102||ZM>57&&ZM<65||ZM>70&&ZM<97););return uF(e,oF()+(t<6&&32==aF()&&32==iF()))}function pF(e){for(;iF();)switch(ZM){case e:return JM;case 34:case 39:34!==e&&39!==e&&pF(ZM);break;case 40:41===e&&pF(e);break;case 92:iF()}return JM}function vF(e,t){for(;iF()&&e+ZM!==57&&(e+ZM!==84||47!==aF()););return"/*"+uF(t,JM-1)+"*"+VM(47===e?e:iF())}function yF(e){for(;!sF(aF());)iF();return uF(e,JM)}var mF="-ms-",gF="-moz-",kF="-webkit-",wF="comm",bF="rule",_F="decl",xF="@keyframes";function IF(e,t){for(var n="",r=HM(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function SF(e,t,n,r){switch(e.type){case"@import":case _F:return e.return=e.return||e.value;case wF:return"";case xF:return e.return=e.value+"{"+IF(e.children,r)+"}";case bF:e.value=e.props.join(",")}return GM(n=IF(e.children,r))?e.return=e.value+"{"+n+"}":""}function TF(e,t){switch(function(e,t){return(((t<<2^WM(e,0))<<2^WM(e,1))<<2^WM(e,2))<<2^WM(e,3)}(e,t)){case 5103:return kF+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return kF+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return kF+e+gF+e+mF+e+e;case 6828:case 4268:return kF+e+mF+e+e;case 6165:return kF+e+mF+"flex-"+e+e;case 5187:return kF+e+BM(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return kF+e+mF+"flex-item-"+BM(e,/flex-|-self/,"")+e;case 4675:return kF+e+mF+"flex-line-pack"+BM(e,/align-content|flex-|-self/,"")+e;case 5548:return kF+e+mF+BM(e,"shrink","negative")+e;case 5292:return kF+e+mF+BM(e,"basis","preferred-size")+e;case 6060:return kF+"box-"+BM(e,"-grow","")+kF+e+mF+BM(e,"grow","positive")+e;case 4554:return kF+BM(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return BM(BM(BM(e,/(zoom-|grab)/,kF+"$1"),/(image-set)/,kF+"$1"),e,"")+e;case 5495:case 3959:return BM(e,/(image-set\([^]*)/,kF+"$1$`$1");case 4968:return BM(BM(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+kF+e+e;case 4095:case 3583:case 4068:case 2532:return BM(e,/(.+)-inline(.+)/,kF+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(GM(e)-1-t>6)switch(WM(e,t+1)){case 109:if(45!==WM(e,t+4))break;case 102:return BM(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+gF+(108==WM(e,t+3)?"$3":"$2-$3"))+e;case 115:return~zM(e,"stretch")?TF(BM(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==WM(e,t+1))break;case 6444:switch(WM(e,GM(e)-3-(~zM(e,"!important")&&10))){case 107:return BM(e,":",":"+kF)+e;case 101:return BM(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+kF+(45===WM(e,14)?"inline-":"")+"box$3$1"+kF+"$2$3$1"+mF+"$2box$3")+e}break;case 5936:switch(WM(e,t+11)){case 114:return kF+e+mF+BM(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return kF+e+mF+BM(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return kF+e+mF+BM(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return kF+e+mF+e+e}return e}function EF(e){return lF(CF("",null,null,null,[""],e=cF(e),0,[0],e))}function CF(e,t,n,r,i,a,o,u,s){for(var c=0,l=0,h=o,f=0,d=0,p=0,v=1,y=1,m=1,g=0,k="",w=i,b=a,_=r,x=k;y;)switch(p=g,g=iF()){case 40:if(108!=p&&58==x.charCodeAt(h-1)){-1!=zM(x+=BM(hF(g),"&","&\f"),"&\f")&&(m=-1);break}case 34:case 39:case 91:x+=hF(g);break;case 9:case 10:case 13:case 32:x+=fF(p);break;case 92:x+=dF(oF()-1,7);continue;case 47:switch(aF()){case 42:case 47:QM(AF(vF(iF(),oF()),t,n),s);break;default:x+="/"}break;case 123*v:u[c++]=GM(x)*m;case 125*v:case 59:case 0:switch(g){case 0:case 125:y=0;case 59+l:d>0&&GM(x)-h&&QM(d>32?PF(x+";",r,n,h-1):PF(BM(x," ","")+";",r,n,h-2),s);break;case 59:x+=";";default:if(QM(_=NF(x,t,n,c,l,i,u,k,w=[],b=[],h),a),123===g)if(0===l)CF(x,t,_,_,w,a,h,u,b);else switch(f){case 100:case 109:case 115:CF(e,_,_,r&&QM(NF(e,_,_,0,0,i,u,k,i,w=[],h),b),i,b,h,u,r?w:b);break;default:CF(x,_,_,_,[""],b,0,u,b)}}c=l=d=0,v=m=1,k=x="",h=o;break;case 58:h=1+GM(x),d=p;default:if(v<1)if(123==g)--v;else if(125==g&&0==v++&&125==rF())continue;switch(x+=VM(g),g*v){case 38:m=l>0?1:(x+="\f",-1);break;case 44:u[c++]=(GM(x)-1)*m,m=1;break;case 64:45===aF()&&(x+=hF(iF())),f=aF(),l=h=GM(k=x+=yF(oF())),g++;break;case 45:45===p&&2==GM(x)&&(v=0)}}return a}function NF(e,t,n,r,i,a,o,u,s,c,l){for(var h=i-1,f=0===i?a:[""],d=HM(f),p=0,v=0,y=0;p<r;++p)for(var m=0,g=KM(e,h+1,h=UM(v=o[p])),k=e;m<d;++m)(k=qM(v>0?f[m]+" "+g:BM(g,/&\f/g,f[m])))&&(s[y++]=k);return tF(e,t,n,0===i?bF:u,s,c,l)}function AF(e,t,n){return tF(e,t,n,wF,VM(ZM),KM(e,2,-2),0)}function PF(e,t,n,r){return tF(e,t,n,_F,KM(e,0,r),KM(e,r+1,-1),r)}var RF=function(e,t,n){for(var r=0,i=0;r=i,i=aF(),38===r&&12===i&&(t[n]=1),!sF(i);)iF();return uF(e,JM)},DF=function(e,t){return lF(function(e,t){var n=-1,r=44;do{switch(sF(r)){case 0:38===r&&12===aF()&&(t[n]=1),e[n]+=RF(JM-1,t,n);break;case 2:e[n]+=hF(r);break;case 4:if(44===r){e[++n]=58===aF()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=VM(r)}}while(r=iF());return e}(cF(e),t))},OF=new WeakMap,LF=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||OF.get(n))&&!r){OF.set(e,!0);for(var i=[],a=DF(t,i),o=n.props,u=0,s=0;u<a.length;u++)for(var c=0;c<o.length;c++,s++)e.props[s]=i[u]?a[u].replace(/&\f/g,o[c]):o[c]+" "+a[u]}}},MF=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},FF=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case _F:e.return=TF(e.value,e.length);break;case xF:return IF([nF(e,{value:BM(e.value,"@","@"+kF)})],r);case bF:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return IF([nF(e,{props:[BM(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return IF([nF(e,{props:[BM(t,/:(plac\w+)/,":-webkit-input-$1")]}),nF(e,{props:[BM(t,/:(plac\w+)/,":-moz-$1")]}),nF(e,{props:[BM(t,/:(plac\w+)/,mF+"input-$1")]})],r)}return""}))}}],UF=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||FF;var i,a,o={},u=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;u.push(e)}));var s,c,l=[SF,(c=function(e){s.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],h=function(e){var t=HM(e);return function(n,r,i,a){for(var o="",u=0;u<t;u++)o+=e[u](n,r,i,a)||"";return o}}([LF,MF].concat(r,l));a=function(e,t,n,r){s=n,IF(EF(e?e+"{"+t.styles+"}":t.styles),h),r&&(f.inserted[t.name]=!0)};var f={key:t,sheet:new FM({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:a};return f.sheet.hydrate(u),f};var VF=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},jF={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},qF=/[A-Z]|^ms/g,BF=/_EMO_([^_]+?)_([^]*?)_EMO_/g,zF=function(e){return 45===e.charCodeAt(1)},WF=function(e){return null!=e&&"boolean"!==typeof e},KF=OM((function(e){return zF(e)?e:e.replace(qF,"-$&").toLowerCase()})),GF=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(BF,(function(e,t,n){return QF={name:t,styles:n,next:QF},t}))}return 1===jF[e]||zF(e)||"number"!==typeof t||0===t?t:t+"px"};function HF(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return QF={name:n.name,styles:n.styles,next:QF},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)QF={name:r.name,styles:r.styles,next:QF},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=HF(e,t,n[i])+";";else for(var a in n){var o=n[a];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=a+"{"+t[o]+"}":WF(o)&&(r+=KF(a)+":"+GF(a,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var u=HF(e,t,o);switch(a){case"animation":case"animationName":r+=KF(a)+":"+u+";";break;default:r+=a+"{"+u+"}"}}else for(var s=0;s<o.length;s++)WF(o[s])&&(r+=KF(a)+":"+GF(a,o[s])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=QF,a=n(e);return QF=i,HF(e,t,a)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var QF,YF=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var $F=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";QF=void 0;var a=e[0];null==a||void 0===a.raw?(r=!1,i+=HF(n,t,a)):i+=a[0];for(var o=1;o<e.length;o++)i+=HF(n,t,e[o]),r&&(i+=a[o]);YF.lastIndex=0;for(var u,s="";null!==(u=YF.exec(i));)s+="-"+u[1];return{name:VF(i)+s,styles:i,next:QF}},XF=(0,t.createContext)("undefined"!==typeof HTMLElement?UF({key:"css"}):null);XF.Provider;var JF=function(e){return(0,t.forwardRef)((function(n,r){var i=(0,t.useContext)(XF);return e(n,i,r)}))},ZF=(0,t.createContext)({});r.useInsertionEffect&&r.useInsertionEffect;function eU(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var tU=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},nU=MM,rU=function(e){return"theme"!==e},iU=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?nU:rU},aU=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},oU=r.useInsertionEffect?r.useInsertionEffect:function(e){e()};var uU=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;tU(t,n,r);var i;i=function(){return function(e,t,n){tU(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(t,n,r)},oU(i);return null},sU=function e(n,r){var i,a,o=n.__emotion_real===n,u=o&&n.__emotion_base||n;void 0!==r&&(i=r.label,a=r.target);var s=aU(n,r,o),c=s||iU(u),l=!c("as");return function(){var h=arguments,f=o&&void 0!==n.__emotion_styles?n.__emotion_styles.slice(0):[];if(void 0!==i&&f.push("label:"+i+";"),null==h[0]||void 0===h[0].raw)f.push.apply(f,h);else{0,f.push(h[0][0]);for(var d=h.length,p=1;p<d;p++)f.push(h[p],h[0][p])}var v=JF((function(e,n,r){var i=l&&e.as||u,o="",h=[],d=e;if(null==e.theme){for(var p in d={},e)d[p]=e[p];d.theme=(0,t.useContext)(ZF)}"string"===typeof e.className?o=eU(n.registered,h,e.className):null!=e.className&&(o=e.className+" ");var v=$F(f.concat(h),n.registered,d);o+=n.key+"-"+v.name,void 0!==a&&(o+=" "+a);var y=l&&void 0===s?iU(i):c,m={};for(var g in e)l&&"as"===g||y(g)&&(m[g]=e[g]);return m.className=o,m.ref=r,(0,t.createElement)(t.Fragment,null,(0,t.createElement)(uU,{cache:n,serialized:v,isStringTag:"string"===typeof i}),(0,t.createElement)(i,m))}));return v.displayName=void 0!==i?i:"Styled("+("string"===typeof u?u:u.displayName||u.name||"Component")+")",v.defaultProps=n.defaultProps,v.__emotion_real=v,v.__emotion_base=u,v.__emotion_styles=f,v.__emotion_forwardProp=s,Object.defineProperty(v,"toString",{value:function(){return"."+a}}),v.withComponent=function(t,n){return e(t,lL({},r,n,{shouldForwardProp:aU(v,n,!0)})).apply(void 0,f)},v}},cU=sU.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){cU[e]=cU(e)}));var lU=cU;function hU(e,t){return lU(e,t)}var fU=["values","unit","step"];function dU(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,r=e.unit,i=void 0===r?"px":r,a=e.step,o=void 0===a?5:a,u=cL(e,fU),s=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return lL({},e,l({},t.key,t.val))}),{})}(n),c=Object.keys(s);function h(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(i,")")}function f(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-o/100).concat(i,")")}function d(e,t){var r=c.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[c[r]]?n[c[r]]:t)-o/100).concat(i,")")}return lL({keys:c,values:s,up:h,down:f,between:d,only:function(e){return c.indexOf(e)+1<c.length?d(e,c[c.indexOf(e)+1]):h(e)},not:function(e){var t=c.indexOf(e);return 0===t?h(c[1]):t===c.length-1?f(c[t]):d(e,c[c.indexOf(e)+1]).replace("@media","@media not all and")},unit:i},u)}var pU={borderRadius:4};function vU(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=ML({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=0===n.length?[1]:n;return i.map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}var yU=["breakpoints","palette","spacing","shape"];var mU=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.palette,i=void 0===r?{}:r,a=e.spacing,o=e.shape,u=void 0===o?{}:o,s=cL(e,yU),c=dU(n),l=vU(a),h=wL({breakpoints:c,direction:"ltr",components:{},palette:lL({mode:"light"},i),spacing:l,shape:lL({},pU,u)},s),f=arguments.length,d=new Array(f>1?f-1:0),p=1;p<f;p++)d[p-1]=arguments[p];return h=d.reduce((function(e,t){return wL(e,t)}),h)},gU=["variant"];function kU(e){return 0===e.length}function wU(e){var t=e.variant,n=cL(e,gU),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?kU(r)?e[t]:_L(e[t]):"".concat(kU(r)?t:_L(t)).concat(_L(e[t].toString()))})),r}function bU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),i=new Set(r);return t.every((function(e){return i.size===Object.keys(e).length}))}function _U(e,t){return"function"===typeof e?e(t):e}var xU=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:AM,t=Object.keys(e).reduce((function(t,n){return e[n].filterProps.forEach((function(r){t[r]=e[n]})),t}),{});function n(e,n,r){var i,a=(l(i={},e,n),l(i,"theme",r),i),o=t[e];return o?o(a):l({},e,n)}function r(e){var i=e||{},a=i.sx,o=i.theme,u=void 0===o?{}:o;if(!a)return null;function s(e){var i=e;if("function"===typeof e)i=e(u);else if("object"!==typeof e)return e;if(!i)return null;var a=yL(u.breakpoints),o=Object.keys(a),s=a;return Object.keys(i).forEach((function(e){var a=_U(i[e],u);if(null!==a&&void 0!==a)if("object"===typeof a)if(t[e])s=TL(s,n(e,a,u));else{var o=vL({theme:u},a,(function(t){return l({},e,t)}));bU(o,a)?s[e]=r({sx:a,theme:u}):s=TL(s,o)}else s=TL(s,n(e,a,u))})),mL(o,s)}return Array.isArray(a)?a.map(s):s(a)}return r}();xU.filterProps=["sx"];var IU=xU,SU=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],TU=["theme"],EU=["theme"];function CU(e){return 0===Object.keys(e).length}var NU=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null},AU=function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=wU(e.props);r[t]=e.style})),r},PU=function(e,t,n,r){var i,a,o=e.ownerState,u=void 0===o?{}:o,s=[],c=null==n||null==(i=n.components)||null==(a=i[r])?void 0:a.variants;return c&&c.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){u[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&s.push(t[wU(n.props)])})),s};function RU(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var DU=mU();function OU(e,t,n){var r;return lL({toolbar:(r={minHeight:56},l(r,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),l(r,e.up("sm"),{minHeight:64}),r)},n)}function LU(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function MU(e){if(e.type)return e;if("#"===e.charAt(0))return MU(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(bL(9,e));var r,i=e.substring(t+1,e.length-1);if("color"===n){if(r=(i=i.split(" ")).shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error(bL(10,r))}else i=i.split(",");return{type:n,values:i=i.map((function(e){return parseFloat(e)})),colorSpace:r}}function FU(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function UU(e){var t="hsl"===(e=MU(e)).type?MU(function(e){var t=(e=MU(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,a=r*Math.min(i,1-i),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-a*Math.max(Math.min(t-3,9-t,1),-1)},u="rgb",s=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(u+="a",s.push(t[3])),FU({type:u,values:s})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function VU(e,t){if(e=MU(e),t=LU(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return FU(e)}function jU(e,t){if(e=MU(e),t=LU(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return FU(e)}var qU={black:"#000",white:"#fff"},BU={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},zU={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},WU={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},KU={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},GU={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},HU={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},QU={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},YU=["mode","contrastThreshold","tonalOffset"],$U={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:qU.white,default:qU.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},XU={text:{primary:qU.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:qU.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function JU(e,t,n,r){var i=r.light||r,a=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=jU(e.main,i):"dark"===t&&(e.dark=VU(e.main,a)))}function ZU(e){var t=e.mode,n=void 0===t?"light":t,r=e.contrastThreshold,i=void 0===r?3:r,a=e.tonalOffset,o=void 0===a?.2:a,u=cL(e,YU),s=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:GU[200],light:GU[50],dark:GU[400]}:{main:GU[700],light:GU[400],dark:GU[800]}}(n),c=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:zU[200],light:zU[50],dark:zU[400]}:{main:zU[500],light:zU[300],dark:zU[700]}}(n),l=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:WU[500],light:WU[300],dark:WU[700]}:{main:WU[700],light:WU[400],dark:WU[800]}}(n),h=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:HU[400],light:HU[300],dark:HU[700]}:{main:HU[700],light:HU[500],dark:HU[900]}}(n),f=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:QU[400],light:QU[300],dark:QU[700]}:{main:QU[800],light:QU[500],dark:QU[900]}}(n),d=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:KU[400],light:KU[300],dark:KU[700]}:{main:"#ed6c02",light:KU[500],dark:KU[900]}}(n);function p(e){var t=function(e,t){var n=UU(e),r=UU(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,XU.text.primary)>=i?XU.text.primary:$U.text.primary;return t}var v=function(e){var t=e.color,n=e.name,r=e.mainShade,i=void 0===r?500:r,a=e.lightShade,u=void 0===a?300:a,s=e.darkShade,c=void 0===s?700:s;if(!(t=lL({},t)).main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error(bL(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error(bL(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return JU(t,"light",u,o),JU(t,"dark",c,o),t.contrastText||(t.contrastText=p(t.main)),t},y={dark:XU,light:$U};return wL(lL({common:qU,mode:n,primary:v({color:s,name:"primary"}),secondary:v({color:c,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:v({color:l,name:"error"}),warning:v({color:d,name:"warning"}),info:v({color:h,name:"info"}),success:v({color:f,name:"success"}),grey:BU,contrastThreshold:i,getContrastText:p,augmentColor:v,tonalOffset:o},y[n]),u)}var eV=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var tV={textTransform:"uppercase"},nV='"Roboto", "Helvetica", "Arial", sans-serif';function rV(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,i=void 0===r?nV:r,a=n.fontSize,o=void 0===a?14:a,u=n.fontWeightLight,s=void 0===u?300:u,c=n.fontWeightRegular,l=void 0===c?400:c,h=n.fontWeightMedium,f=void 0===h?500:h,d=n.fontWeightBold,p=void 0===d?700:d,v=n.htmlFontSize,y=void 0===v?16:v,m=n.allVariants,g=n.pxToRem,k=cL(n,eV);var w=o/14,b=g||function(e){return"".concat(e/y*w,"rem")},_=function(e,t,n,r,a){return lL({fontFamily:i,fontWeight:e,fontSize:b(t),lineHeight:n},i===nV?{letterSpacing:"".concat((o=r/t,Math.round(1e5*o)/1e5),"em")}:{},a,m);var o},x={h1:_(s,96,1.167,-1.5),h2:_(s,60,1.2,-.5),h3:_(l,48,1.167,0),h4:_(l,34,1.235,.25),h5:_(l,24,1.334,0),h6:_(f,20,1.6,.15),subtitle1:_(l,16,1.75,.15),subtitle2:_(f,14,1.57,.1),body1:_(l,16,1.5,.15),body2:_(l,14,1.43,.15),button:_(f,14,1.75,.4,tV),caption:_(l,12,1.66,.4),overline:_(l,12,2.66,1,tV)};return wL(lL({htmlFontSize:y,pxToRem:b,fontFamily:i,fontSize:o,fontWeightLight:s,fontWeightRegular:l,fontWeightMedium:f,fontWeightBold:p},x),k,{clone:!1})}function iV(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var aV=["none",iV(0,2,1,-1,0,1,1,0,0,1,3,0),iV(0,3,1,-2,0,2,2,0,0,1,5,0),iV(0,3,3,-2,0,3,4,0,0,1,8,0),iV(0,2,4,-1,0,4,5,0,0,1,10,0),iV(0,3,5,-1,0,5,8,0,0,1,14,0),iV(0,3,5,-1,0,6,10,0,0,1,18,0),iV(0,4,5,-2,0,7,10,1,0,2,16,1),iV(0,5,5,-3,0,8,10,1,0,3,14,2),iV(0,5,6,-3,0,9,12,1,0,3,16,2),iV(0,6,6,-3,0,10,14,1,0,4,18,3),iV(0,6,7,-4,0,11,15,1,0,4,20,3),iV(0,7,8,-4,0,12,17,2,0,5,22,4),iV(0,7,8,-4,0,13,19,2,0,5,24,4),iV(0,7,9,-4,0,14,21,2,0,5,26,4),iV(0,8,9,-5,0,15,22,2,0,6,28,5),iV(0,8,10,-5,0,16,24,2,0,6,30,5),iV(0,8,11,-5,0,17,26,2,0,6,32,5),iV(0,9,11,-5,0,18,28,2,0,7,34,6),iV(0,9,12,-6,0,19,29,2,0,7,36,6),iV(0,10,13,-6,0,20,31,3,0,8,38,7),iV(0,10,13,-6,0,21,33,3,0,8,40,7),iV(0,10,14,-6,0,22,35,3,0,8,42,7),iV(0,11,14,-7,0,23,36,3,0,9,44,8),iV(0,11,15,-7,0,24,38,3,0,9,46,8)],oV=["duration","easing","delay"],uV={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},sV={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function cV(e){return"".concat(Math.round(e),"ms")}function lV(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function hV(e){var t=lL({},uV,e.easing),n=lL({},sV,e.duration);return lL({getAutoHeightDuration:lV,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.duration,a=void 0===i?n.standard:i,o=r.easing,u=void 0===o?t.easeInOut:o,s=r.delay,c=void 0===s?0:s;cL(r,oV);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof a?a:cV(a)," ").concat(u," ").concat("string"===typeof c?c:cV(c))})).join(",")}},e,{easing:t,duration:n})}var fV={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},dV=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function pV(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,r=e.palette,i=void 0===r?{}:r,a=e.transitions,o=void 0===a?{}:a,u=e.typography,s=void 0===u?{}:u,c=cL(e,dV),l=ZU(i),h=mU(e),f=wL(h,{mixins:OU(h.breakpoints,h.spacing,n),palette:l,shadows:aV.slice(),typography:rV(l,s),transitions:hV(o),zIndex:lL({},fV)});f=wL(f,c);for(var d=arguments.length,p=new Array(d>1?d-1:0),v=1;v<d;v++)p[v-1]=arguments[v];return f=p.reduce((function(e,t){return wL(e,t)}),f)}var vV=pV(),yV=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=void 0===t?DU:t,r=e.rootShouldForwardProp,i=void 0===r?RU:r,a=e.slotShouldForwardProp,o=void 0===a?RU:a,u=e.styleFunctionSx,s=void 0===u?IU:u;return function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.name,u=r.slot,l=r.skipVariantsResolver,h=r.skipSx,f=r.overridesResolver,d=cL(r,SU),p=void 0!==l?l:u&&"Root"!==u||!1,v=h||!1;var y=RU;"Root"===u?y=i:u&&(y=o);var m=hU(e,lL({shouldForwardProp:y,label:t},d)),g=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var o=r?r.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){var r=t.theme,i=cL(t,TU);return e(lL({theme:CU(r)?n:r},i))}:e})):[],u=e;a&&f&&o.push((function(e){var t=CU(e.theme)?n:e.theme,r=NU(a,t);if(r){var i={};return Object.entries(r).forEach((function(t){var n=c(t,2),r=n[0],a=n[1];i[r]="function"===typeof a?a(e):a})),f(e,i)}return null})),a&&!p&&o.push((function(e){var t=CU(e.theme)?n:e.theme;return PU(e,AU(a,t),t,a)})),v||o.push((function(e){var t=CU(e.theme)?n:e.theme;return s(lL({},e,{theme:t}))}));var l=o.length-r.length;if(Array.isArray(e)&&l>0){var h=new Array(l).fill("");(u=[].concat(Pe(e),Pe(h))).raw=[].concat(Pe(e.raw),Pe(h))}else"function"===typeof e&&e.__emotion_real!==e&&(u=function(t){var r=t.theme,i=cL(t,EU);return e(lL({theme:CU(r)?n:r},i))});var d=m.apply(void 0,[u].concat(Pe(o)));return d};return m.withConfig&&(g.withConfig=m.withConfig),g}}({defaultTheme:vV,rootShouldForwardProp:function(e){return RU(e)&&"classes"!==e}}),mV=yV;function gV(e){var t=e.theme,n=e.name,r=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?function(e,t){var n=lL({},t);return Object.keys(e).forEach((function(t){void 0===n[t]&&(n[t]=e[t])})),n}(t.components[n].defaultProps,r):r}var kV=t.createContext(null);function wV(){return t.useContext(kV)}function bV(e){return 0===Object.keys(e).length}var _V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=wV();return!t||bV(t)?e:t},xV=mU();var IV=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xV;return _V(e)};function SV(e){return function(e){var t=e.props,n=e.name,r=e.defaultTheme;return gV({theme:IV(r),name:n,props:t})}({props:e.props,name:e.name,defaultTheme:vV})}var TV=t.createContext(),EV=function(e){return e},CV=function(){var e=EV;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=EV}}}(),NV={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function AV(e,t){return NV[t]||"".concat(CV.generate(e),"-").concat(t)}function PV(e){return AV("MuiGrid",e)}var RV=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],DV=function(e,t){var n={};return t.forEach((function(t){n[t]=AV(e,t)})),n}("MuiGrid",["root","container","item","zeroMinWidth"].concat(Pe([0,1,2,3,4,5,6,7,8,9,10].map((function(e){return"spacing-xs-".concat(e)}))),Pe(["column-reverse","column","row-reverse","row"].map((function(e){return"direction-xs-".concat(e)}))),Pe(["nowrap","wrap-reverse","wrap"].map((function(e){return"wrap-xs-".concat(e)}))),Pe(RV.map((function(e){return"grid-xs-".concat(e)}))),Pe(RV.map((function(e){return"grid-sm-".concat(e)}))),Pe(RV.map((function(e){return"grid-md-".concat(e)}))),Pe(RV.map((function(e){return"grid-lg-".concat(e)}))),Pe(RV.map((function(e){return"grid-xl-".concat(e)}))))),OV=DV,LV=["className","columns","columnSpacing","component","container","direction","item","lg","md","rowSpacing","sm","spacing","wrap","xl","xs","zeroMinWidth"];function MV(e){var t=parseFloat(e);return"".concat(t).concat(String(e).replace(String(t),"")||"px")}function FV(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||!e||e<=0)return[];if("string"===typeof e&&!Number.isNaN(Number(e))||"number"===typeof e)return[n["spacing-xs-".concat(String(e))]||"spacing-xs-".concat(String(e))];var r=e.xs,i=e.sm,a=e.md,o=e.lg,u=e.xl;return[Number(r)>0&&(n["spacing-xs-".concat(String(r))]||"spacing-xs-".concat(String(r))),Number(i)>0&&(n["spacing-sm-".concat(String(i))]||"spacing-sm-".concat(String(i))),Number(a)>0&&(n["spacing-md-".concat(String(a))]||"spacing-md-".concat(String(a))),Number(o)>0&&(n["spacing-lg-".concat(String(o))]||"spacing-lg-".concat(String(o))),Number(u)>0&&(n["spacing-xl-".concat(String(u))]||"spacing-xl-".concat(String(u)))]}var UV=mV("div",{name:"MuiGrid",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState,r=n.container,i=n.direction,a=n.item,o=n.lg,u=n.md,s=n.sm,c=n.spacing,l=n.wrap,h=n.xl,f=n.xs,d=n.zeroMinWidth;return[t.root,r&&t.container,a&&t.item,d&&t.zeroMinWidth].concat(Pe(FV(c,r,t)),["row"!==i&&t["direction-xs-".concat(String(i))],"wrap"!==l&&t["wrap-xs-".concat(String(l))],!1!==f&&t["grid-xs-".concat(String(f))],!1!==s&&t["grid-sm-".concat(String(s))],!1!==u&&t["grid-md-".concat(String(u))],!1!==o&&t["grid-lg-".concat(String(o))],!1!==h&&t["grid-xl-".concat(String(h))]])}})((function(e){var t=e.ownerState;return lL({boxSizing:"border-box"},t.container&&{display:"flex",flexWrap:"wrap",width:"100%"},t.item&&{margin:0},t.zeroMinWidth&&{minWidth:0},"wrap"!==t.wrap&&{flexWrap:t.wrap})}),(function(e){var t=e.theme;return vL({theme:t},gL({values:e.ownerState.direction,breakpoints:t.breakpoints.values}),(function(e){var t={flexDirection:e};return 0===e.indexOf("column")&&(t["& > .".concat(OV.item)]={maxWidth:"none"}),t}))}),(function(e){var t=e.theme,n=e.ownerState,r=n.container,i=n.rowSpacing,a={};if(r&&0!==i){var o=gL({values:i,breakpoints:t.breakpoints.values});a=vL({theme:t},o,(function(e){var n=t.spacing(e);return"0px"!==n?l({marginTop:"-".concat(MV(n))},"& > .".concat(OV.item),{paddingTop:MV(n)}):{}}))}return a}),(function(e){var t=e.theme,n=e.ownerState,r=n.container,i=n.columnSpacing,a={};if(r&&0!==i){var o=gL({values:i,breakpoints:t.breakpoints.values});a=vL({theme:t},o,(function(e){var n=t.spacing(e);return"0px"!==n?l({width:"calc(100% + ".concat(MV(n),")"),marginLeft:"-".concat(MV(n))},"& > .".concat(OV.item),{paddingLeft:MV(n)}):{}}))}return a}),(function(e){var t,n=e.theme,r=e.ownerState;return n.breakpoints.keys.reduce((function(e,i){var a={};if(r[i]&&(t=r[i]),!t)return e;if(!0===t)a={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===t)a={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{var o=gL({values:r.columns,breakpoints:n.breakpoints.values}),u="object"===typeof o?o[i]:o;if(void 0===u||null===u)return e;var s="".concat(Math.round(t/u*1e8)/1e6,"%"),c={};if(r.container&&r.item&&0!==r.columnSpacing){var l=n.spacing(r.columnSpacing);if("0px"!==l){var h="calc(".concat(s," + ").concat(MV(l),")");c={flexBasis:h,maxWidth:h}}}a=lL({flexBasis:s,flexGrow:0,maxWidth:s},c)}return 0===n.breakpoints.values[i]?Object.assign(e,a):e[n.breakpoints.up(i)]=a,e}),{})})),VV=function(e){var t=e.classes,n=e.container,r=e.direction,i=e.item,a=e.lg,o=e.md,u=e.sm,s=e.spacing,c=e.wrap,l=e.xl,h=e.xs;return function(e,t,n){var r={};return Object.keys(e).forEach((function(i){r[i]=e[i].reduce((function(e,r){return r&&(n&&n[r]&&e.push(n[r]),e.push(t(r))),e}),[]).join(" ")})),r}({root:["root",n&&"container",i&&"item",e.zeroMinWidth&&"zeroMinWidth"].concat(Pe(FV(s,n)),["row"!==r&&"direction-xs-".concat(String(r)),"wrap"!==c&&"wrap-xs-".concat(String(c)),!1!==h&&"grid-xs-".concat(String(h)),!1!==u&&"grid-sm-".concat(String(u)),!1!==o&&"grid-md-".concat(String(o)),!1!==a&&"grid-lg-".concat(String(a)),!1!==l&&"grid-xl-".concat(String(l))])},PV,t)},jV=t.forwardRef((function(e,n){var r=DM(SV({props:e,name:"MuiGrid"})),i=r.className,a=r.columns,o=r.columnSpacing,u=r.component,s=void 0===u?"div":u,c=r.container,l=void 0!==c&&c,h=r.direction,f=void 0===h?"row":h,d=r.item,p=void 0!==d&&d,v=r.lg,y=void 0!==v&&v,m=r.md,g=void 0!==m&&m,k=r.rowSpacing,w=r.sm,b=void 0!==w&&w,_=r.spacing,x=void 0===_?0:_,I=r.wrap,S=void 0===I?"wrap":I,T=r.xl,E=void 0!==T&&T,C=r.xs,N=void 0!==C&&C,A=r.zeroMinWidth,P=void 0!==A&&A,R=cL(r,LV),D=k||x,O=o||x,L=t.useContext(TV),M=l?a||12:L,F=lL({},r,{columns:M,container:l,direction:f,item:p,lg:y,md:g,sm:b,rowSpacing:D,columnSpacing:O,wrap:S,xl:E,xs:N,zeroMinWidth:P}),U=VV(F);return(0,eL.jsx)(TV.Provider,{value:M,children:(0,eL.jsx)(UV,lL({ownerState:F,className:fL(U.root,i),as:s,ref:n},R))})})),qV=jV,BV=function(){var e=zt.auth().currentUser.uid,n=c((0,t.useState)("public"),2),r=n[0],i=n[1],a=c((0,t.useState)(["public"]),2),o=a[0],u=a[1],s=c((0,t.useState)(""),2);s[0],s[1];return(0,t.useEffect)((function(){u(["public"]),zt.database().ref("userlist/userdata"+e+"/room").on("child_added",(function(e){var t=e.child("roomname").val();t&&u((function(e){return[].concat(Pe(e),[t])}))}))}),[r]),(0,eL.jsxs)("div",{children:[(0,eL.jsxs)(qV,{container:!0,spacing:2,children:[(0,eL.jsx)(qV,{item:!0,xs:2,children:(0,eL.jsx)("button",{id:"button2",onClick:function(){var t=prompt("\u8acb\u8f38\u5165\u804a\u5929\u5ba4\u540d\u7a31","");null!=t?(i(t),zt.database().ref("userlist/userdata"+e+"/room").push({roomname:t})):alert("\u8f38\u5165\u932f\u8aa4")},children:"Add Chatroom"})}),(0,eL.jsx)(qV,{item:!0,xs:2,children:(0,eL.jsx)("button",{id:"button2",onClick:function(){if("public"!=r){var e=prompt("\u8acb\u8f38\u5165\u52a0\u5165\u6210\u54e1\u7684\u4fe1\u7bb1","");null!=e?zt.database().ref("userlist/").once("value",(function(t){for(var n=0,i=Object.values(t.val());n<i.length;n++){var a,o=i[n];if(console.log(o.email),o.mail==e)a=zt.database().ref("userlist/userdata"+o.id+"/room").push({roomname:r,check:!0}).key,zt.database().ref("userlist/userdata"+o.id+"/room/"+a).update({key:a})}})):alert("\u8f38\u5165\u932f\u8aa4")}else alert("You can't add member in public room")},children:"Add Member"})}),(0,eL.jsx)(qV,{item:!0,xs:2,children:(0,eL.jsx)("button",{align:"center",id:"button2",onClick:function(){console.log("sign_out"),zt.auth().signOut().then((function(){}))},children:"Sign out"})})]}),(0,eL.jsxs)(qV,{container:!0,spacing:0,children:[(0,eL.jsx)(qV,{item:!0,xs:8,children:(0,eL.jsx)(sL,{keynum:r})}),(0,eL.jsx)(qV,{item:!0,xs:4,children:(0,eL.jsx)("div",{id:"main",children:o.map((function(e){return(0,eL.jsx)("div",{children:(0,eL.jsx)("button",{id:"button3",onClick:function(){return function(e){i(e)}(e)},children:e})})}))})})]})]})};function zV(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function WV(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}var KV=function(){return KV=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},KV.apply(this,arguments)},GV=function(e){return{loading:void 0===e||null===e,value:e}},HV=function(e){var n=e?e():void 0,r=(0,t.useReducer)((function(e,t){switch(t.type){case"error":return KV(KV({},e),{error:t.error,loading:!1,value:void 0});case"reset":return GV(t.defaultValue);case"value":return KV(KV({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),GV(n)),i=r[0],a=r[1],o=function(){var t=e?e():void 0;a({type:"reset",defaultValue:t})},u=function(e){a({type:"error",error:e})},s=function(e){a({type:"value",value:e})};return(0,t.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:u,setValue:s,value:i.value}}),[i.error,i.loading,o,u,s,i.value])},QV=function(e,n){var r=HV((function(){return e.currentUser})),i=r.error,a=r.loading,o=r.setError,u=r.setValue,s=r.value;(0,t.useEffect)((function(){var t=function(e,t,n,r){return xe(e).onAuthStateChanged(t,n,r)}(e,(function(e){return zV(void 0,void 0,void 0,(function(){var t;return WV(this,(function(r){switch(r.label){case 0:if(!(null===n||void 0===n?void 0:n.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),o(t),[3,4];case 4:return u(e),[2]}}))}))}),o);return function(){t()}}),[e]);var c=[s,a,i];return(0,t.useMemo)((function(){return c}),c)},YV=zt.auth(),$V=function(){var e=c(QV(YV),1)[0];return"default"!==Notification.permission&&"undefined"!==Notification.permission||Notification.requestPermission((function(e){})),(0,eL.jsx)("div",{children:e?(0,eL.jsx)(BV,{}):(0,eL.jsx)(aL,{})})},XV=document.getElementById("root");(0,i.s)(XV).render((0,eL.jsx)($V,{}))}()}();
//# sourceMappingURL=main.9108408d.js.map